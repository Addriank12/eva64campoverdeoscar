var d0=Object.defineProperty,h0=Object.defineProperties;var f0=Object.getOwnPropertyDescriptors;var $v=Object.getOwnPropertySymbols;var p0=Object.prototype.hasOwnProperty,g0=Object.prototype.propertyIsEnumerable;var Hv=(t,e,n)=>e in t?d0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})p0.call(e,n)&&Hv(t,n,e[n]);if($v)for(var n of $v(e))g0.call(e,n)&&Hv(t,n,e[n]);return t},ye=(t,e)=>h0(t,f0(e));var b=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});var qv=null;var Ed=1,Dd=Symbol("SIGNAL");function de(t){let e=qv;return qv=t,e}var zv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function m0(t){if(!(bd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ed)){if(!t.producerMustRecompute(t)&&!Cd(t)){t.dirty=!1,t.lastCleanEpoch=Ed;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ed}}function Gv(t){return t&&(t.nextProducerIndex=0),de(t)}function Wv(t,e){if(de(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(bd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Td(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Cd(t){Ha(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(m0(n),r!==n.version))return!0}return!1}function Kv(t){if(Ha(t),bd(t))for(let e=0;e<t.producerNode.length;e++)Td(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Td(t,e){if(y0(t),Ha(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Td(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ha(i),i.producerIndexOfThis[r]=e}}function bd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ha(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function y0(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function v0(){throw new Error}var _0=v0;function Qv(t){_0=t}function W(t){return typeof t=="function"}function ai(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qa=ai(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function hr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(s){e=s instanceof qa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Yv(s)}catch(o){e=e??[],o instanceof qa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new qa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Yv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&hr(n,e)}remove(e){let{_finalizers:n}=this;n&&hr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Sd=Re.EMPTY;function za(t){return t instanceof Re||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function Yv(t){W(t)?t():t.unsubscribe()}var Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ci={setTimeout(t,e,...n){let{delegate:r}=ci;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ci;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ga(t){ci.setTimeout(()=>{let{onUnhandledError:e}=Pt;if(e)e(t);else throw t})}function Ws(){}var Jv=Ad("C",void 0,void 0);function Zv(t){return Ad("E",void 0,t)}function Xv(t){return Ad("N",t,void 0)}function Ad(t,e,n){return{kind:t,value:e,error:n}}var fr=null;function ui(t){if(Pt.useDeprecatedSynchronousErrorHandling){let e=!fr;if(e&&(fr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=fr;if(fr=null,n)throw r}}else t()}function e_(t){Pt.useDeprecatedSynchronousErrorHandling&&fr&&(fr.errorThrown=!0,fr.error=t)}var pr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,za(e)&&e.add(this)):this.destination=E0}static create(e,n,r){return new li(e,n,r)}next(e){this.isStopped?Md(Xv(e),this):this._next(e)}error(e){this.isStopped?Md(Zv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Md(Jv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},I0=Function.prototype.bind;function Rd(t,e){return I0.call(t,e)}var Nd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wa(r)}else Wa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wa(n)}}},li=class extends pr{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Pt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rd(e.next,s),error:e.error&&Rd(e.error,s),complete:e.complete&&Rd(e.complete,s)}):i=e}this.destination=new Nd(i)}};function Wa(t){Pt.useDeprecatedSynchronousErrorHandling?e_(t):Ga(t)}function w0(t){throw t}function Md(t,e){let{onStoppedNotification:n}=Pt;n&&ci.setTimeout(()=>n(t,e))}var E0={closed:!0,next:Ws,error:w0,complete:Ws};var di=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(t){return t}function xd(...t){return Pd(t)}function Pd(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=C0(n)?n:new li(n,r,i);return ui(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=t_(r),new r((i,s)=>{let o=new li({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[di](){return this}pipe(...n){return Pd(n)(this)}toPromise(n){return n=t_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function t_(t){var e;return(e=t??Pt.Promise)!==null&&e!==void 0?e:Promise}function D0(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function C0(t){return t&&t instanceof pr||D0(t)&&za(t)}function Od(t){return W(t?.lift)}function ue(t){return e=>{if(Od(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(t,e,n,r,i){return new kd(t,e,n,r,i)}var kd=class extends pr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hi(){return ue((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fi=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Od(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return hi()(this)}};var n_=ai(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ka(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new n_}next(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Sd:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,hr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new Ka(e,n),t})(),Ka=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Sd}};var Be=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Fd={now(){return(Fd.delegate||Date).now()},delegate:void 0};var Qa=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Ks={setInterval(t,e,...n){let{delegate:r}=Ks;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ks;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var pi=class extends Qa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ks.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ks.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,hr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};gi.now=Fd.now;var mi=class extends gi{constructor(e,n=gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Vd=new mi(pi);var Ya=class extends pi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ja=class extends mi{};var Ld=new Ja(Ya);var ht=new ce(t=>t.complete());function r_(t){return t&&W(t.schedule)}function i_(t){return t[t.length-1]}function Za(t){return W(i_(t))?t.pop():void 0}function Pn(t){return r_(i_(t))?t.pop():void 0}function Ud(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function s_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gr(t){return this instanceof gr?(this.v=t,this):new gr(t)}function a_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(I){return new Promise(function(A,N){s.push([m,I,A,N])>1||c(m,I)})})}function c(m,I){try{u(r[m](I))}catch(A){p(s[0][3],A)}}function u(m){m.value instanceof gr?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){c("next",m)}function h(m){c("throw",m)}function p(m,I){m(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function c_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof s_=="function"?s_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var Xa=t=>t&&typeof t.length=="number"&&typeof t!="function";function ec(t){return W(t?.then)}function tc(t){return W(t[di])}function nc(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function rc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function T0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ic=T0();function sc(t){return W(t?.[ic])}function oc(t){return a_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield gr(n.read());if(i)return yield gr(void 0);yield yield gr(r)}}finally{n.releaseLock()}})}function ac(t){return W(t?.getReader)}function Ne(t){if(t instanceof ce)return t;if(t!=null){if(tc(t))return b0(t);if(Xa(t))return S0(t);if(ec(t))return A0(t);if(nc(t))return u_(t);if(sc(t))return R0(t);if(ac(t))return M0(t)}throw rc(t)}function b0(t){return new ce(e=>{let n=t[di]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function S0(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function A0(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ga)})}function R0(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function u_(t){return new ce(e=>{N0(t,e).catch(n=>e.error(n))})}function M0(t){return u_(oc(t))}function N0(t,e){var n,r,i,s;return o_(this,void 0,void 0,function*(){try{for(n=c_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ot(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function On(t,e=0){return ue((n,r)=>{n.subscribe(ne(r,i=>ot(r,t,()=>r.next(i),e),()=>ot(r,t,()=>r.complete(),e),i=>ot(r,t,()=>r.error(i),e)))})}function kn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function l_(t,e){return Ne(t).pipe(kn(e),On(e))}function d_(t,e){return Ne(t).pipe(kn(e),On(e))}function h_(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function f_(t,e){return new ce(n=>{let r;return ot(n,e,()=>{r=t[ic](),ot(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function cc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function p_(t,e){return cc(oc(t),e)}function g_(t,e){if(t!=null){if(tc(t))return l_(t,e);if(Xa(t))return h_(t,e);if(ec(t))return d_(t,e);if(nc(t))return cc(t,e);if(sc(t))return f_(t,e);if(ac(t))return p_(t,e)}throw rc(t)}function Me(t,e){return e?g_(t,e):Ne(t)}function Q(...t){let e=Pn(t);return Me(t,e)}function yi(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function jd(t){return!!t&&(t instanceof ce||W(t.lift)&&W(t.subscribe))}var fn=ai(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function re(t,e){return ue((n,r)=>{let i=0;n.subscribe(ne(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:x0}=Array;function P0(t,e){return x0(e)?t(...e):t(e)}function uc(t){return re(e=>P0(t,e))}var{isArray:O0}=Array,{getPrototypeOf:k0,prototype:F0,keys:V0}=Object;function lc(t){if(t.length===1){let e=t[0];if(O0(e))return{args:e,keys:null};if(L0(e)){let n=V0(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function L0(t){return t&&typeof t=="object"&&k0(t)===F0}function dc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function hc(...t){let e=Pn(t),n=Za(t),{args:r,keys:i}=lc(t);if(r.length===0)return Me([],e);let s=new ce(U0(r,e,i?o=>dc(i,o):dt));return n?s.pipe(uc(n)):s}function U0(t,e,n=dt){return r=>{m_(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)m_(e,()=>{let l=Me(t[u],e),h=!1;l.subscribe(ne(r,p=>{s[u]=p,h||(h=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function m_(t,e,n){t?ot(n,t,e):e()}function y_(t,e,n,r,i,s,o,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},I=N=>l<r?A(N):u.push(N),A=N=>{s&&e.next(N),l++;let M=!1;Ne(n(N,h++)).subscribe(ne(e,O=>{i?.(O),s?I(O):e.next(O)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let O=u.shift();o?ot(e,o,()=>A(O)):A(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(ne(e,I,()=>{p=!0,m()})),()=>{c?.()}}function ke(t,e,n=1/0){return W(e)?ke((r,i)=>re((s,o)=>e(r,s,i,o))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>y_(r,i,t,n)))}function Bd(t=1/0){return ke(dt,t)}function v_(){return Bd(1)}function vi(...t){return v_()(Me(t,Pn(t)))}function fc(t){return new ce(e=>{Ne(t()).subscribe(e)})}function $d(...t){let e=Za(t),{args:n,keys:r}=lc(t),i=new ce(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ne(n[h]).subscribe(ne(s,m=>{p||(p=!0,l--),c[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?dc(r,c):c),s.complete())}))}});return e?i.pipe(uc(e)):i}function Ot(t,e){return ue((n,r)=>{let i=0;n.subscribe(ne(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Fn(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ne(n,void 0,void 0,o=>{s=Ne(t(o,Fn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function __(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(ne(o,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function _i(t,e){return W(e)?ke(t,e,1):ke(t,1)}function Vn(t){return ue((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function pn(t){return t<=0?()=>ht:ue((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Hd(t){return re(()=>t)}function pc(t=j0){return ue((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function j0(){return new fn}function Qs(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function zt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):dt,pn(1),n?Vn(e):pc(()=>new fn))}function Ii(t){return t<=0?()=>ht:ue((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):dt,Ii(1),n?Vn(e):pc(()=>new fn))}function zd(t,e){return ue(__(t,e,arguments.length>=2,!0))}function Gd(...t){let e=Pn(t);return ue((n,r)=>{(e?vi(t,n,e):vi(t,n)).subscribe(r)})}function kt(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(ne(r,u=>{i?.unsubscribe();let l=0,h=s++;Ne(t(u,h)).subscribe(i=ne(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Wd(t){return ue((e,n)=>{Ne(t).subscribe(ne(n,()=>n.complete(),Ws)),!n.closed&&e.subscribe(n)})}function Fe(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(ne(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var iI="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(Jh(e,n)),this.code=e}};function Jh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function lo(t){return{toString:t}.toString()}var gc="__parameters__";function B0(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function $0(t,e,n){return lo(()=>{let r=B0(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,h){let p=u.hasOwnProperty(gc)?u[gc]:Object.defineProperty(u,gc,{value:[]})[gc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var mr=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function H0(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function at(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(at).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function I_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var q0=_e({__forward_ref__:_e});function ki(t){return t.__forward_ref__=ki,t.toString=function(){return at(this())},t}function nt(t){return sI(t)?t():t}function sI(t){return typeof t=="function"&&t.hasOwnProperty(q0)&&t.__forward_ref__===ki}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fi(t){return{providers:t.providers||[],imports:t.imports||[]}}function zc(t){return w_(t,aI)||w_(t,cI)}function oI(t){return zc(t)!==null}function w_(t,e){return t.hasOwnProperty(e)?t[e]:null}function z0(t){let e=t&&(t[aI]||t[cI]);return e||null}function E_(t){return t&&(t.hasOwnProperty(D_)||t.hasOwnProperty(G0))?t[D_]:null}var aI=_e({\u0275prov:_e}),D_=_e({\u0275inj:_e}),cI=_e({ngInjectableDef:_e}),G0=_e({ngInjectorDef:_e}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uI(t){return t&&!!t.\u0275providers}var W0=_e({\u0275cmp:_e}),K0=_e({\u0275dir:_e}),Q0=_e({\u0275pipe:_e}),Y0=_e({\u0275mod:_e}),Cc=_e({\u0275fac:_e}),Ys=_e({__NG_ELEMENT_ID__:_e}),C_=_e({__NG_ENV_ID__:_e});function Gc(t){return typeof t=="string"?t:t==null?"":String(t)}function J0(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gc(t)}function Z0(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function Zh(t,e){throw new j(-201,!1)}var X=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(X||{}),lh;function lI(){return lh}function _t(t){let e=lh;return lh=t,e}function dI(t,e,n){let r=zc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&X.Optional)return null;if(e!==void 0)return e;Zh(t,"Injector")}var X0={},Js=X0,dh="__NG_DI_FLAG__",Tc="ngTempTokenPath",eS="ngTokenPath",tS=/\n/gm,nS="\u0275",T_="__source",Ci;function rS(){return Ci}function Ln(t){let e=Ci;return Ci=t,e}function iS(t,e=X.Default){if(Ci===void 0)throw new j(-203,!1);return Ci===null?dI(t,void 0,e):Ci.get(t,e&X.Optional?null:void 0,e)}function te(t,e=X.Default){return(lI()||iS)(nt(t),e)}function L(t,e=X.Default){return te(t,Wc(e))}function Wc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hh(t){let e=[];for(let n=0;n<t.length;n++){let r=nt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=X.Default;for(let o=0;o<r.length;o++){let c=r[o],u=oS(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(te(i,s))}else e.push(te(r))}return e}function sS(t,e){return t[dh]=e,t.prototype[dh]=e,t}function oS(t){return t[dh]}function aS(t,e,n,r){let i=t[Tc];throw e[T_]&&i.unshift(e[T_]),t.message=cS(`
`+t.message,i,n,r),t[eS]=i,t[Tc]=null,t}function cS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==nS?t.slice(2):t;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):at(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(tS,`
  `)}`}var Yt=sS($0("Optional"),8);function bi(t,e){let n=t.hasOwnProperty(Cc);return n?t[Cc]:null}function Xh(t,e){t.forEach(n=>Array.isArray(n)?Xh(n,e):e(n))}function hI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function uS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function lS(t,e,n){let r=ho(t,e);return r>=0?t[r|1]=n:(r=~r,uS(t,r,e,n)),r}function Kd(t,e){let n=ho(t,e);if(n>=0)return t[n|1]}function ho(t,e){return dS(t,e,1)}function dS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Si={},It=[],Ai=new G(""),fI=new G("",-1),pI=new G(""),Sc=class{get(e,n=Js){if(n===Js){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return n}},gI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gI||{}),Kt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Kt||{}),Ye=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ye||{});function hS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function fh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];fS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function mI(t){return t===3||t===4||t===6}function fS(t){return t.charCodeAt(0)===64}function Zs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?b_(t,n,i,null,e[++r]):b_(t,n,i,null,null))}}return t}function b_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var yI="ng-template";function pS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ef(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ef(t){return t.type===4&&t.value!==yI}function gS(t,e,n){let r=t.type===4&&!n?yI:t.value;return e===r}function mS(t,e,n){let r=4,i=t.attrs,s=i!==null?_S(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Ft(r)&&!Ft(u))return!1;if(o&&Ft(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!gS(t,u,n)||u===""&&e.length===1){if(Ft(r))return!1;o=!0}}else if(r&8){if(i===null||!pS(t,i,u,n)){if(Ft(r))return!1;o=!0}}else{let l=e[++c],h=yS(u,i,ef(t),n);if(h===-1){if(Ft(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ft(r))return!1;o=!0}}}}return Ft(r)||o}function Ft(t){return(t&1)===0}function yS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return IS(e,t)}function vS(t,e,n=!1){for(let r=0;r<e.length;r++)if(mS(t,e[r],n))return!0;return!1}function _S(t){for(let e=0;e<t.length;e++){let n=t[e];if(mI(n))return e}return t.length}function IS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function S_(t,e){return t?":not("+e.trim()+")":e}function wS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ft(o)&&(e+=S_(s,i),i=""),r=o,s=s||!Ft(r);n++}return i!==""&&(e+=S_(s,i)),e}function ES(t){return t.map(wS).join(",")}function DS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ft(i))break;i=s}r++}return{attrs:e,classes:n}}function Et(t){return lo(()=>{let e=EI(t),n=ye(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Kt.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});DI(n);let r=t.dependencies;return n.directiveDefs=R_(r,!1),n.pipeDefs=R_(r,!0),n.id=bS(n),n})}function CS(t){return _r(t)||vI(t)}function TS(t){return t!==null}function Vi(t){return lo(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function A_(t,e){if(t==null)return Si;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=Ye.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==Ye.None?[r,c]:r,e[s]=o):n[s]=r}return n}function ft(t){return lo(()=>{let e=EI(t);return DI(e),e})}function _r(t){return t[W0]||null}function vI(t){return t[K0]||null}function _I(t){return t[Q0]||null}function II(t){let e=_r(t)||vI(t)||_I(t);return e!==null?e.standalone:!1}function wI(t,e){let n=t[Y0]||null;if(!n&&e===!0)throw new Error(`Type ${at(t)} does not have '\u0275mod' property.`);return n}function EI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Si,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:A_(t.inputs,e),outputs:A_(t.outputs),debugInfo:null}}function DI(t){t.features?.forEach(e=>e(t))}function R_(t,e){if(!t)return null;let n=e?_I:CS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(TS)}function bS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $n(t){return{\u0275providers:t}}function SS(...t){return{\u0275providers:CI(!0,t),\u0275fromNgModule:!0}}function CI(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Xh(e,o=>{let c=o;ph(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&TI(i,s),n}function TI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];tf(i,s=>{e(s,r)})}}function ph(t,e,n,r){if(t=nt(t),!t)return!1;let i=null,s=E_(t),o=!s&&_r(t);if(!s&&!o){let u=t.ngModule;if(s=E_(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ph(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{Xh(s.imports,h=>{ph(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&TI(l,e)}if(!c){let l=bi(i)||(()=>new i);e({provide:i,useFactory:l,deps:It},i),e({provide:pI,useValue:i,multi:!0},i),e({provide:Ai,useValue:()=>te(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;tf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function tf(t,e){for(let n of t)uI(n)&&(n=n.\u0275providers),Array.isArray(n)?tf(n,e):e(n)}var AS=_e({provide:String,useValue:_e});function bI(t){return t!==null&&typeof t=="object"&&AS in t}function RS(t){return!!(t&&t.useExisting)}function MS(t){return!!(t&&t.useFactory)}function Ri(t){return typeof t=="function"}function NS(t){return!!t.useClass}var Kc=new G(""),_c={},xS={},Qd;function nf(){return Qd===void 0&&(Qd=new Sc),Qd}var wt=class{},Xs=class extends wt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mh(e,o=>this.processProvider(o)),this.records.set(fI,wi(void 0,this)),i.has("environment")&&this.records.set(wt,wi(void 0,this));let s=this.records.get(Kc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pI,It,X.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ln(this),r=_t(void 0),i;try{return e()}finally{Ln(n),_t(r)}}get(e,n=Js,r=X.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(C_))return e[C_](this);r=Wc(r);let i,s=Ln(this),o=_t(void 0);try{if(!(r&X.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=VS(e)&&zc(e);l&&this.injectableDefInScope(l)?u=wi(gh(e),_c):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&X.Self?nf():this.parent;return n=r&X.Optional&&n===Js?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Tc]=c[Tc]||[]).unshift(at(e)),s)throw c;return aS(c,e,"R3InjectorError",this.source)}else throw c}finally{_t(o),Ln(s)}}resolveInjectorInitializers(){let e=de(null),n=Ln(this),r=_t(void 0),i;try{let s=this.get(Ai,It,X.Self);for(let o of s)o()}finally{Ln(n),_t(r),de(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=nt(e);let n=Ri(e)?e:nt(e&&e.provide),r=OS(e);if(!Ri(e)&&e.multi===!0){let i=this.records.get(n);i||(i=wi(void 0,_c,!0),i.factory=()=>hh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=de(null);try{return n.value===_c&&(n.value=xS,n.value=n.factory()),typeof n.value=="object"&&n.value&&FS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{de(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=nt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gh(t){let e=zc(t),n=e!==null?e.factory:bi(t);if(n!==null)return n;if(t instanceof G)throw new j(204,!1);if(t instanceof Function)return PS(t);throw new j(204,!1)}function PS(t){if(t.length>0)throw new j(204,!1);let n=z0(t);return n!==null?()=>n.factory(t):()=>new t}function OS(t){if(bI(t))return wi(void 0,t.useValue);{let e=SI(t);return wi(e,_c)}}function SI(t,e,n){let r;if(Ri(t)){let i=nt(t);return bi(i)||gh(i)}else if(bI(t))r=()=>nt(t.useValue);else if(MS(t))r=()=>t.useFactory(...hh(t.deps||[]));else if(RS(t))r=()=>te(nt(t.useExisting));else{let i=nt(t&&(t.useClass||t.provide));if(kS(t))r=()=>new i(...hh(t.deps));else return bi(i)||gh(i)}return r}function wi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kS(t){return!!t.deps}function FS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function VS(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function mh(t,e){for(let n of t)Array.isArray(n)?mh(n,e):n&&uI(n)?mh(n.\u0275providers,e):e(n)}function br(t,e){t instanceof Xs&&t.assertNotDestroyed();let n,r=Ln(t),i=_t(void 0);try{return e()}finally{Ln(r),_t(i)}}function LS(){return lI()!==void 0||rS()!=null}function US(t){return typeof t=="function"}var _n=0,ee=1,H=2,Je=3,Vt=4,jt=5,eo=6,to=7,rt=8,Mi=9,Lt=10,Ve=11,no=12,M_=13,Li=14,Ut=15,Qc=16,Ei=17,Ni=18,Yc=19,AI=20,Un=21,Yd=22,Ir=23,gn=25,RI=1;var wr=7,Ac=8,Rc=9,it=10,rf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(rf||{});function yr(t){return Array.isArray(t)&&typeof t[RI]=="object"}function In(t){return Array.isArray(t)&&t[RI]===!0}function MI(t){return(t.flags&4)!==0}function Jc(t){return t.componentOffset>-1}function sf(t){return(t.flags&1)===1}function jn(t){return!!t.template}function jS(t){return(t[H]&512)!==0}var yh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function NI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Sr(){return xI}function xI(t){return t.type.prototype.ngOnChanges&&(t.setInput=$S),BS}Sr.ngInherit=!0;function BS(){let t=OI(this),e=t?.current;if(e){let n=t.previous;if(n===Si)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $S(t,e,n,r,i){let s=this.declaredInputs[r],o=OI(t)||HS(t,{previous:Si,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new yh(l&&l.currentValue,n,u===Si),NI(t,e,i,n)}var PI="__ngSimpleChanges__";function OI(t){return t[PI]||null}function HS(t,e){return t[PI]=e}var N_=null;var Gt=function(t,e,n){N_?.(t,e,n)},qS="svg",zS="math",GS=!1;function WS(){return GS}function Qt(t){for(;Array.isArray(t);)t=t[_n];return t}function kI(t,e){return Qt(e[t])}function Dt(t,e){return Qt(e[t.index])}function of(t,e){return t.data[e]}function Hn(t,e){let n=e[t];return yr(n)?n:n[_n]}function af(t){return(t[H]&128)===128}function KS(t){return In(t[Je])}function Mc(t,e){return e==null?null:t[e]}function FI(t){t[Ei]=0}function QS(t){t[H]&1024||(t[H]|=1024,af(t)&&ro(t))}function YS(t,e){for(;t>0;)e=e[Li],t--;return e}function cf(t){return!!(t[H]&9216||t[Ir]?.dirty)}function vh(t){t[Lt].changeDetectionScheduler?.notify(1),cf(t)?ro(t):t[H]&64&&(WS()?(t[H]|=1024,ro(t)):t[Lt].changeDetectionScheduler?.notify())}function ro(t){t[Lt].changeDetectionScheduler?.notify();let e=io(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!af(e)));)e=io(e)}function VI(t,e){if((t[H]&256)===256)throw new j(911,!1);t[Un]===null&&(t[Un]=[]),t[Un].push(e)}function JS(t,e){if(t[Un]===null)return;let n=t[Un].indexOf(e);n!==-1&&t[Un].splice(n,1)}function io(t){let e=t[Je];return In(e)?e[Je]:e}var ie={lFrame:GI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ZS(){return ie.lFrame.elementDepthCount}function XS(){ie.lFrame.elementDepthCount++}function eA(){ie.lFrame.elementDepthCount--}function LI(){return ie.bindingsEnabled}function tA(){return ie.skipHydrationRootTNode!==null}function nA(t){return ie.skipHydrationRootTNode===t}function rA(){ie.skipHydrationRootTNode=null}function De(){return ie.lFrame.lView}function Ct(){return ie.lFrame.tView}function UI(t){return ie.lFrame.contextLView=t,t[rt]}function jI(t){return ie.lFrame.contextLView=null,t}function pt(){let t=BI();for(;t!==null&&t.type===64;)t=t.parent;return t}function BI(){return ie.lFrame.currentTNode}function iA(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function fo(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function $I(){return ie.lFrame.isParent}function sA(){ie.lFrame.isParent=!1}function oA(t){return ie.lFrame.bindingIndex=t}function Zc(){return ie.lFrame.bindingIndex++}function aA(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function cA(){return ie.lFrame.inI18n}function uA(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,_h(e)}function lA(){return ie.lFrame.currentDirectiveIndex}function _h(t){ie.lFrame.currentDirectiveIndex=t}function dA(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function HI(t){ie.lFrame.currentQueryIndex=t}function hA(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[jt]:null}function qI(t,e,n){if(n&X.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&X.Host);)if(i=hA(s),i===null||(s=s[Li],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ie.lFrame=zI();return r.currentTNode=e,r.lView=t,!0}function uf(t){let e=zI(),n=t[ee];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zI(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?GI(t):e}function GI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function WI(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var KI=WI;function lf(){let t=WI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fA(t){return(ie.lFrame.contextLView=YS(t,ie.lFrame.contextLView))[rt]}function Ar(){return ie.lFrame.selectedIndex}function Er(t){ie.lFrame.selectedIndex=t}function QI(){let t=ie.lFrame;return of(t.tView,t.selectedIndex)}function pA(){return ie.lFrame.currentNamespace}var YI=!0;function df(){return YI}function hf(t){YI=t}function gA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=xI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ff(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ic(t,e,n){JI(t,e,3,n)}function wc(t,e,n,r){(t[H]&3)===n&&JI(t,e,n,r)}function Jd(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function JI(t,e,n,r){let i=r!==void 0?t[Ei]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Ei]+=65536),(c<s||s==-1)&&(mA(t,n,e,u),t[Ei]=(t[Ei]&4294901760)+u+2),u++}function x_(t,e){Gt(4,t,e);let n=de(null);try{e.call(t)}finally{de(n),Gt(5,t,e)}}function mA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[H]>>14<t[Ei]>>16&&(t[H]&3)===e&&(t[H]+=16384,x_(c,s)):x_(c,s)}var Ti=-1,Dr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function yA(t){return t instanceof Dr}function vA(t){return(t.flags&8)!==0}function _A(t){return(t.flags&16)!==0}function ZI(t){return t!==Ti}function Nc(t){return t&32767}function IA(t){return t>>16}function xc(t,e){let n=IA(t),r=e;for(;n>0;)r=r[Li],n--;return r}var Ih=!0;function P_(t){let e=Ih;return Ih=t,e}var wA=256,XI=wA-1,ew=5,EA=0,Wt={};function DA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ys)&&(r=n[Ys]),r==null&&(r=n[Ys]=EA++);let i=r&XI,s=1<<i;e.data[t+(i>>ew)]|=s}function Pc(t,e){let n=tw(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,Zd(r.data,t),Zd(e,null),Zd(r.blueprint,null));let i=pf(t,e),s=t.injectorIndex;if(ZI(i)){let o=Nc(i),c=xc(i,e),u=c[ee].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function Zd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function pf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ow(i),r===null)return Ti;if(n++,i=i[Li],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ti}function wh(t,e,n){DA(t,e,n)}function CA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(mI(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function nw(t,e,n){if(n&X.Optional||t!==void 0)return t;Zh(e,"NodeInjector")}function rw(t,e,n,r){if(n&X.Optional&&r===void 0&&(r=null),!(n&(X.Self|X.Host))){let i=t[Mi],s=_t(void 0);try{return i?i.get(e,r,n&X.Optional):dI(e,r,n&X.Optional)}finally{_t(s)}}return nw(r,e,n)}function iw(t,e,n,r=X.Default,i){if(t!==null){if(e[H]&2048&&!(r&X.Self)){let o=RA(t,e,n,r,Wt);if(o!==Wt)return o}let s=sw(t,e,n,r,Wt);if(s!==Wt)return s}return rw(e,n,r,i)}function sw(t,e,n,r,i){let s=SA(n);if(typeof s=="function"){if(!qI(e,t,r))return r&X.Host?nw(i,n,r):rw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&X.Optional))Zh(n);else return o}finally{KI()}}else if(typeof s=="number"){let o=null,c=tw(t,e),u=Ti,l=r&X.Host?e[Ut][jt]:null;for((c===-1||r&X.SkipSelf)&&(u=c===-1?pf(t,e):e[c+8],u===Ti||!k_(r,!1)?c=-1:(o=e[ee],c=Nc(u),e=xc(u,e)));c!==-1;){let h=e[ee];if(O_(s,c,h.data)){let p=TA(c,e,n,o,r,l);if(p!==Wt)return p}u=e[c+8],u!==Ti&&k_(r,e[ee].data[c+8]===l)&&O_(s,c,e)?(o=h,c=Nc(u),e=xc(u,e)):c=-1}}return i}function TA(t,e,n,r,i,s){let o=e[ee],c=o.data[t+8],u=r==null?Jc(c)&&Ih:r!=o&&(c.type&3)!==0,l=i&X.Host&&s===c,h=bA(c,o,n,u,l);return h!==null?xi(e,o,h,c):Wt}function bA(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?c:c+h,m=i?c+h:l;for(let I=p;I<m;I++){let A=o[I];if(I<u&&n===A||I>=u&&A.type===n)return I}if(i){let I=o[u];if(I&&jn(I)&&I.type===n)return u}return null}function xi(t,e,n,r){let i=t[n],s=e.data;if(yA(i)){let o=i;o.resolving&&Z0(J0(s[n]));let c=P_(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?_t(o.injectImpl):null,h=qI(t,r,X.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&gA(n,s[n],e)}finally{l!==null&&_t(l),P_(c),o.resolving=!1,KI()}}return i}function SA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ys)?t[Ys]:void 0;return typeof e=="number"?e>=0?e&XI:AA:e}function O_(t,e,n){let r=1<<t;return!!(n[e+(t>>ew)]&r)}function k_(t,e){return!(t&X.Self)&&!(t&X.Host&&e)}var vr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return iw(this._tNode,this._lView,e,Wc(r),n)}};function AA(){return new vr(pt(),De())}function po(t){return lo(()=>{let e=t.prototype.constructor,n=e[Cc]||Eh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Cc]||Eh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Eh(t){return sI(t)?()=>{let e=Eh(nt(t));return e&&e()}:bi(t)}function RA(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!(o[H]&512);){let c=sw(s,o,n,r|X.Self,Wt);if(c!==Wt)return c;let u=s.parent;if(!u){let l=o[AI];if(l){let h=l.get(n,Wt,r);if(h!==Wt)return h}u=ow(o),o=o[Li]}s=u}return i}function ow(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[jt]:null}function gf(t){return CA(pt(),t)}function F_(t,e=null,n=null,r){let i=aw(t,e,n,r);return i.resolveInjectorInitializers(),i}function aw(t,e=null,n=null,r,i=new Set){let s=[n||It,SS(t)];return r=r||(typeof t=="object"?void 0:at(t)),new Xs(s,e||nf(),r||null,i)}var Jt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return F_({name:""},i,r,"");{let s=r.name??"";return F_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Js,e.NULL=new Sc,e.\u0275prov=q({token:e,providedIn:"any",factory:()=>te(fI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var MA="ngOriginalError";function Xd(t){return t[MA]}var mn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Xd(e);for(;n&&Xd(n);)n=Xd(n);return n||null}},cw=new G("",{providedIn:"root",factory:()=>L(mn).handleError.bind(void 0)}),uw=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NA,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Dh=class extends uw{constructor(e){super(),this._lView=e}onDestroy(e){return VI(this._lView,e),()=>JS(this._lView,e)}};function NA(){return new Dh(De())}function xA(){return mf(pt(),De())}function mf(t,e){return new qn(Dt(t,e))}var qn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=xA;let t=e;return t})();var Ch=class extends Ke{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,LS()&&(this.destroyRef=L(uw,{optional:!0})??void 0)}emit(e){let n=de(null);try{super.next(e)}finally{de(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=eh(s),i&&(i=eh(i)),o&&(o=eh(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(c),c}};function eh(t){return e=>{setTimeout(t,void 0,e)}}var Qe=Ch;function lw(t){return(t.flags&128)===128}var dw=new Map,PA=0;function OA(){return PA++}function kA(t){dw.set(t[Yc],t)}function FA(t){dw.delete(t[Yc])}var V_="__ngContext__";function Cr(t,e){yr(e)?(t[V_]=e[Yc],kA(e)):t[V_]=e}function hw(t){return pw(t[no])}function fw(t){return pw(t[Vt])}function pw(t){for(;t!==null&&!In(t);)t=t[Vt];return t}var Th;function gw(t){Th=t}function VA(){if(Th!==void 0)return Th;if(typeof document<"u")return document;throw new j(210,!1)}var yf=new G("",{providedIn:"root",factory:()=>LA}),LA="ng",vf=new G(""),zn=new G("",{providedIn:"platform",factory:()=>"unknown"});var _f=new G("",{providedIn:"root",factory:()=>VA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UA="h",jA="b";var BA=()=>null;function If(t,e,n=!1){return BA(t,e,n)}var mw=!1,$A=new G("",{providedIn:"root",factory:()=>mw});var mc;function HA(){if(mc===void 0&&(mc=null,mr.trustedTypes))try{mc=mr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return mc}function L_(t){return HA()?.createScriptURL(t)||t}var Oc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iI})`}};function go(t){return t instanceof Oc?t.changingThisBreaksApplicationSecurity:t}function wf(t,e){let n=qA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${iI})`)}return n===e}function qA(t){return t instanceof Oc&&t.getTypeName()||null}var zA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yw(t){return t=String(t),t.match(zA)?t:"unsafe:"+t}var Xc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Xc||{});function GA(t){let e=_w();return e?e.sanitize(Xc.URL,t)||"":wf(t,"URL")?go(t):yw(Gc(t))}function WA(t){let e=_w();if(e)return L_(e.sanitize(Xc.RESOURCE_URL,t)||"");if(wf(t,"ResourceURL"))return L_(go(t));throw new j(904,!1)}function KA(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?WA:GA}function vw(t,e,n){return KA(e,n)(t)}function _w(){let t=De();return t&&t[Lt].sanitizer}function Iw(t){return t instanceof Function?t():t}var yn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(yn||{}),QA;function Ef(t,e){return QA(t,e)}function Di(t,e,n,r,i){if(r!=null){let s,o=!1;In(r)?s=r:yr(r)&&(o=!0,r=r[_n]);let c=Qt(r);t===0&&n!==null?i==null?Cw(e,n,c):kc(e,n,c,i||null,!0):t===1&&n!==null?kc(e,n,c,i||null,!0):t===2?hR(e,c,o):t===3&&e.destroyNode(c),s!=null&&pR(e,t,s,n,i)}}function YA(t,e){return t.createText(e)}function JA(t,e,n){t.setValue(e,n)}function ww(t,e,n){return t.createElement(e,n)}function ZA(t,e){Ew(t,e),e[_n]=null,e[jt]=null}function XA(t,e,n,r,i,s){r[_n]=i,r[jt]=e,tu(t,r,n,1,i,s)}function Ew(t,e){e[Lt].changeDetectionScheduler?.notify(1),tu(t,e,e[Ve],2,null,null)}function eR(t){let e=t[no];if(!e)return th(t[ee],t);for(;e;){let n=null;if(yr(e))n=e[no];else{let r=e[it];r&&(n=r)}if(!n){for(;e&&!e[Vt]&&e!==t;)yr(e)&&th(e[ee],e),e=e[Je];e===null&&(e=t),yr(e)&&th(e[ee],e),n=e&&e[Vt]}e=n}}function tR(t,e,n,r){let i=it+r,s=n.length;r>0&&(n[i-1][Vt]=e),r<s-it?(e[Vt]=n[i],hI(n,it+r,e)):(n.push(e),e[Vt]=null),e[Je]=n;let o=e[Qc];o!==null&&n!==o&&nR(o,e);let c=e[Ni];c!==null&&c.insertView(t),vh(e),e[H]|=128}function nR(t,e){let n=t[Rc],i=e[Je][Je][Ut];e[Ut]!==i&&(t[H]|=rf.HasTransplantedViews),n===null?t[Rc]=[e]:n.push(e)}function Dw(t,e){let n=t[Rc],r=n.indexOf(e);n.splice(r,1)}function so(t,e){if(t.length<=it)return;let n=it+e,r=t[n];if(r){let i=r[Qc];i!==null&&i!==t&&Dw(i,r),e>0&&(t[n-1][Vt]=r[Vt]);let s=bc(t,it+e);ZA(r[ee],r);let o=s[Ni];o!==null&&o.detachView(s[ee]),r[Je]=null,r[Vt]=null,r[H]&=-129}return r}function eu(t,e){if(!(e[H]&256)){let n=e[Ve];n.destroyNode&&tu(t,e,n,3,null,null),eR(e)}}function th(t,e){if(e[H]&256)return;let n=de(null);try{e[H]&=-129,e[H]|=256,e[Ir]&&Kv(e[Ir]),iR(t,e),rR(t,e),e[ee].type===1&&e[Ve].destroy();let r=e[Qc];if(r!==null&&In(e[Je])){r!==e[Je]&&Dw(r,e);let i=e[Ni];i!==null&&i.detachView(t)}FA(e)}finally{de(n)}}function rR(t,e){let n=t.cleanup,r=e[to];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[to]=null);let i=e[Un];if(i!==null){e[Un]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function iR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Dr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Gt(4,c,u);try{u.call(c)}finally{Gt(5,c,u)}}else{Gt(4,i,s);try{s.call(i)}finally{Gt(5,i,s)}}}}}function sR(t,e,n){return oR(t,e.parent,n)}function oR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[_n];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Kt.None||s===Kt.Emulated)return null}return Dt(r,n)}}function kc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Cw(t,e,n){t.appendChild(e,n)}function U_(t,e,n,r,i){r!==null?kc(t,e,n,r,i):Cw(t,e,n)}function aR(t,e,n,r){t.removeChild(e,n,r)}function Df(t,e){return t.parentNode(e)}function cR(t,e){return t.nextSibling(e)}function uR(t,e,n){return dR(t,e,n)}function lR(t,e,n){return t.type&40?Dt(t,n):null}var dR=lR,j_;function Cf(t,e,n,r){let i=sR(t,r,e),s=e[Ve],o=r.parent||e[jt],c=uR(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)U_(s,i,n[u],c,!1);else U_(s,i,n,c,!1);j_!==void 0&&j_(s,r,e,n,i)}function Ec(t,e){if(e!==null){let n=e.type;if(n&3)return Dt(e,t);if(n&4)return bh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ec(t,r);{let i=t[e.index];return In(i)?bh(-1,i):Qt(i)}}else{if(n&32)return Ef(e,t)()||Qt(t[e.index]);{let r=Tw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=io(t[Ut]);return Ec(i,r)}else return Ec(t,e.next)}}}return null}function Tw(t,e){if(e!==null){let r=t[Ut][jt],i=e.projection;return r.projection[i]}return null}function bh(t,e){let n=it+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return Ec(r,i)}return e[wr]}function hR(t,e,n){let r=Df(t,e);r&&aR(t,r,e,n)}function Tf(t,e,n,r,i,s,o){for(;n!=null;){let c=r[n.index],u=n.type;if(o&&e===0&&(c&&Cr(Qt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Tf(t,e,n.child,r,i,s,!1),Di(e,t,i,c,s);else if(u&32){let l=Ef(n,r),h;for(;h=l();)Di(e,t,i,h,s);Di(e,t,i,c,s)}else u&16?fR(t,e,r,n,i,s):Di(e,t,i,c,s);n=o?n.projectionNext:n.next}}function tu(t,e,n,r,i,s){Tf(n,r,t.firstChild,e,i,s,!1)}function fR(t,e,n,r,i,s){let o=n[Ut],u=o[jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Di(e,t,i,h,s)}else{let l=u,h=o[Je];lw(r)&&(l.flags|=128),Tf(t,e,l,h,i,s,!0)}}function pR(t,e,n,r,i){let s=n[wr],o=Qt(n);s!==o&&Di(e,t,r,s,i);for(let c=it;c<n.length;c++){let u=n[c];tu(u[ee],u,t,e,r,s)}}function gR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:yn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=yn.Important),t.setStyle(n,r,i,s))}}function mR(t,e,n){t.setAttribute(e,"style",n)}function bw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Sw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&fh(t,e,r),i!==null&&bw(t,e,i),s!==null&&mR(t,e,s)}var Ui={};function Rr(t=1){Aw(Ct(),De(),Ar()+t,!1)}function Aw(t,e,n,r){if(!r)if((e[H]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ic(e,s,n)}else{let s=t.preOrderHooks;s!==null&&wc(e,s,0,n)}Er(n)}function fe(t,e=X.Default){let n=De();if(n===null)return te(t,e);let r=pt();return iw(r,n,nt(t),e)}function Rw(t,e,n,r,i,s){let o=de(null);try{let c=null;i&Ye.SignalBased&&(c=e[r][Dd]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Ye.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):NI(e,c,r,s)}finally{de(o)}}function yR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Er(~i);else{let s=i,o=n[++r],c=n[++r];uA(o,s);let u=e[s];c(2,u)}}}finally{Er(-1)}}function nu(t,e,n,r,i,s,o,c,u,l,h){let p=e.blueprint.slice();return p[_n]=i,p[H]=r|4|128|8|64,(l!==null||t&&t[H]&2048)&&(p[H]|=2048),FI(p),p[Je]=p[Li]=t,p[rt]=n,p[Lt]=o||t&&t[Lt],p[Ve]=c||t&&t[Ve],p[Mi]=u||t&&t[Mi]||null,p[jt]=s,p[Yc]=OA(),p[eo]=h,p[AI]=l,p[Ut]=e.type==2?t[Ut]:p,p}function ru(t,e,n,r,i){let s=t.data[e];if(s===null)s=vR(t,e,n,r,i),cA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=iA();s.injectorIndex=o===null?-1:o.injectorIndex}return fo(s,!0),s}function vR(t,e,n,r,i){let s=BI(),o=$I(),c=o?s:s&&s.parent,u=t.data[e]=DR(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Mw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Nw(t,e,n,r,i){let s=Ar(),o=r&2;try{Er(-1),o&&e.length>gn&&Aw(t,e,gn,!1),Gt(o?2:0,i),n(r,i)}finally{Er(s),Gt(o?3:1,i)}}function xw(t,e,n){if(MI(e)){let r=de(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{de(r)}}}function Pw(t,e,n){LI()&&(MR(t,e,n,Dt(n,e)),(n.flags&64)===64&&Lw(t,e,n))}function Ow(t,e,n=Dt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function kw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=bf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function bf(t,e,n,r,i,s,o,c,u,l,h){let p=gn+r,m=p+i,I=_R(p,m),A=typeof l=="function"?l():l;return I[ee]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function _R(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ui);return n}function IR(t,e,n,r){let s=r.get($A,mw)||n===Kt.ShadowDom,o=t.selectRootElement(e,s);return wR(o),o}function wR(t){ER(t)}var ER=()=>null;function DR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return tA()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function B_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Ye.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?$_(r,n,l,c,u):$_(r,n,l,c)}return r}function $_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function CR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,I=m?m.inputs:null,A=m?m.outputs:null;u=B_(0,p.inputs,h,u,I),l=B_(1,p.outputs,h,l,A);let N=u!==null&&o!==null&&!ef(e)?BR(u,h,o):null;c.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function TR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bR(t,e,n,r,i,s,o,c){let u=Dt(e,n),l=e.inputs,h;!c&&l!=null&&(h=l[r])?(Sf(t,n,h,r,i),Jc(e)&&SR(n,e.index)):e.type&3?(r=TR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function SR(t,e){let n=Hn(e,t);n[H]&16||(n[H]|=64)}function Fw(t,e,n,r){if(LI()){let i=r===null?null:{"":-1},s=xR(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&Vw(t,e,n,o,i,c),i&&PR(n,r,i)}n.mergedAttrs=Zs(n.mergedAttrs,n.attrs)}function Vw(t,e,n,r,i,s){for(let l=0;l<r.length;l++)wh(Pc(n,e),t,r[l].type);kR(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,c=!1,u=Mw(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Zs(n.mergedAttrs,h.hostAttrs),FR(t,n,e,u,h),OR(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}CR(t,n,s)}function AR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;RR(o)!=c&&o.push(c),o.push(n,r,s)}}function RR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function MR(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Jc(n)&&VR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Pc(n,e),Cr(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=xi(e,t,c,n);if(Cr(l,e),o!==null&&jR(e,c-i,l,u,n,o),jn(u)){let h=Hn(n.index,e);h[rt]=xi(e,t,c,n)}}}function Lw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=lA();try{Er(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];_h(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&NR(u,l)}}finally{Er(-1),_h(o)}}function NR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function xR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(vS(e,o.selectors,!1))if(r||(r=[]),jn(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;Sh(t,e,u)}else r.unshift(o),Sh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Sh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function PR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function OR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;jn(e)&&(n[""]=t)}}function kR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function FR(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=bi(i.type,!0)),o=new Dr(s,jn(i),fe);t.blueprint[r]=o,n[r]=o,AR(t,e,r,Mw(t,n,i.hostVars,Ui),i)}function VR(t,e,n){let r=Dt(e,t),i=kw(n),s=t[Lt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=iu(t,nu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function LR(t,e,n,r,i,s){let o=Dt(t,e);UR(e[Ve],o,s,t.value,n,r,i)}function UR(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?Gc(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function jR(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],h=o[c++],p=o[c++];Rw(r,n,u,l,h,p)}}function BR(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function Uw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function jw(t,e){let n=t.contentQueries;if(n!==null){let r=de(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];HI(s),c.contentQueries(2,e[o],o)}}}finally{de(r)}}}function iu(t,e){return t[no]?t[M_][Vt]=e:t[no]=e,t[M_]=e,e}function Ah(t,e,n){HI(0);let r=de(null);try{e(t,n)}finally{de(r)}}function $R(t){return t[to]||(t[to]=[])}function HR(t){return t.cleanup||(t.cleanup=[])}function Bw(t,e){let n=t[Mi],r=n?n.get(mn,null):null;r&&r.handleError(e)}function Sf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],h=t.data[o];Rw(h,l,r,c,u,i)}}function qR(t,e,n){let r=kI(e,t);JA(t[Ve],r,n)}function zR(t,e){let n=Hn(e,t),r=n[ee];GR(r,n);let i=n[_n];i!==null&&n[eo]===null&&(n[eo]=If(i,n[Mi])),Af(r,n,n[rt])}function GR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Af(t,e,n){uf(e);try{let r=t.viewQuery;r!==null&&Ah(1,r,n);let i=t.template;i!==null&&Nw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ni]?.finishViewCreation(t),t.staticContentQueries&&jw(t,e),t.staticViewQueries&&Ah(2,t.viewQuery,n);let s=t.components;s!==null&&WR(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,lf()}}function WR(t,e){for(let n=0;n<e.length;n++)zR(t,e[n])}function $w(t,e,n,r){let i=de(null);try{let s=e.tView,c=t[H]&4096?4096:16,u=nu(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Qc]=l;let h=t[Ni];return h!==null&&(u[Ni]=h.createEmbeddedView(s)),Af(s,u,n),u}finally{de(i)}}function KR(t,e){let n=it+e;if(n<t.length)return t[n]}function Fc(t,e){return!e||e.firstChild===null||lw(t)}function Rf(t,e,n,r=!0){let i=e[ee];if(tR(i,e,t,n),r){let o=bh(n,t),c=e[Ve],u=Df(c,t[wr]);u!==null&&XA(i,t[jt],c,e,u,o)}let s=e[eo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function QR(t,e){let n=so(t,e);return n!==void 0&&eu(n[ee],n),n}function Vc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Qt(s)),In(s)&&YR(s,r);let o=n.type;if(o&8)Vc(t,e,n.child,r);else if(o&32){let c=Ef(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=Tw(e,n);if(Array.isArray(c))r.push(...c);else{let u=io(e[Ut]);Vc(u[ee],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function YR(t,e){for(let n=it;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Vc(r[ee],r,i,e)}t[wr]!==t[_n]&&e.push(t[wr])}var Hw=[];function JR(t){return t[Ir]??ZR(t)}function ZR(t){let e=Hw.pop()??Object.create(eM);return e.lView=t,e}function XR(t){t.lView[Ir]!==t&&(t.lView=null,Hw.push(t))}var eM=ye(F({},zv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ro(t.lView)},consumerOnSignalRead(){this.lView[Ir]=this}}),qw=100;function zw(t,e=!0,n=0){let r=t[Lt],i=r.rendererFactory,s=!1;s||i.begin?.();try{tM(t,n)}catch(o){throw e&&Bw(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function tM(t,e){Rh(t,e);let n=0;for(;cf(t);){if(n===qw)throw new j(103,!1);n++,Rh(t,1)}}function nM(t,e,n,r){let i=e[H];if((i&256)===256)return;let s=!1;!s&&e[Lt].inlineEffectRunner?.flush(),uf(e);let o=null,c=null;!s&&rM(t)&&(c=JR(e),o=Gv(c));try{FI(e),oA(t.bindingStartIndex),n!==null&&Nw(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Ic(e,p,null)}else{let p=t.preOrderHooks;p!==null&&wc(e,p,0,null),Jd(e,0)}if(iM(e),Gw(e,0),t.contentQueries!==null&&jw(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Ic(e,p)}else{let p=t.contentHooks;p!==null&&wc(e,p,1),Jd(e,1)}yR(t,e);let l=t.components;l!==null&&Kw(e,l,0);let h=t.viewQuery;if(h!==null&&Ah(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Ic(e,p)}else{let p=t.viewHooks;p!==null&&wc(e,p,2),Jd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Yd]){for(let p of e[Yd])p();e[Yd]=null}s||(e[H]&=-73)}catch(u){throw ro(e),u}finally{c!==null&&(Wv(c,o),XR(c)),lf()}}function rM(t){return t.type!==2}function Gw(t,e){for(let n=hw(t);n!==null;n=fw(n))for(let r=it;r<n.length;r++){let i=n[r];Ww(i,e)}}function iM(t){for(let e=hw(t);e!==null;e=fw(e)){if(!(e[H]&rf.HasTransplantedViews))continue;let n=e[Rc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Je];QS(i)}}}function sM(t,e,n){let r=Hn(e,t);Ww(r,n)}function Ww(t,e){af(t)&&Rh(t,e)}function Rh(t,e){let r=t[ee],i=t[H],s=t[Ir],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Cd(s)),s&&(s.dirty=!1),t[H]&=-9217,o)nM(r,t,r.template,t[rt]);else if(i&8192){Gw(t,1);let c=r.components;c!==null&&Kw(t,c,1)}}function Kw(t,e,n){for(let r=0;r<e.length;r++)sM(t,e[r],n)}function Mf(t){for(t[Lt].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=io(t);if(jS(t)&&!e)return t;t=e}return null}var Pi=class{get rootNodes(){let e=this._lView,n=e[ee];return Vc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rt]}set context(e){this._lView[rt]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(In(e)){let n=e[Ac],r=n?n.indexOf(this):-1;r>-1&&(so(e,r),bc(n,r))}this._attachedToViewContainer=!1}eu(this._lView[ee],this._lView)}onDestroy(e){VI(this._lView,e)}markForCheck(){Mf(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){vh(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,zw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Ew(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e,vh(this._lView)}};var JH=new RegExp(`^(\\d+)*(${jA}|${UA})*(.*)`);var oM=()=>null;function Lc(t,e){return oM(t,e)}var Mh=class{},Nh=class{},Uc=class{};function aM(t){let e=Error(`No component factory found for ${at(t)}.`);return e[cM]=t,e}var cM="ngComponent";var xh=class{resolveComponentFactory(e){throw aM(e)}},su=(()=>{let e=class e{};e.NULL=new xh;let t=e;return t})(),oo=class{},Mr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>uM();let t=e;return t})();function uM(){let t=De(),e=pt(),n=Hn(e.index,t);return(yr(n)?n:t)[Ve]}var lM=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),nh={};var H_=new Set;function Nf(t){H_.has(t)||(H_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function q_(...t){}function dM(){let t=typeof mr.requestAnimationFrame=="function",e=mr[t?"requestAnimationFrame":"setTimeout"],n=mr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=dM().nativeRequestAnimationFrame,pM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,hM,q_,q_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},hM={};function xf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fM(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ph(t),t.isCheckStableRunning=!0,xf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ph(t))}function pM(t){let e=()=>{fM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(gM(c))return n.invokeTask(i,s,o,c);try{return z_(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),G_(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return z_(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),G_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ph(t),xf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ph(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function z_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function G_(t){t._nesting--,xf(t)}function gM(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Qw=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Oh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=I_(i,c);else if(s==2){let u=c,l=e[++o];r=I_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var jc=class extends su{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=_r(e);return new ao(n,this.ngModule)}};function W_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function mM(t){let e=t.toLowerCase();return e==="svg"?qS:e==="math"?zS:null}var kh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wc(r);let i=this.injector.get(e,nh,r);return i!==nh||n===nh?i:this.parentInjector.get(e,n,r)}},ao=class extends Uc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=W_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return W_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ES(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=de(null);try{i=i||this.ngModule;let o=i instanceof wt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new kh(e,o):e,u=c.get(oo,null);if(u===null)throw new j(407,!1);let l=c.get(lM,null),h=c.get(Qw,null),p=c.get(Mh,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},I=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=r?IR(I,r,this.componentDef.encapsulation,c):ww(I,A,mM(A)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let O=null;N!==null&&(O=If(N,c,!0));let z=bf(0,null,null,1,0,null,null,null,null,null,null),B=nu(null,z,null,M,null,null,m,I,c,null,O);uf(B);let ae,Te;try{let J=this.componentDef,E,y=null;J.findHostDirectiveDefs?(E=[],y=new Map,J.findHostDirectiveDefs(J,E,y),E.push(J)):E=[J];let v=yM(B,N),w=vM(v,N,J,E,B,m,I);Te=of(z,gn),N&&wM(I,J,N,r),n!==void 0&&EM(Te,this.ngContentSelectors,n),ae=IM(w,J,E,y,B,[DM]),Af(z,B,null)}finally{lf()}return new Fh(this.componentType,ae,mf(Te,B),B,Te)}finally{de(s)}}},Fh=class extends Nh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Pi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Sf(s[ee],s,i,e,n),this.previousInputValues.set(e,n);let o=Hn(this._tNode.index,s);Mf(o)}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yM(t,e){let n=t[ee],r=gn;return t[r]=e,ru(n,r,2,"#host",null)}function vM(t,e,n,r,i,s,o){let c=i[ee];_M(r,t,e,o);let u=null;e!==null&&(u=If(e,i[Mi]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=nu(i,kw(n),null,h,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&Sh(c,t,r.length-1),iu(i,p),i[t.index]=p}function _M(t,e,n,r){for(let i of t)e.mergedAttrs=Zs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Oh(e,e.mergedAttrs,!0),n!==null&&Sw(r,n,e))}function IM(t,e,n,r,i,s){let o=pt(),c=i[ee],u=Dt(o,i);Vw(c,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=xi(i,c,p,o);Cr(m,i)}Lw(c,i,o),u&&Cr(u,i);let l=xi(i,c,o.directiveStart+o.componentOffset,o);if(t[rt]=i[rt]=l,s!==null)for(let h of s)h(l,e);return xw(c,o,i),l}function wM(t,e,n,r){if(r)fh(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=DS(e.selectors[0]);i&&fh(t,n,i),s&&s.length>0&&bw(t,n,s.join(" "))}}function EM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function DM(){let t=pt();ff(De()[ee],t)}var ou=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CM;let t=e;return t})();function CM(){let t=pt();return bM(t,De())}var TM=ou,Yw=class extends TM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){let e=pf(this._hostTNode,this._hostLView);if(ZI(e)){let n=xc(e,this._hostLView),r=Nc(e),i=n[ee].data[r+8];return new vr(i,n)}else return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=K_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-it}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Lc(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,Fc(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!US(e),c;if(o)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new ao(_r(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(wt,null);N&&(s=N)}let h=_r(u.componentType??{}),p=Lc(this._lContainer,h?.id??null),m=p?.firstChild??null,I=u.create(l,i,m,s);return this.insertImpl(I.hostView,c,Fc(this._hostTNode,p)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(KS(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Je],l=new Yw(u,u[jt],u[Je]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Rf(o,i,s,r),e.attachToViewContainerRef(),hI(rh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=K_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=so(this._lContainer,n);r&&(bc(rh(this._lContainer),n),eu(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=so(this._lContainer,n);return r&&bc(rh(this._lContainer),n)!=null?new Pi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function K_(t){return t[Ac]}function rh(t){return t[Ac]||(t[Ac]=[])}function bM(t,e){let n,r=e[t.index];return In(r)?n=r:(n=Uw(r,e,null,t),e[t.index]=n,iu(e,n)),AM(n,e,t,r),new Yw(n,t,e)}function SM(t,e){let n=t[Ve],r=n.createComment(""),i=Dt(e,t),s=Df(n,i);return kc(n,s,r,cR(n,i),!1),r}var AM=NM,RM=()=>!1;function MM(t,e,n){return RM(t,e,n)}function NM(t,e,n,r){if(t[wr])return;let i;n.type&8?i=Qt(r):i=SM(e,n),t[wr]=i}function xM(t){return typeof t=="function"&&t[Dd]!==void 0}function Jw(t){return xM(t)&&typeof t.set=="function"}function PM(t){return Object.getPrototypeOf(t.prototype).constructor}function Gn(t){let e=PM(t.type),n=!0,r=[t];for(;e;){let i;if(jn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=yc(t.inputs),o.inputTransforms=yc(t.inputTransforms),o.declaredInputs=yc(t.declaredInputs),o.outputs=yc(t.outputs);let c=i.hostBindings;c&&LM(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&FM(t,u),l&&VM(t,l),OM(t,i),H0(t.outputs,i.outputs),jn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===Gn&&(n=!1)}}e=Object.getPrototypeOf(e)}kM(r)}function OM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function kM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zs(i.hostAttrs,n=Zs(n,i.hostAttrs))}}function yc(t){return t===Si?{}:t===It?[]:t}function FM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function VM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function LM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Pf(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Bn=class{},co=class{};var Vh=class extends Bn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jc(this);let i=wI(e);this._bootstrapComponents=Iw(i.bootstrap),this._r3Injector=aw(e,n,[{provide:Bn,useValue:this},{provide:su,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Lh=class extends co{constructor(e){super(),this.moduleType=e}create(e){return new Vh(this.moduleType,e,[])}};var Bc=class extends Bn{constructor(e){super(),this.componentFactoryResolver=new jc(this),this.instance=null;let n=new Xs([...e.providers,{provide:Bn,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],e.parent||nf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Of(t,e,n=null){return new Bc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var au=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Be(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function UM(t){return(t.flags&32)===32}function jM(t,e,n,r,i,s,o,c,u){let l=e.consts,h=ru(e,t,4,o||null,Mc(l,c));Fw(e,n,h,Mc(l,u)),ff(e,h);let p=h.tView=bf(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Uh(t,e,n,r,i,s,o,c){let u=De(),l=Ct(),h=t+gn,p=l.firstCreatePass?jM(h,l,u,e,n,r,i,s,o):l.data[h];fo(p,!1);let m=BM(l,u,p,t);df()&&Cf(l,u,m,p),Cr(m,u);let I=Uw(m,u,m,p);return u[h]=I,iu(u,I),MM(I,p,u),sf(p)&&Pw(l,u,p),o!=null&&Ow(u,p,c),Uh}var BM=$M;function $M(t,e,n,r){return hf(!0),e[Ve].createComment("")}function cu(t,e,n,r){let i=De(),s=Zc();if(mo(i,s,e)){let o=Ct(),c=QI();LR(c,i,t,e,n,r)}return cu}function HM(t,e,n,r){return mo(t,Zc(),n)?e+Gc(n)+r:Ui}function vc(t,e){return t<<17|e<<2}function Tr(t){return t>>17&32767}function qM(t){return(t&2)==2}function zM(t,e){return t&131071|e<<17}function jh(t){return t|2}function Oi(t){return(t&131068)>>2}function ih(t,e){return t&-131069|e<<2}function GM(t){return(t&1)===1}function Bh(t){return t|1}function WM(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Tr(o),u=Oi(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ho(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Tr(t[c+1]);t[r+1]=vc(m,c),m!==0&&(t[m+1]=ih(t[m+1],r)),t[c+1]=zM(t[c+1],r)}else t[r+1]=vc(c,0),c!==0&&(t[c+1]=ih(t[c+1],r)),c=r;else t[r+1]=vc(u,0),c===0?c=r:t[u+1]=ih(t[u+1],r),u=r;l&&(t[r+1]=jh(t[r+1])),Q_(t,h,r,!0),Q_(t,h,r,!1),KM(e,h,t,r,s),o=vc(c,u),s?e.classBindings=o:e.styleBindings=o}function KM(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ho(s,e)>=0&&(n[r+1]=Bh(n[r+1]))}function Q_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Tr(i):Oi(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],l=t[o+1];QM(u,e)&&(c=!0,t[o+1]=r?Bh(l):jh(l)),o=r?Tr(l):Oi(l)}c&&(t[n+1]=r?jh(i):Bh(i))}function QM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ho(t,e)>=0:!1}function Y_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Sf(t,n,s[o],o,r)}function uu(t,e){return YM(t,e,null,!0),uu}function YM(t,e,n,r){let i=De(),s=Ct(),o=aA(2);if(s.firstUpdatePass&&ZM(s,t,o,r),e!==Ui&&mo(i,o,e)){let c=s.data[Ar()];rN(s,c,i,i[Ve],t,i[o+1]=iN(e,n),r,o)}}function JM(t,e){return e>=t.expandoStartIndex}function ZM(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ar()],o=JM(t,n);sN(s,r)&&e===null&&!o&&(e=!1),e=XM(i,s,e,r),WM(i,s,e,n,o,r)}}function XM(t,e,n,r){let i=dA(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sh(null,t,e,n,r),n=uo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=sh(i,t,e,n,r),s===null){let u=eN(t,e,r);u!==void 0&&Array.isArray(u)&&(u=sh(null,t,e,u[1],r),u=uo(u,e.attrs,r),tN(t,e,r,u))}else s=nN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function eN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Oi(r)!==0)return t[Tr(r)]}function tN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Tr(i)]=r}function nN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=uo(r,o,n)}return uo(r,e.attrs,n)}function sh(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=uo(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function uo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),lS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function rN(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=GM(l)?J_(u,e,n,i,Oi(l),o):void 0;if(!$c(h)){$c(s)||qM(l)&&(s=J_(u,null,n,i,c,o));let p=kI(Ar(),n);gR(r,o,p,i,s)}}function J_(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Ui&&(m=p?It:void 0);let I=p?Kd(m,r):h===r?m:void 0;if(l&&!$c(I)&&(I=Kd(u,r)),$c(I)&&(c=I,o))return c;let A=t[i+1];i=o?Tr(A):Oi(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=Kd(u,r))}return c}function $c(t){return t!==void 0}function iN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=at(go(t)))),t}function sN(t,e){return(t.flags&(e?8:16))!==0}var $h=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function oh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function oN(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let u=t.at(s),l=e[s],h=oh(s,u,s,l,n);if(h!==0){h<0&&t.updateValue(s,l),s++;continue}let p=t.at(o),m=e[c],I=oh(o,p,c,m,n);if(I!==0){I<0&&t.updateValue(o,m),o--,c--;continue}let A=n(s,u),N=n(o,p),M=n(s,l);if(Object.is(M,N)){let O=n(c,m);Object.is(O,A)?(t.swap(s,o),t.updateValue(o,m),c--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new Hc,i??=X_(t,s,o,n),Hh(t,r,s,M))t.updateValue(s,l),s++,o++;else if(i.has(M))r.set(A,t.detach(s)),o--;else{let O=t.create(s,e[s]);t.attach(s,O),s++,o++}}for(;s<=c;)Z_(t,r,n,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&s<=o;){let l=t.at(s),h=u.value,p=oh(s,l,s,h,n);if(p!==0)p<0&&t.updateValue(s,h),s++,u=c.next();else{r??=new Hc,i??=X_(t,s,o,n);let m=n(s,h);if(Hh(t,r,s,m))t.updateValue(s,h),s++,o++,u=c.next();else if(!i.has(m))t.attach(s,t.create(s,h)),s++,o++,u=c.next();else{let I=n(s,l);r.set(I,t.detach(s)),o--}}}for(;!u.done;)Z_(t,r,n,t.length,u.value),u=c.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(c=>{t.destroy(c)})}function Hh(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Z_(t,e,n,r,i){if(Hh(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function X_(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var Hc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var qh=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-it}};var zh=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Zw(t,e,n,r,i,s,o,c,u,l,h,p,m){Nf("NgControlFlow");let I=u!==void 0,A=De(),N=c?o.bind(A[Ut][rt]):o,M=new zh(I,N);A[gn+t]=M,Uh(t+1,e,n,r,i,s),I&&Uh(t+2,u,l,h,p,m)}var Gh=class extends $h{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-it}at(e){return this.getLView(e)[rt].$implicit}attach(e,n){let r=n[eo];this.needsIndexUpdate||=e!==this.length,Rf(this.lContainer,n,e,Fc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,aN(this.lContainer,e)}create(e,n){let r=Lc(this.lContainer,this.templateTNode.tView.ssrId);return $w(this.hostLView,this.templateTNode,new qh(this.lContainer,n,e),{dehydratedView:r})}destroy(e){eu(e[ee],e)}updateValue(e,n){this.getLView(e)[rt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[rt].$index=e}getLView(e){return cN(this.lContainer,e)}};function Xw(t){let e=de(null),n=Ar();try{let r=De(),i=r[ee],s=r[n];if(s.liveCollection===void 0){let c=n+1,u=eI(r,c),l=tI(i,c);s.liveCollection=new Gh(u,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(oN(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let c=Zc(),u=o.length===0;if(mo(r,c,u)){let l=n+2,h=eI(r,l);if(u){let p=tI(i,l),m=Lc(h,p.tView.ssrId),I=$w(r,p,void 0,{dehydratedView:m});Rf(h,I,0,Fc(p,m))}else QR(h,0)}}}finally{de(e)}}function eI(t,e){return t[e]}function aN(t,e){return so(t,e)}function cN(t,e){return KR(t,e)}function tI(t,e){return of(t,e)}function uN(t,e,n,r,i,s){let o=e.consts,c=Mc(o,i),u=ru(e,t,2,r,c);return Fw(e,n,u,Mc(o,s)),u.attrs!==null&&Oh(u,u.attrs,!1),u.mergedAttrs!==null&&Oh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ct(t,e,n,r){let i=De(),s=Ct(),o=gn+t,c=i[Ve],u=s.firstCreatePass?uN(o,s,i,e,n,r):s.data[o],l=lN(s,i,u,c,e,t);i[o]=l;let h=sf(u);return fo(u,!0),Sw(c,l,u),!UM(u)&&df()&&Cf(s,i,l,u),ZS()===0&&Cr(l,i),XS(),h&&(Pw(s,i,u),xw(s,u,i)),r!==null&&Ow(i,u),ct}function ut(){let t=pt();$I()?sA():(t=t.parent,fo(t,!1));let e=t;nA(e)&&rA(),eA();let n=Ct();return n.firstCreatePass&&(ff(n,t),MI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&vA(e)&&Y_(n,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_A(e)&&Y_(n,e,De(),e.stylesWithoutHost,!1),ut}function Nr(t,e,n,r){return ct(t,e,n,r),ut(),Nr}var lN=(t,e,n,r,i,s)=>(hf(!0),ww(r,i,pA()));function eE(){return De()}var qc="en-US";var dN=qc;function hN(t){typeof t=="string"&&(dN=t.toLowerCase().replace(/_/g,"-"))}function Zt(t,e,n,r){let i=De(),s=Ct(),o=pt();return tE(s,i,i[Ve],o,t,e,r),Zt}function fN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[to],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function tE(t,e,n,r,i,s,o){let c=sf(r),l=t.firstCreatePass&&HR(t),h=e[rt],p=$R(e),m=!0;if(r.type&3||o){let N=Dt(r,e),M=o?o(N):N,O=p.length,z=o?ae=>o(Qt(ae[r.index])):r.index,B=null;if(!o&&c&&(B=fN(t,e,i,r.index)),B!==null){let ae=B.__ngLastListenerFn__||B;ae.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,m=!1}else{s=rI(r,e,h,s,!1);let ae=n.listen(M,i,s);p.push(s,ae),l&&l.push(i,z,O,O+1)}}else s=rI(r,e,h,s,!1);let I=r.outputs,A;if(m&&I!==null&&(A=I[i])){let N=A.length;if(N)for(let M=0;M<N;M+=2){let O=A[M],z=A[M+1],Te=e[O][z].subscribe(s),J=p.length;p.push(s,Te),l&&l.push(i,r.index,J,-(J+1))}}}function nI(t,e,n,r){let i=de(null);try{return Gt(6,e,n),n(r)!==!1}catch(s){return Bw(t,s),!1}finally{Gt(7,e,n),de(i)}}function rI(t,e,n,r,i){return function s(o){if(o===Function)return r;let c=t.componentOffset>-1?Hn(t.index,e):e;Mf(c);let u=nI(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=nI(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function nE(t=1){return fA(t)}function wn(t,e=""){let n=De(),r=Ct(),i=t+gn,s=r.firstCreatePass?ru(r,i,1,e,null):r.data[i],o=pN(r,n,s,e,t);n[i]=o,df()&&Cf(r,n,o,s),fo(s,!1)}var pN=(t,e,n,r,i)=>(hf(!0),YA(e[Ve],r));function lu(t){return rE("",t,""),lu}function rE(t,e,n){let r=De(),i=HM(r,t,e,n);return i!==Ui&&qR(r,Ar(),i),rE}function du(t,e,n){Jw(e)&&(e=e());let r=De(),i=Zc();if(mo(r,i,e)){let s=Ct(),o=QI();bR(s,o,r,t,e,r[Ve],n,!1)}return du}function kf(t,e){let n=Jw(t);return n&&t.set(e),n}function hu(t,e){let n=De(),r=Ct(),i=pt();return tE(r,n,n[Ve],i,t,e),hu}function gN(t,e,n){let r=Ct();if(r.firstCreatePass){let i=jn(t);Wh(n,r.data,r.blueprint,i,!0),Wh(e,r.data,r.blueprint,i,!1)}}function Wh(t,e,n,r,i){if(t=nt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Wh(t[s],e,n,r,i);else{let s=Ct(),o=De(),c=pt(),u=Ri(t)?t:nt(t.provide),l=SI(t),h=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Ri(t)||!t.multi){let I=new Dr(l,i,fe),A=ch(u,e,i?h:h+m,p);A===-1?(wh(Pc(c,o),s,u),ah(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(I),o.push(I)):(n[A]=I,o[A]=I)}else{let I=ch(u,e,h+m,p),A=ch(u,e,h,h+m),N=I>=0&&n[I],M=A>=0&&n[A];if(i&&!M||!i&&!N){wh(Pc(c,o),s,u);let O=vN(i?yN:mN,n.length,i,r,l);!i&&M&&(n[A].providerFactory=O),ah(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=iE(n[i?A:I],l,!i&&r);ah(s,t,I>-1?I:A,O)}!i&&r&&M&&n[A].componentProviders++}}}function ah(t,e,n,r){let i=Ri(e),s=NS(e);if(i||s){let u=(s?nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function iE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ch(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function mN(t,e,n,r){return Kh(this.multi,[])}function yN(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=xi(n,n[ee],this.providerFactory.index,r);s=c.slice(0,o),Kh(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],Kh(i,s);return s}function Kh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vN(t,e,n,r,i){let s=new Dr(t,n,fe);return s.multi=[],s.index=e,s.componentProviders=0,iE(s,i,r&&!n),s}function fu(t,e=[]){return n=>{n.providersResolver=(r,i)=>gN(r,i?i(t):t,e)}}var _N=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=CI(!1,r.type),s=i.length>0?Of([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=q({token:e,providedIn:"environment",factory:()=>new e(te(wt))});let t=e;return t})();function Tt(t){Nf("NgStandalone"),t.getStandaloneInjector=e=>e.get(_N).getOrCreateStandaloneInjector(t)}var vn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sE=new vn("17.3.10"),pu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var oE=new G("");function xr(t){return!!t&&typeof t.then=="function"}function aE(t){return!!t&&typeof t.subscribe=="function"}var cE=new G(""),uE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=L(cE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(xr(o))r.push(o);else if(aE(o)){let c=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(c)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ff=new G("");function IN(){Qv(()=>{throw new j(600,!1)})}function wN(t){return t.isBoundToModule}function EN(t,e,n){try{let r=n();return xr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var yo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(cw),this.afterRenderEffectManager=L(Qw),this.externalTestViews=new Set,this.beforeRender=new Ke,this.afterTick=new Ke,this.componentTypes=[],this.components=[],this.isStable=L(au).hasPendingTasks.pipe(re(r=>!r)),this._injector=L(wt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Uc;if(!this._injector.get(uE).done){let I=!s&&II(r),A=!1;throw new j(405,A)}let c;s?c=r:c=this._injector.get(su).resolveComponentFactory(r),this.componentTypes.push(c.componentType);let u=wN(c)?void 0:this._injector.get(Bn),l=i||c.selector,h=c.create(Jt.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(oE,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),uh(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=de(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,de(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===qw)throw new j(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:c,notifyErrorHandler:u}of this._views)DN(c,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Qh(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Qh(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;uh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ff,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>uh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DN(t,e,n){!e&&!Qh(t)||CN(t,n,e)}function Qh(t){return cf(t)}function CN(t,e,n){let r;n?(r=0,t[H]|=1024):t[H]&64?r=0:r=1,zw(t,e,r)}var Yh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vf=(()=>{let e=class e{compileModuleSync(r){return new Lh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=wI(r),o=Iw(s.declarations).reduce((c,u)=>{let l=_r(u);return l&&c.push(new ao(l)),c},[]);return new Yh(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var TN=(()=>{let e=class e{constructor(){this.zone=L(Ie),this.applicationRef=L(yo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bN(t){return[{provide:Ie,useFactory:t},{provide:Ai,multi:!0,useFactory:()=>{let e=L(TN,{optional:!0});return()=>e.initialize()}},{provide:Ai,multi:!0,useFactory:()=>{let e=L(MN);return()=>{e.initialize()}}},{provide:cw,useFactory:SN}]}function SN(){let t=L(Ie),e=L(mn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function AN(t){let e=bN(()=>new Ie(RN(t)));return $n([[],e])}function RN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var MN=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=L(Ie),this.pendingTasks=L(au)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NN(){return typeof $localize<"u"&&$localize.locale||qc}var Lf=new G("",{providedIn:"root",factory:()=>L(Lf,X.Optional|X.SkipSelf)||NN()});var lE=new G("");var Dc=null;function xN(t=[],e){return Jt.create({name:e,providers:[{provide:Kc,useValue:"platform"},{provide:lE,useValue:new Set([()=>Dc=null])},...t]})}function PN(t=[]){if(Dc)return Dc;let e=xN(t);return Dc=e,IN(),ON(e),e}function ON(t){t.get(vf,null)?.forEach(n=>n())}var Pr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kN;let t=e;return t})();function kN(t){return FN(pt(),De(),(t&16)===16)}function FN(t,e,n){if(Jc(t)&&!n){let r=Hn(t.index,e);return new Pi(r,r)}else if(t.type&47){let r=e[Ut];return new Pi(r,e)}return null}function dE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=PN(r),s=[AN(),...n||[]],c=new Bc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(Ie);return u.run(()=>{c.resolveInjectorInitializers();let l=c.get(mn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:I=>{l.handleError(I)}})});let p=()=>c.destroy(),m=i.get(lE);return m.add(p),c.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),EN(l,u,()=>{let I=c.get(uE);return I.runInitializers(),I.donePromise.then(()=>{let A=c.get(Lf,qc);hN(A||qc);let N=c.get(yo);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function Or(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var pE=null;function En(){return pE}function gE(t){pE??=t}var gu=class{};var bt=new G(""),mE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(VN),providedIn:"platform"});let t=e;return t})();var VN=(()=>{let e=class e extends mE{constructor(){super(),this._doc=L(bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return En().getBaseHref(this._doc)}onPopState(r){let i=En().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=En().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function yE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function hE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function kr(t){return t&&t[0]!=="?"?"?"+t:t}var ji=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(vE),providedIn:"root"});let t=e;return t})(),LN=new G(""),vE=(()=>{let e=class e extends ji{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return yE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+kr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let c=this.prepareExternalUrl(s+kr(o));this._platformLocation.pushState(r,i,c)}replaceState(r,i,s,o){let c=this.prepareExternalUrl(s+kr(o));this._platformLocation.replaceState(r,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(te(mE),te(LN,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vo=(()=>{let e=class e{constructor(r){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=BN(hE(fE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+kr(i))}normalize(r){return e.stripTrailingSlash(jN(this._basePath,fE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+kr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+kr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=kr,e.joinWithSlash=yE,e.stripTrailingSlash=hE,e.\u0275fac=function(i){return new(i||e)(te(ji))},e.\u0275prov=q({token:e,factory:()=>UN(),providedIn:"root"});let t=e;return t})();function UN(){return new vo(te(ji))}function jN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function fE(t){return t.replace(/\/index.html$/,"")}function BN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function _E(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var IE="browser",$N="server";function Uf(t){return t===$N}var mu=class{};var $f=class extends gu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Hf=class t extends $f{static makeCurrent(){gE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qN();return n==null?null:zN(n)}resetBaseElement(){_o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _E(document.cookie,e)}},_o=null;function qN(){return _o=_o||document.querySelector("base"),_o?_o.getAttribute("href"):null}function zN(t){return new URL(t,document.baseURI).pathname}var GN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),qf=new G(""),CE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(te(qf),te(Ie))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),yu=class{constructor(e){this._doc=e}},jf="ng-app-id",TE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${jf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(jf),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(jf,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,c=o.get(i)?.elements;c?c.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(te(bt),te(yf),te(_f,8),te(zn))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Bf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gf=/%COMP%/g,bE="%COMP%",WN=`_nghost-${bE}`,KN=`_ngcontent-${bE}`,QN=!0,YN=new G("",{providedIn:"root",factory:()=>QN});function JN(t){return KN.replace(Gf,t)}function ZN(t){return WN.replace(Gf,t)}function SE(t,e){return e.map(n=>n.replace(Gf,t))}var wE=(()=>{let e=class e{constructor(r,i,s,o,c,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Uf(u),this.defaultRenderer=new Io(r,c,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kt.ShadowDom&&(i=ye(F({},i),{encapsulation:Kt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof vu?s.applyToHost(r):s instanceof wo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let c=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Kt.Emulated:o=new vu(l,h,i,this.appId,p,c,u,m);break;case Kt.ShadowDom:return new zf(l,h,r,i,c,u,this.nonce,m);default:o=new wo(l,h,i,p,c,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(te(CE),te(TE),te(yf),te(YN),te(bt),te(zn),te(Ie),te(_f))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Io=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Bf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(EE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(EE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Bf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Bf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(yn.DashCase|yn.Important)?e.style.setProperty(n,r,i&yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=En().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function EE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var zf=class extends Io{constructor(e,n,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=SE(i.id,i.styles);for(let h of l){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wo=class extends Io{constructor(e,n,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?SE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},vu=class extends wo{constructor(e,n,r,i,s,o,c,u){let l=i+"-"+r.id;super(e,n,r,s,o,c,u,l),this.contentAttr=JN(l),this.hostAttr=ZN(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},XN=(()=>{let e=class e extends yu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(te(bt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),DE=["alt","control","meta","shift"],ex={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tx={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},nx=(()=>{let e=class e extends yu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>En().onAndCancel(r,o.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),c="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),c="code."),DE.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),c+=h+".")}),c+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=c,l}static matchEventFullKeyCode(r,i){let s=ex[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),DE.forEach(c=>{if(c!==s){let u=tx[c];u(r)&&(o+=c+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(te(bt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function AE(t,e){return dE(F({rootComponent:t},rx(e)))}function rx(t){return{appProviders:[...cx,...t?.providers??[]],platformProviders:ax}}function ix(){Hf.makeCurrent()}function sx(){return new mn}function ox(){return gw(document),document}var ax=[{provide:zn,useValue:IE},{provide:vf,useValue:ix,multi:!0},{provide:bt,useFactory:ox,deps:[]}];var cx=[{provide:Kc,useValue:"root"},{provide:mn,useFactory:sx,deps:[]},{provide:qf,useClass:XN,multi:!0,deps:[bt,Ie,zn]},{provide:qf,useClass:nx,multi:!0,deps:[bt]},wE,TE,CE,{provide:oo,useExisting:wE},{provide:mu,useClass:GN,deps:[]},[]];var RE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(te(bt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Z="primary",Fo=Symbol("RouteTitle"),Jf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zi(t){return new Jf(t)}function lx(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=t[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xt(t[n],e[n]))return!1;return!0}function Xt(t,e){let n=t?Zf(t):void 0,r=e?Zf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!kE(t[i],e[i]))return!1;return!0}function Zf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function kE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function FE(t){return t.length>0?t[t.length-1]:null}function Yn(t){return jd(t)?t:xr(t)?Me(Promise.resolve(t)):Q(t)}var hx={exact:LE,subset:UE},VE={exact:fx,subset:px,ignored:()=>!0};function ME(t,e,n){return hx[n.paths](t.root,e.root,n.matrixParams)&&VE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function fx(t,e){return Xt(t,e)}function LE(t,e,n){if(!Vr(t.segments,e.segments)||!wu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!LE(t.children[r],e.children[r],n))return!1;return!0}function px(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kE(t[n],e[n]))}function UE(t,e,n){return jE(t,e,e.segments,n)}function jE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Vr(i,n)||e.hasChildren()||!wu(i,n,r))}else if(t.segments.length===n.length){if(!Vr(t.segments,n)||!wu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!UE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Vr(t.segments,i)||!wu(t.segments,i,r)||!t.children[Z]?!1:jE(t.children[Z],e,s,r)}}function wu(t,e,n){return e.every((r,i)=>VE[n](t[i].parameters,r.parameters))}var Wn=class{constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){return yx.serialize(this)}},me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eu(this)}},Fr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zi(this.parameters),this._parameterMap}toString(){return $E(this)}};function gx(t,e){return Vr(t,e)&&t.every((n,r)=>Xt(n.parameters,e[r].parameters))}function Vr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function mx(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var Cp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>new Cu,providedIn:"root"});let t=e;return t})(),Cu=class{parse(e){let n=new ep(e);return new Wn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Eo(e.root,!0)}`,r=Ix(e.queryParams),i=typeof e.fragment=="string"?`#${vx(e.fragment)}`:"";return`${n}${r}${i}`}},yx=new Cu;function Eu(t){return t.segments.map(e=>$E(e)).join("/")}function Eo(t,e){if(!t.hasChildren())return Eu(t);if(e){let n=t.children[Z]?Eo(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Z&&r.push(`${i}:${Eo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=mx(t,(r,i)=>i===Z?[Eo(t.children[Z],!1)]:[`${i}:${Eo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${Eu(t)}/${n[0]}`:`${Eu(t)}/(${n.join("//")})`}}function BE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _u(t){return BE(t).replace(/%3B/gi,";")}function vx(t){return encodeURI(t)}function Xf(t){return BE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Du(t){return decodeURIComponent(t)}function NE(t){return Du(t.replace(/\+/g,"%20"))}function $E(t){return`${Xf(t.path)}${_x(t.parameters)}`}function _x(t){return Object.entries(t).map(([e,n])=>`;${Xf(e)}=${Xf(n)}`).join("")}function Ix(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${_u(n)}=${_u(i)}`).join("&"):`${_u(n)}=${_u(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var wx=/^[^\/()?;#]+/;function Wf(t){let e=t.match(wx);return e?e[0]:""}var Ex=/^[^\/()?;=#]+/;function Dx(t){let e=t.match(Ex);return e?e[0]:""}var Cx=/^[^=?&#]+/;function Tx(t){let e=t.match(Cx);return e?e[0]:""}var bx=/^[^&#]+/;function Sx(t){let e=t.match(bx);return e?e[0]:""}var ep=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new me(e,n)),r}parseSegment(){let e=Wf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Fr(Du(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Dx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Wf(this.remaining);i&&(r=i,this.capture(r))}e[Du(n)]=Du(r)}parseQueryParam(e){let n=Tx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Sx(this.remaining);o&&(r=o,this.capture(r))}let i=NE(n),s=NE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Z);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[Z]:new me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function HE(t){return t.segments.length>0?new me([],{[Z]:t}):t}function qE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=qE(i);if(r===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new me(t.segments,e);return Ax(n)}function Ax(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new me(t.segments.concat(e.segments),e.children)}return t}function Gi(t){return t instanceof Wn}function Rx(t,e,n=null,r=null){let i=zE(t);return GE(i,e,n,r)}function zE(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let c=new me(s.url,o);return s===t&&(e=c),c}let r=n(t.root),i=HE(r);return e??i}function GE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Kf(i,i,i,n,r);let s=Mx(e);if(s.toRoot())return Kf(i,i,new me([],{}),n,r);let o=Nx(s,i,t),c=o.processChildren?To(o.segmentGroup,o.index,s.commands):KE(o.segmentGroup,o.index,s.commands);return Kf(i,o.segmentGroup,c,n,r)}function Tu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ao(t){return typeof t=="object"&&t!=null&&t.outlets}function Kf(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=WE(t,e,n);let c=HE(qE(o));return new Wn(c,s,i)}function WE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=WE(s,e,n)}),new me(t.segments,r)}var bu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Tu(r[0]))throw new j(4003,!1);let i=r.find(Ao);if(i&&i!==FE(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Mx(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new bu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new bu(n,e,r)}var Hi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Nx(t,e,n){if(t.isAbsolute)return new Hi(e,!0,0);if(!n)return new Hi(e,!1,NaN);if(n.parent===null)return new Hi(n,!0,0);let r=Tu(t.commands[0])?0:1,i=n.segments.length-1+r;return xx(n,i,t.numberOfDoubleDots)}function xx(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Hi(r,!1,i-s)}function Px(t){return Ao(t[0])?t[0].outlets:{[Z]:t}}function KE(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return To(t,e,n);let r=Ox(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new me(t.segments.slice(0,r.pathIndex),{});return s.children[Z]=new me(t.segments.slice(r.pathIndex),t.children),To(s,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?tp(t,e,n):r.match?To(t,0,i):tp(t,e,n)}function To(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=Px(n),i={};if(Object.keys(r).some(s=>s!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let s=To(t.children[Z],e,n);return new me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=KE(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(t.segments,i)}}function Ox(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],c=n[r];if(Ao(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!PE(u,l,o))return s;r+=2}else{if(!PE(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ao(s)){let u=kx(s.outlets);return new me(r,u)}if(i===0&&Tu(n[0])){let u=t.segments[e];r.push(new Fr(u.path,xE(n[0]))),i++;continue}let o=Ao(s)?s.outlets[Z]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&Tu(c)?(r.push(new Fr(o,xE(c))),i+=2):(r.push(new Fr(o,{})),i++)}return new me(r,{})}function kx(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=tp(new me([],{}),0,r))}),e}function xE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function PE(t,e,n){return t==n.path&&Xt(e,n.parameters)}var bo="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),St=class{constructor(e,n){this.id=e,this.url=n}},Ro=class extends St{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends St{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(mt||{}),np=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(np||{}),Qn=class extends St{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends St{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},Mo=class extends St{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Su=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rp=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ip=class extends St{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sp=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},op=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ap=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cp=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},up=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lp=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dp=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hp=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var No=class{},xo=class{constructor(e){this.url=e}};var fp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Pu,this.attachRef=null}},Pu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new fp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Au=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=pp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=pp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gp(e,this._root).map(n=>n.value)}};function pp(t,e){if(t===e.value)return e;for(let n of e.children){let r=pp(t,n);if(r)return r}return null}function gp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=gp(t,n);if(r.length)return r.unshift(e),r}return[]}var gt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function $i(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ru=class extends Au{constructor(e,n){super(e),this.snapshot=n,bp(this,e)}toString(){return this.snapshot.toString()}};function QE(t){let e=Fx(t),n=new Be([new Fr("",{})]),r=new Be({}),i=new Be({}),s=new Be({}),o=new Be(""),c=new Ur(n,r,s,o,i,Z,t,e.root);return c.snapshot=e.root,new Ru(new gt(c,[]),e)}function Fx(t){let e={},n={},r={},i="",s=new Po([],e,r,i,n,Z,t,null,{});return new Mu("",new gt(s,[]))}var Ur=class{constructor(e,n,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[Fo]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>zi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>zi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&JE(i)&&(r.resolve[Fo]=i.title),r}var Po=class{get title(){return this.data?.[Fo]}constructor(e,n,r,i,s,o,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Mu=class extends Au{constructor(e,n){super(n),this.url=e,bp(this,n)}toString(){return YE(this._root)}};function bp(t,e){e.value._routerState=t,e.children.forEach(n=>bp(t,n))}function YE(t){let e=t.children.length>0?` { ${t.children.map(YE).join(", ")} } `:"";return`${t.value}${e}`}function Qf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xt(e.params,n.params)||t.paramsSubject.next(n.params),dx(e.url,n.url)||t.urlSubject.next(n.url),Xt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mp(t,e){let n=Xt(t.params,e.params)&&gx(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||mp(t.parent,e.parent))}function JE(t){return typeof t.title=="string"||t.title===null}var Sp=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=L(Pu),this.location=L(ou),this.changeDetector=L(Pr),this.environmentInjector=L(wt),this.inputBinder=L(Ap,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new yp(r,u,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ft({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]});let t=e;return t})(),yp=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ur?this.route:e===Pu?this.childContexts:this.parent.get(e,n)}},Ap=new G("");function Vx(t,e,n){let r=Oo(t,e._root,n?n._root:void 0);return new Ru(r,e)}function Oo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Lx(t,e,n);return new gt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Oo(t,c)),o}}let r=Ux(e.value),i=e.children.map(s=>Oo(t,s));return new gt(r,i)}}function Lx(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Oo(t,r,i);return Oo(t,r)})}function Ux(t){return new Ur(new Be(t.url),new Be(t.params),new Be(t.queryParams),new Be(t.fragment),new Be(t.data),t.outlet,t.component,t)}var ZE="ngNavigationCancelingError";function XE(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eD(!1,mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function eD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ZE]=!0,n.cancellationCode=e,n}function jx(t){return tD(t)&&Gi(t.url)}function tD(t){return!!t&&t[ZE]}var Bx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Et({type:e,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,s){i&1&&Nr(0,"router-outlet")},dependencies:[Sp],encapsulation:2});let t=e;return t})();function $x(t,e){return t.providers&&!t._injector&&(t._injector=Of(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Rp(t){let e=t.children&&t.children.map(Rp),n=e?ye(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=Bx),n}function en(t){return t.outlet||Z}function Hx(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function Vo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var qx=(t,e,n,r)=>re(i=>(new vp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),vp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Qf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=$i(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=$i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=$i(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=$i(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Qf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Qf(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=Vo(i.snapshot);o.attachRef=null,o.route=i,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Nu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qi=class{constructor(e,n){this.component=e,this.route=n}};function zx(t,e,n){let r=t._root,i=e?e._root:null;return Do(r,i,n,[r.value])}function Gx(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ki(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!oI(t)?t:e.get(t):r}function Do(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=$i(e);return t.children.forEach(o=>{Wx(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>So(c,n.getContext(o),i)),i}function Wx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Kx(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Do(t,e,c?c.children:null,r,i):Do(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new qi(c.outlet.component,o))}else o&&So(e,c,i),i.canActivateChecks.push(new Nu(r)),s.component?Do(t,null,c?c.children:null,r,i):Do(t,null,n,r,i);return i}function Kx(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Vr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Vr(t.url,e.url)||!Xt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mp(t,e)||!Xt(t.queryParams,e.queryParams);case"paramsChange":default:return!mp(t,e)}}function So(t,e,n){let r=$i(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?So(o,e.children.getContext(s),n):So(o,null,n):So(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new qi(e.outlet.component,i)):n.canDeactivateChecks.push(new qi(null,i)):n.canDeactivateChecks.push(new qi(null,i))}function Lo(t){return typeof t=="function"}function Qx(t){return typeof t=="boolean"}function Yx(t){return t&&Lo(t.canLoad)}function Jx(t){return t&&Lo(t.canActivate)}function Zx(t){return t&&Lo(t.canActivateChild)}function Xx(t){return t&&Lo(t.canDeactivate)}function eP(t){return t&&Lo(t.canMatch)}function nD(t){return t instanceof fn||t?.name==="EmptyError"}var Iu=Symbol("INITIAL_VALUE");function Wi(){return kt(t=>hc(t.map(e=>e.pipe(pn(1),Gd(Iu)))).pipe(re(e=>{for(let n of e)if(n!==!0){if(n===Iu)return Iu;if(n===!1||n instanceof Wn)return n}return!0}),Ot(e=>e!==Iu),pn(1)))}function tP(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Q(ye(F({},n),{guardsResult:!0})):nP(o,r,i,t).pipe(ke(c=>c&&Qx(c)?rP(r,s,t,e):Q(c)),re(c=>ye(F({},n),{guardsResult:c})))})}function nP(t,e,n,r){return Me(t).pipe(ke(i=>cP(i.component,i.route,n,e,r)),zt(i=>i!==!0,!0))}function rP(t,e,n,r){return Me(e).pipe(_i(i=>vi(sP(i.route.parent,r),iP(i.route,r),aP(t,i.path,n),oP(t,i.route,n))),zt(i=>i!==!0,!0))}function iP(t,e){return t!==null&&e&&e(new dp(t)),Q(!0)}function sP(t,e){return t!==null&&e&&e(new up(t)),Q(!0)}function oP(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>fc(()=>{let o=Vo(e)??n,c=Ki(s,o),u=Jx(c)?c.canActivate(e,t):br(o,()=>c(e,t));return Yn(u).pipe(zt())}));return Q(i).pipe(Wi())}function aP(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Gx(o)).filter(o=>o!==null).map(o=>fc(()=>{let c=o.guards.map(u=>{let l=Vo(o.node)??n,h=Ki(u,l),p=Zx(h)?h.canActivateChild(r,t):br(l,()=>h(r,t));return Yn(p).pipe(zt())});return Q(c).pipe(Wi())}));return Q(s).pipe(Wi())}function cP(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(c=>{let u=Vo(e)??i,l=Ki(c,u),h=Xx(l)?l.canDeactivate(t,e,n,r):br(u,()=>l(t,e,n,r));return Yn(h).pipe(zt())});return Q(o).pipe(Wi())}function uP(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let c=Ki(o,t),u=Yx(c)?c.canLoad(e,n):br(t,()=>c(e,n));return Yn(u)});return Q(s).pipe(Wi(),rD(r))}function rD(t){return xd(Fe(e=>{if(Gi(e))throw XE(t,e)}),re(e=>e===!0))}function lP(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let c=Ki(o,t),u=eP(c)?c.canMatch(e,n):br(t,()=>c(e,n));return Yn(u)});return Q(s).pipe(Wi(),rD(r))}var ko=class{constructor(e){this.segmentGroup=e||null}},xu=class extends Error{constructor(e){super(),this.urlTree=e}};function Bi(t){return yi(new ko(t))}function dP(t){return yi(new j(4e3,!1))}function hP(t){return yi(eD(!1,mt.GuardRejected))}var _p=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[Z])return dP(e.redirectTo);i=i.children[Z]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new xu(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Wn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ip={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fP(t,e,n,r,i){let s=Mp(t,e,n);return s.matched?(r=$x(e,r),lP(r,e,n,i).pipe(re(o=>o===!0?s:F({},Ip)))):Q(s)}function Mp(t,e,n){if(e.path==="**")return pP(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Ip):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lx)(n,t,e);if(!i)return F({},Ip);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function pP(t){return{matched:!0,parameters:t.length>0?FE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OE(t,e,n,r){return n.length>0&&yP(t,n,r)?{segmentGroup:new me(e,mP(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&vP(t,n,r)?{segmentGroup:new me(t.segments,gP(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function gP(t,e,n,r){let i={};for(let s of n)if(Ou(t,e,s)&&!r[en(s)]){let o=new me([],{});i[en(s)]=o}return F(F({},r),i)}function mP(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&en(r)!==Z){let i=new me([],{});n[en(r)]=i}return n}function yP(t,e,n){return n.some(r=>Ou(t,e,r)&&en(r)!==Z)}function vP(t,e,n){return n.some(r=>Ou(t,e,r))}function Ou(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function _P(t,e,n,r){return en(t)!==r&&(r===Z||!Ou(e,n,t))?!1:Mp(e,t,n).matched}function IP(t,e,n){return e.length===0&&!t.children[n]}var wp=class{};function wP(t,e,n,r,i,s,o="emptyOnly"){return new Ep(t,e,n,r,i,o,s).recognize()}var EP=31,Ep=class{constructor(e,n,r,i,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new _p(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=OE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(n=>{let r=new Po([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},Z,this.rootComponentType,null,{}),i=new gt(r,n),s=new Mu("",i),o=Rx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Z).pipe(Fn(r=>{if(r instanceof xu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ko?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Tp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(re(s=>s instanceof gt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Me(i).pipe(_i(s=>{let o=r.children[s],c=Hx(n,s);return this.processSegmentGroup(e,c,o,s)}),zd((s,o)=>(s.push(...o),s)),Vn(null),qd(),ke(s=>{if(s===null)return Bi(r);let o=iD(s);return DP(o),Q(o)}))}processSegment(e,n,r,i,s,o){return Me(n).pipe(_i(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o).pipe(Fn(u=>{if(u instanceof ko)return Q(null);throw u}))),zt(c=>!!c),Fn(c=>{if(nD(c))return IP(r,i,s)?Q(new wp):Bi(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,c){return _P(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Bi(i):Bi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:c,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Mp(n,i,s);if(!c)return Bi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EP&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(ke(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=fP(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(kt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(kt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=c,I=new Po(h,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,TP(r),en(r),r.component??r._loadedComponent??null,r,bP(r)),{segmentGroup:A,slicedSegments:N}=OE(n,h,p,u);if(N.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(re(O=>O===null?null:new gt(I,O)));if(u.length===0&&N.length===0)return Q(new gt(I,[]));let M=en(r)===s;return this.processSegment(l,u,A,N,M?Z:s,!0).pipe(re(O=>new gt(I,O instanceof gt?[O]:[])))}))):Bi(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):uP(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Fe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):hP(n))):Q({routes:[],injector:e})}};function DP(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function CP(t){let e=t.value.routeConfig;return e&&e.path===""}function iD(t){let e=[],n=new Set;for(let r of t){if(!CP(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=iD(r.children);e.push(new gt(r.value,i))}return e.filter(r=>!n.has(r))}function TP(t){return t.data||{}}function bP(t){return t.resolve||{}}function SP(t,e,n,r,i,s){return ke(o=>wP(t,e,n,r,o.extractedUrl,i,s).pipe(re(({state:c,tree:u})=>ye(F({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function AP(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of sD(u))o.add(l);let c=0;return Me(o).pipe(_i(u=>s.has(u)?RP(u,r,t,e):(u.data=Tp(u,u.parent,t).resolve,Q(void 0))),Fe(()=>c++),Ii(1),ke(u=>c===o.size?Q(n):ht))})}function sD(t){let e=t.children.map(n=>sD(n)).flat();return[t,...e]}function RP(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!JE(i)&&(s[Fo]=i.title),MP(s,t,e,r).pipe(re(o=>(t._resolvedData=o,t.data=Tp(t,t.parent,n).resolve,null)))}function MP(t,e,n,r){let i=Zf(t);if(i.length===0)return Q({});let s={};return Me(i).pipe(ke(o=>NP(t[o],e,n,r).pipe(zt(),Fe(c=>{s[o]=c}))),Ii(1),Hd(s),Fn(o=>nD(o)?ht:yi(o)))}function NP(t,e,n,r){let i=Vo(e)??r,s=Ki(t,i),o=s.resolve?s.resolve(e,n):br(i,()=>s(e,n));return Yn(o)}function Yf(t){return kt(e=>{let n=t(e);return n?Me(n).pipe(re(()=>e)):Q(e)})}var oD=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Z);return i}getResolvedTitleForRoute(r){return r.data[Fo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(xP),providedIn:"root"});let t=e;return t})(),xP=(()=>{let e=class e extends oD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(te(RE))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Np=new G("",{providedIn:"root",factory:()=>({})}),xp=new G(""),PP=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Vf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Yn(r.loadComponent()).pipe(re(aD),Fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Qs(()=>{this.componentLoaders.delete(r)})),s=new fi(i,()=>new Ke).pipe(hi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=OP(i,this.compiler,r,this.onLoadEndListener).pipe(Qs(()=>{this.childrenLoaders.delete(i)})),c=new fi(o,()=>new Ke).pipe(hi());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OP(t,e,n,r){return Yn(t.loadChildren()).pipe(re(aD),ke(i=>i instanceof co||Array.isArray(i)?Q(i):Me(e.compileModuleAsync(i))),re(i=>{r&&r(t);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get(xp,[],{optional:!0,self:!0}).flat()),{routes:o.map(Rp),injector:s}}))}function kP(t){return t&&typeof t=="object"&&"default"in t}function aD(t){return kP(t)?t.default:t}var Pp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(FP),providedIn:"root"});let t=e;return t})(),FP=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VP=new G("");var LP=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ke,this.transitionAbortSubject=new Ke,this.configLoader=L(PP),this.environmentInjector=L(wt),this.urlSerializer=L(Cp),this.rootContexts=L(Pu),this.location=L(vo),this.inputBindingEnabled=L(Ap,{optional:!0})!==null,this.titleStrategy=L(oD),this.options=L(Np,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Pp),this.createViewTransition=L(VP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let r=s=>this.events.next(new ap(s)),i=s=>this.events.next(new cp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ye(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Be({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(o=>o.id!==0),re(o=>ye(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),kt(o=>{let c=!1,u=!1;return Q(o).pipe(kt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),ht;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.rawUrl),m,np.IgnoredSameUrlNavigation)),l.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Q(l).pipe(kt(m=>{let I=this.transitions?.getValue();return this.events.next(new Ro(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),I!==this.transitions?.getValue()?ht:Promise.resolve(m)}),SP(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ye(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let I=new Su(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:I,source:A,restoredState:N,extras:M}=l,O=new Ro(m,this.urlSerializer.serialize(I),A,N);this.events.next(O);let z=QE(this.rootComponentType).snapshot;return this.currentTransition=o=ye(F({},l),{targetSnapshot:z,urlAfterRedirects:I,extras:ye(F({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Q(o)}else{let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,np.IgnoredByUrlHandlingStrategy)),l.resolve(null),ht}}),Fe(l=>{let h=new rp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),re(l=>(this.currentTransition=o=ye(F({},l),{guards:zx(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),tP(this.environmentInjector,l=>this.events.next(l)),Fe(l=>{if(o.guardsResult=l.guardsResult,Gi(l.guardsResult))throw XE(this.urlSerializer,l.guardsResult);let h=new ip(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Ot(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",mt.GuardRejected),!1)),Yf(l=>{if(l.guards.canActivateChecks.length)return Q(l).pipe(Fe(h=>{let p=new sp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),kt(h=>{let p=!1;return Q(h).pipe(AP(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",mt.NoDataFromResolver)}}))}),Fe(h=>{let p=new op(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Yf(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Fe(I=>{p.component=I}),re(()=>{})));for(let I of p.children)m.push(...h(I));return m};return hc(h(l.targetSnapshot.root)).pipe(Vn(null),pn(1))}),Yf(()=>this.afterPreactivation()),kt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Me(p).pipe(re(()=>o)):Q(o)}),re(l=>{let h=Vx(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ye(F({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Fe(()=>{this.events.next(new No)}),qx(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),pn(1),Fe({next:l=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{c=!0}}),Wd(this.transitionAbortSubject.pipe(Fe(l=>{throw l}))),Qs(()=>{!c&&!u&&this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fn(l=>{if(u=!0,tD(l))this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),jx(l)?this.events.next(new xo(l.url)):o.resolve(!1);else{this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return ht}))}))}cancelNavigationTransition(r,i,s){let o=new Qn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UP(t){return t!==bo}var jP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(BP),providedIn:"root"});let t=e;return t})(),Dp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BP=(()=>{let e=class e extends Dp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=po(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L($P),providedIn:"root"});let t=e;return t})(),$P=(()=>{let e=class e extends cD{constructor(){super(...arguments),this.location=L(vo),this.urlSerializer=L(Cp),this.options=L(Np,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Pp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ro)this.stateMemento=this.createStateMemento();else if(r instanceof Lr)this.rawUrlTree=i.initialUrl;else if(r instanceof Su){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof No?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Qn&&(r.code===mt.GuardRejected||r.code===mt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Mo?this.restoreHistory(i,!0):r instanceof Kn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,c=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",c)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=po(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Co=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Co||{});function HP(t,e){t.events.pipe(Ot(n=>n instanceof Kn||n instanceof Qn||n instanceof Mo||n instanceof Lr),re(n=>n instanceof Kn||n instanceof Lr?Co.COMPLETE:(n instanceof Qn?n.code===mt.Redirect||n.code===mt.SupersededByNewNavigation:!1)?Co.REDIRECTING:Co.FAILED),Ot(n=>n!==Co.REDIRECTING),pn(1)).subscribe(()=>{e()})}function qP(t){throw t}var zP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Op=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(pu),this.stateManager=L(cD),this.options=L(Np,{optional:!0})||{},this.pendingTasks=L(au),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(LP),this.urlSerializer=L(Cp),this.location=L(vo),this.urlHandlingStrategy=L(Pp),this._events=new Ke,this.errorHandler=this.options.errorHandler||qP,this.navigated=!1,this.routeReuseStrategy=L(jP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(xp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Ap,{optional:!0}),this.eventsSubscription=new Re,this.isNgZoneEnabled=L(Ie)instanceof Ie&&Ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Qn&&i.code!==mt.Redirect&&i.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Kn)this.navigated=!0;else if(i instanceof xo){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||UP(s.source)};this.scheduleNavigation(c,bo,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}KP(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let l=F({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Rp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:c,p=null;switch(u){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let I=s?s.snapshot:this.routerState.snapshot.root;m=zE(I)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return GE(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Gi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,bo,null,i)}navigate(r,i={skipLocationChange:!1}){return WP(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},zP):i===!1?s=F({},GP):s=i,Gi(r))return ME(this.currentUrlTree,r,s);let o=this.parseUrl(r);return ME(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,c){if(this.disposed)return Promise.resolve(!1);let u,l,h;c?(u=c.resolve,l=c.reject,h=c.promise):h=new Promise((m,I)=>{u=m,l=I});let p=this.pendingTasks.add();return HP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WP(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function KP(t){return!(t instanceof No)&&!(t instanceof xo)}var Qi=(()=>{let e=class e{constructor(r,i,s,o,c,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Ke,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Kn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,c){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:vw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(fe(Op),fe(Ur),gf("tabindex"),fe(Mr),fe(qn),fe(ji))},e.\u0275dir=ft({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Zt("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),i&2&&cu("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ye.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Or],skipLocationChange:[Ye.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Or],replaceUrl:[Ye.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Or],routerLink:"routerLink"},standalone:!0,features:[Pf,Sr]});let t=e;return t})();var QP=new G("");function uD(t,...e){return $n([{provide:xp,multi:!0,useValue:t},[],{provide:Ur,useFactory:YP,deps:[Op]},{provide:Ff,multi:!0,useFactory:JP},e.map(n=>n.\u0275providers)])}function YP(t){return t.routerState.root}function JP(){let t=L(Jt);return e=>{let n=t.get(yo);if(e!==n.components[0])return;let r=t.get(Op),i=t.get(ZP);t.get(XP)===1&&r.initialNavigation(),t.get(eO,null,X.Optional)?.setUpPreloading(),t.get(QP,null,X.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZP=new G("",{factory:()=>new Ke}),XP=new G("",{providedIn:"root",factory:()=>1});var eO=new G("");var dD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,m=(c&15)<<2|l>>6,I=l&63;u||(I=64,o||(m=64)),r.push(n[h],n[p],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Fp;let m=s<<2|c>>4;if(r.push(m),l!==64){let I=c<<4&240|l>>2;if(r.push(I),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Fp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},nO=function(t){let e=dD(t);return hD.encodeByteArray(e,!0)},Uo=function(t){return nO(t).replace(/\./g,"")},Lp=function(t){try{return hD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var iO=()=>rO().__FIREBASE_DEFAULTS__,sO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Lp(t[1]);return e&&JSON.parse(e)},Fu=()=>{try{return iO()||sO()||oO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fD=t=>{var e,n;return(n=(e=Fu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pD=t=>{let e=fD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Up=()=>{var t;return(t=Fu())===null||t===void 0?void 0:t.config},gD=t=>{var e;return(e=Fu())===null||e===void 0?void 0:e[`_${t}`]};var ku=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function mD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uo(JSON.stringify(n)),Uo(JSON.stringify(o)),""].join(".")}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function aO(){var t;let e=(t=Fu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _D(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ID(){return!aO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jp(){try{return typeof indexedDB=="object"}catch{return!1}}function wD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var cO="FirebaseError",At=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dn.prototype.create)}},Dn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uO(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new At(i,c,r)}};function uO(t,e){return t.replace(lO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var lO=/\{\$([^}]+)}/g;function Yi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(lD(s)&&lD(o)){if(!Yi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lD(t){return t!==null&&typeof t=="object"}function Bp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ED(t,e){let n=new Vp(t,e);return n.subscribe.bind(n)}var Vp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kp),i.error===void 0&&(i.error=kp),i.complete===void 0&&(i.complete=kp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kp(){}var bz=4*60*60*1e3;function Rt(t){return t&&t._delegate?t._delegate:t}var Mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jr="[DEFAULT]";var $p=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ku;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fO(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hO(t){return t===jr?void 0:t}function fO(t){return t.instantiationMode==="EAGER"}var Vu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new $p(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var pO=[],se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(se||{}),gO={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},mO=se.INFO,yO={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},vO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=yO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jn=class{constructor(e){this.name=e,this._logLevel=mO,this._logHandler=vO,this._userLogHandler=null,pO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var _O=(t,e)=>e.some(n=>t instanceof n),DD,CD;function IO(){return DD||(DD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wO(){return CD||(CD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TD=new WeakMap,qp=new WeakMap,bD=new WeakMap,Hp=new WeakMap,Gp=new WeakMap;function EO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TD.set(n,t)}).catch(()=>{}),Gp.set(e,t),e}function DO(t){if(qp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qp.set(t,e)}var zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SD(t){zp=t(zp)}function CO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Lu(this),e,...n);return bD.set(r,e.sort?e.sort():[e]),tn(r)}:wO().includes(t)?function(...e){return t.apply(Lu(this),e),tn(TD.get(this))}:function(...e){return tn(t.apply(Lu(this),e))}}function TO(t){return typeof t=="function"?CO(t):(t instanceof IDBTransaction&&DO(t),_O(t,IO())?new Proxy(t,zp):t)}function tn(t){if(t instanceof IDBRequest)return EO(t);if(Hp.has(t))return Hp.get(t);let e=TO(t);return e!==t&&(Hp.set(t,e),Gp.set(e,t)),e}var Lu=t=>Gp.get(t);function RD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=tn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tn(o.result),u.oldVersion,u.newVersion,tn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var bO=["get","getKey","getAll","getAllKeys","count"],SO=["put","add","delete","clear"],Wp=new Map;function AD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=SO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bO.includes(n)))return;let s=function(o,...c){return b(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Wp.set(e,s),s}SD(t=>ye(F({},t),{get:(e,n,r)=>AD(e,n)||t.get(e,n,r),has:(e,n)=>!!AD(e,n)||t.has(e,n)}));var Qp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function AO(t){let e=t.getComponent();return e?.type==="VERSION"}var Yp="@firebase/app",MD="0.10.4";var Br=new Jn("@firebase/app"),RO="@firebase/app-compat",MO="@firebase/analytics-compat",NO="@firebase/analytics",xO="@firebase/app-check-compat",PO="@firebase/app-check",OO="@firebase/auth",kO="@firebase/auth-compat",FO="@firebase/database",VO="@firebase/database-compat",LO="@firebase/functions",UO="@firebase/functions-compat",jO="@firebase/installations",BO="@firebase/installations-compat",$O="@firebase/messaging",HO="@firebase/messaging-compat",qO="@firebase/performance",zO="@firebase/performance-compat",GO="@firebase/remote-config",WO="@firebase/remote-config-compat",KO="@firebase/storage",QO="@firebase/storage-compat",YO="@firebase/firestore",JO="@firebase/vertexai-preview",ZO="@firebase/firestore-compat",XO="firebase",ek="10.12.1";var Jp="[DEFAULT]",tk={[Yp]:"fire-core",[RO]:"fire-core-compat",[NO]:"fire-analytics",[MO]:"fire-analytics-compat",[PO]:"fire-app-check",[xO]:"fire-app-check-compat",[OO]:"fire-auth",[kO]:"fire-auth-compat",[FO]:"fire-rtdb",[VO]:"fire-rtdb-compat",[LO]:"fire-fn",[UO]:"fire-fn-compat",[jO]:"fire-iid",[BO]:"fire-iid-compat",[$O]:"fire-fcm",[HO]:"fire-fcm-compat",[qO]:"fire-perf",[zO]:"fire-perf-compat",[GO]:"fire-rc",[WO]:"fire-rc-compat",[KO]:"fire-gcs",[QO]:"fire-gcs-compat",[YO]:"fire-fst",[ZO]:"fire-fst-compat",[JO]:"fire-vertex","fire-js":"fire-js",[XO]:"fire-js-all"};var jo=new Map,nk=new Map,Zp=new Map;function ND(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xn(t){let e=t.name;if(Zp.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,t);for(let n of jo.values())ND(n,t);for(let n of nk.values())ND(n,t);return!0}function ng(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ji(t){return t.settings!==void 0}var rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new Dn("app","Firebase",rk);var Xp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}};var Zi=ek;function Uu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zn.create("bad-app-name",{appName:String(i)});if(n||(n=Up()),!n)throw Zn.create("no-options");let s=jo.get(i);if(s){if(Yi(n,s.options)&&Yi(r,s.config))return s;throw Zn.create("duplicate-app",{appName:i})}let o=new Vu(i);for(let u of Zp.values())o.addComponent(u);let c=new Xp(n,r,o);return jo.set(i,c),c}function $o(t=Jp){let e=jo.get(t);if(!e&&t===Jp&&Up())return Uu();if(!e)throw Zn.create("no-app",{appName:t});return e}function ju(){return Array.from(jo.values())}function Le(t,e,n){var r;let i=(r=tk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(c.join(" "));return}Xn(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ik="firebase-heartbeat-database",sk=1,Bo="firebase-heartbeat-store",Kp=null;function kD(){return Kp||(Kp=RD(ik,sk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zn.create("idb-open",{originalErrorMessage:t.message})})),Kp}function ok(t){return b(this,null,function*(){try{let n=(yield kD()).transaction(Bo),r=yield n.objectStore(Bo).get(FD(t));return yield n.done,r}catch(e){if(e instanceof At)Br.warn(e.message);else{let n=Zn.create("idb-get",{originalErrorMessage:e?.message});Br.warn(n.message)}}})}function xD(t,e){return b(this,null,function*(){try{let r=(yield kD()).transaction(Bo,"readwrite");yield r.objectStore(Bo).put(e,FD(t)),yield r.done}catch(n){if(n instanceof At)Br.warn(n.message);else{let r=Zn.create("idb-set",{originalErrorMessage:n?.message});Br.warn(r.message)}}})}function FD(t){return`${t.name}!${t.options.appId}`}var ak=1024,ck=30*24*60*60*1e3,eg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new tg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=ck}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return b(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=PD(),{heartbeatsToSend:r,unsentEntries:i}=uk(this._heartbeatsCache.heartbeats),s=Uo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function PD(){return new Date().toISOString().substring(0,10)}function uk(t,e=ak){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),OD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var tg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return jp()?wD().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ok(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function OD(t){return Uo(JSON.stringify({version:2,heartbeats:t})).length}function lk(t){Xn(new Mt("platform-logger",e=>new Qp(e),"PRIVATE")),Xn(new Mt("heartbeat",e=>new eg(e),"PRIVATE")),Le(Yp,MD,t),Le(Yp,MD,"esm2017"),Le("fire-js","")}lk("");var dk="firebase",hk="10.12.1";Le(dk,hk,"app");var Bu=class{constructor(){this.title="",this.content="",this.done=!1}};var qD=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(fe(Mr),fe(qn))},e.\u0275dir=ft({type:e});let t=e;return t})(),fk=(()=>{let e=class e extends qD{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=po(e)))(s||e)}})(),e.\u0275dir=ft({type:e,features:[Gn]});let t=e;return t})(),zD=new G("");var pk={provide:zD,useExisting:ki(()=>Ku),multi:!0};function gk(){let t=En()?En().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var mk=new G(""),Ku=(()=>{let e=class e extends qD{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gk())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(fe(Mr),fe(qn),fe(mk,8))},e.\u0275dir=ft({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Zt("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[fu([pk]),Gn]});let t=e;return t})();var GD=new G(""),WD=new G("");function KD(t){return t!=null}function QD(t){return xr(t)?Me(t):t}function YD(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function JD(t,e){return e.map(n=>n(t))}function yk(t){return!t.validate}function ZD(t){return t.map(e=>yk(e)?e:n=>e.validate(n))}function vk(t){if(!t)return null;let e=t.filter(KD);return e.length==0?null:function(n){return YD(JD(n,e))}}function ig(t){return t!=null?vk(ZD(t)):null}function _k(t){if(!t)return null;let e=t.filter(KD);return e.length==0?null:function(n){let r=JD(n,e).map(QD);return $d(r).pipe(re(YD))}}function sg(t){return t!=null?_k(ZD(t)):null}function VD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ik(t){return t._rawValidators}function wk(t){return t._rawAsyncValidators}function rg(t){return t?Array.isArray(t)?t:[t]:[]}function Hu(t,e){return Array.isArray(t)?t.includes(e):t===e}function LD(t,e){let n=rg(e);return rg(t).forEach(i=>{Hu(n,i)||n.push(i)}),n}function UD(t,e){return rg(e).filter(n=>!Hu(t,n))}var qu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ig(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},es=class extends qu{get formDirective(){return null}get path(){return null}},Go=class extends qu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zu=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Ek={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hG=ye(F({},Ek),{"[class.ng-submitted]":"isSubmitted"}),XD=(()=>{let e=class e extends zu{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(fe(Go,2))},e.\u0275dir=ft({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&uu("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Gn]});let t=e;return t})(),eC=(()=>{let e=class e extends zu{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(fe(es,10))},e.\u0275dir=ft({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&uu("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Gn]});let t=e;return t})();var Ho="VALID",$u="INVALID",Xi="PENDING",qo="DISABLED";function tC(t){return(Qu(t)?t.validators:t)||null}function Dk(t){return Array.isArray(t)?ig(t):t||null}function nC(t,e){return(Qu(e)?e.asyncValidators:t)||null}function Ck(t){return Array.isArray(t)?sg(t):t||null}function Qu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Tk(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function bk(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var Gu=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ho}get invalid(){return this.status===$u}get pending(){return this.status==Xi}get disabled(){return this.status===qo}get enabled(){return this.status!==qo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UD(e,this._rawAsyncValidators))}hasValidator(e){return Hu(this._rawValidators,e)}hasAsyncValidator(e){return Hu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xi,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qo,this.errors=null,this._forEachChild(r=>{r.disable(ye(F({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ho,this._forEachChild(r=>{r.enable(ye(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ho||this.status===Xi)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qo:Ho}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xi,this._hasOwnPendingAsyncValidator=!0;let n=QD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?qo:this.errors?$u:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xi)?Xi:this._anyControlsHaveStatus($u)?$u:Ho}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Dk(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ck(this._rawAsyncValidators)}},Wu=class extends Gu{constructor(e,n,r){super(tC(n),nC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){bk(this,!0,e),Object.keys(e).forEach(r=>{Tk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var og=new G("CallSetDisabledState",{providedIn:"root",factory:()=>ag}),ag="always";function Sk(t,e){return[...e.path,t]}function rC(t,e,n=ag){iC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Rk(t,e),Nk(t,e),Mk(t,e),Ak(t,e)}function jD(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ak(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function iC(t,e){let n=Ik(t);e.validator!==null?t.setValidators(VD(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=wk(t);e.asyncValidator!==null?t.setAsyncValidators(VD(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();jD(e._rawValidators,i),jD(e._rawAsyncValidators,i)}function Rk(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&sC(t,e)})}function Mk(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&sC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function sC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Nk(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function xk(t,e){t==null,iC(t,e)}function Pk(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Ok(t){return Object.getPrototypeOf(t.constructor)===fk}function kk(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Fk(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Ku?n=s:Ok(s)?r=s:i=s}),i||r||n||null}var Vk={provide:es,useExisting:ki(()=>cg)},zo=Promise.resolve(),cg=(()=>{let e=class e extends es{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qe,this.form=new Wu({},ig(r),sg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){zo.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),rC(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){zo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){zo.then(()=>{let i=this._findContainer(r.path),s=new Wu({});xk(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){zo.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){zo.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,kk(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(fe(GD,10),fe(WD,10),fe(og,8))},e.\u0275dir=ft({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Zt("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[Ye.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fu([Vk]),Gn]});let t=e;return t})();function BD(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $D(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Lk=class extends Gu{constructor(e=null,n,r){super(tC(n),nC(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qu(n)&&(n.nonNullable||n.initialValueIsDefault)&&($D(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$D(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Uk={provide:Go,useExisting:ki(()=>ug)},HD=Promise.resolve(),ug=(()=>{let e=class e extends Go{constructor(r,i,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new Lk,this._registered=!1,this.name="",this.update=new Qe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Fk(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Pk(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){HD.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Or(i);HD.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Sk(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(fe(es,9),fe(GD,10),fe(WD,10),fe(zD,10),fe(Pr,8),fe(og,8))},e.\u0275dir=ft({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ye.None,"disabled","isDisabled"],model:[Ye.None,"ngModel","model"],options:[Ye.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fu([Uk]),Gn,Sr]});let t=e;return t})(),oC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ft({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var jk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vi({type:e}),e.\u0275inj=Fi({});let t=e;return t})();var aC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:og,useValue:r.callSetDisabledState??ag}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vi({type:e}),e.\u0275inj=Fi({imports:[jk]});let t=e;return t})();var ns=new vn("ANGULARFIRE2_VERSION");function dg(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ko=(t,e)=>{let n=e?[e]:ju(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Wo=class{constructor(){return Ko($k)}},$k="app-check";function ts(){}var Yu=class{zone;delegate;constructor(e,n=Ld){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},lg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)),n.pipe(Fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Yu(Zone.current)),this.insideAngular=n.run(()=>new Yu(Zone.current,Vd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(te(Ie))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ju(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Hk(t){return Ju().ngZone.runOutsideAngular(()=>t())}function $r(t){return Ju().ngZone.run(()=>t())}function qk(t){return zk(Ju())(t)}function zk(t){return function(n){return n=n.lift(new lg(t.ngZone)),n.pipe(kn(t.outsideAngular),On(t.insideAngular))}}var Gk=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$r(()=>t.apply(void 0,r))},er=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=$r(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts))),r[s]=Gk(r[s],n));let i=Hk(()=>t.apply(this,r));if(!e)if(i instanceof ce){let s=Ju();return i.pipe(kn(s.outsideAngular),On(s.insideAngular))}else return $r(()=>i);return i instanceof ce?i.pipe(qk):i instanceof Promise?$r(()=>new Promise((s,o)=>i.then(c=>$r(()=>s(c)),c=>$r(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:$r(()=>i)};var Hr=class{constructor(e){return e}},Yo=class{constructor(){return ju()}};function Wk(t){return t&&t.length===1?t[0]:new Hr($o())}var hg=new G("angularfire2._apps"),Kk={provide:Hr,useFactory:Wk,deps:[[new Yt,hg]]},Qk={provide:Yo,deps:[[new Yt,hg]]};function Yk(t){return(e,n)=>{let r=n.get(zn);Le("angularfire",ns.full,"core"),Le("angularfire",ns.full,"app"),Le("angular",sE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Hr(i)}}function cC(t,...e){return $n([Kk,Qk,{provide:hg,useFactory:Yk(t),multi:!0,deps:[Ie,Jt,Qo,...e]}])}function mC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yC=mC,vC=new Dn("auth","Firebase",mC());var tl=new Jn("@firebase/auth");function Zk(t,...e){tl.logLevel<=se.WARN&&tl.warn(`Auth (${Zi}): ${t}`,...e)}function Xu(t,...e){tl.logLevel<=se.ERROR&&tl.error(`Auth (${Zi}): ${t}`,...e)}function uC(t,...e){throw Cg(t,...e)}function Dg(t,...e){return Cg(t,...e)}function _C(t,e,n){let r=Object.assign(Object.assign({},yC()),{[e]:n});return new Dn("auth","Firebase",r).create(e,{appName:t.name})}function el(t){return _C(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vC.create(t,...e)}function pe(t,e,...n){if(!t)throw Cg(e,...n)}function Jo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Xu(e),new Error(e)}function nl(t,e){t||Jo(e)}function Xk(){return lC()==="http:"||lC()==="https:"}function lC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function e1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xk()||vD()||"connection"in navigator)?navigator.onLine:!0}function t1(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var zr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,nl(n>e,"Short delay should be less than long delay!"),this.isMobile=yD()||_D()}get(){return e1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function n1(t,e){nl(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var rl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var r1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var i1=new zr(3e4,6e4);function IC(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function al(s,o,c,u){return b(this,arguments,function*(t,e,n,r,i={}){return wC(t,i,()=>b(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Bp(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),rl.fetch()(EC(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function wC(t,e,n){return b(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},r1),e);try{let i=new gg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Zu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Zu(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw _C(t,h,l);uC(t,h)}}catch(i){if(i instanceof At)throw i;uC(t,"network-request-failed",{message:String(i)})}})}function EC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?n1(t.config,i):`${t.config.apiScheme}://${i}`}var gg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dg(this.auth,"network-request-failed")),i1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Dg(t,e,r);return i.customData._tokenResponse=n,i}function s1(t,e){return b(this,null,function*(){return al(t,"POST","/v1/accounts:delete",e)})}function DC(t,e){return b(this,null,function*(){return al(t,"POST","/v1/accounts:lookup",e)})}function Zo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Tg(t,e=!1){return b(this,null,function*(){let n=Rt(t),r=yield n.getIdToken(e),i=CC(r);pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zo(fg(i.auth_time)),issuedAtTime:Zo(fg(i.iat)),expirationTime:Zo(fg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function fg(t){return Number(t)*1e3}function CC(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lp(n);return i?JSON.parse(i):(Xu("Failed to decode base64 JWT payload"),null)}catch(i){return Xu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dC(t){let e=CC(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function mg(t,e,n=!1){return b(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof At&&o1(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function o1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var yg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),n)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ea=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function il(t){return b(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield mg(t,DC(n,{idToken:r}));pe(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TC(s.providerUserInfo):[],c=a1(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ea(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function bg(t){return b(this,null,function*(){let e=Rt(t);yield il(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function a1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TC(t){return t.map(e=>{var{providerId:n}=e,r=Ud(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function c1(t,e){return b(this,null,function*(){let n=yield wC(t,{},()=>b(this,null,function*(){let r=Bp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EC(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",rl.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function u1(t,e){return b(this,null,function*(){return al(t,"POST","/v2/accounts:revokeToken",IC(t,e))})}var Xo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let n=dC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return b(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield c1(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Jo("not implemented")}};function tr(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ta=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ud(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ea(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let n=yield mg(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Tg(this,e)}reload(){return bg(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield il(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Ji(this.auth.app))return Promise.reject(el(this.auth));let e=yield this.getIdToken();return yield mg(this,s1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:ae,isAnonymous:Te,providerData:J,stsTokenManager:E}=n;pe(B&&E,e,"internal-error");let y=Xo.fromJSON(this.name,E);pe(typeof B=="string",e,"internal-error"),tr(p,e.name),tr(m,e.name),pe(typeof ae=="boolean",e,"internal-error"),pe(typeof Te=="boolean",e,"internal-error"),tr(I,e.name),tr(A,e.name),tr(N,e.name),tr(M,e.name),tr(O,e.name),tr(z,e.name);let v=new t({uid:B,auth:e,email:m,emailVerified:ae,displayName:p,isAnonymous:Te,photoURL:A,phoneNumber:I,tenantId:N,stsTokenManager:y,createdAt:O,lastLoginAt:z});return J&&Array.isArray(J)&&(v.providerData=J.map(w=>Object.assign({},w))),M&&(v._redirectEventId=M),v}static _fromIdTokenResponse(e,n,r=!1){return b(this,null,function*(){let i=new Xo;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield il(s),s})}static _fromGetAccountInfoResponse(e,n,r){return b(this,null,function*(){let i=n.users[0];pe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?TC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Xo;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ea(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var hC=new Map;function qr(t){nl(t instanceof Function,"Expected a class definition");let e=hC.get(t);return e?(nl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hC.set(t,e),e)}var l1=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(n,r){return b(this,null,function*(){this.storage[n]=r})}_get(n){return b(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return b(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),vg=l1;function pg(t,e,n){return`firebase:${t}:${e}:${n}`}var sl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pg(this.userKey,i.apiKey,s),this.fullPersistenceKey=pg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return b(this,null,function*(){if(!n.length)return new t(qr(vg),e,r);let i=(yield Promise.all(n.map(l=>b(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||qr(vg),o=pg(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=ta._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>b(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function fC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m1(e))return"Blackberry";if(y1(e))return"Webos";if(h1(e))return"Safari";if((e.includes("chrome/")||f1(e))&&!e.includes("edge/"))return"Chrome";if(g1(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function d1(t=yt()){return/firefox\//i.test(t)}function h1(t=yt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f1(t=yt()){return/crios\//i.test(t)}function p1(t=yt()){return/iemobile/i.test(t)}function g1(t=yt()){return/android/i.test(t)}function m1(t=yt()){return/blackberry/i.test(t)}function y1(t=yt()){return/webos/i.test(t)}function bC(t,e=[]){let n;switch(t){case"Browser":n=fC(yt());break;case"Worker":n=`${fC(yt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zi}/${r}`}var _g=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function v1(n){return b(this,arguments,function*(t,e={}){return al(t,"GET","/v2/passwordPolicy",IC(t,e))})}var _1=6,Ig=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ol(this),this.idTokenSubscription=new ol(this),this.beforeStateQueue=new _g(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield sl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let n=yield DC(this,{idToken:e}),r=yield ta._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var n;if(Ji(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield il(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=t1()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Ji(this.app))return Promise.reject(el(this));let n=e?Rt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return b(this,null,function*(){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Ji(this.app)?Promise.reject(el(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ji(this.app)?Promise.reject(el(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(qr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield v1(this),n=new Ig(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield u1(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&qr(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=yield sl.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return b(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Zk(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function I1(t){return Rt(t)}var ol=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ED(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var w1={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E1(t){w1=t}function D1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function C1(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var BG=D1("rcb"),$G=new zr(3e4,6e4);var HG=new zr(2e3,1e4);var qG=10*60*1e3;var zG=new zr(3e4,6e4);var GG=new zr(5e3,15e3);var WG=encodeURIComponent("fac");var pC="@firebase/auth",gC="1.7.3";var Eg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function T1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b1(t){Xn(new Mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bC(t)},l=new wg(r,i,s,u);return C1(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xn(new Mt("auth-internal",e=>{let n=I1(e.getProvider("auth").getImmediate());return(r=>new Eg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(pC,gC,T1(t)),Le(pC,gC,"esm2017")}var S1=5*60,KG=gD("authIdTokenMaxAge")||S1;function A1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}E1({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Dg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",A1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b1("Browser");var SF="auth";var cl=class{constructor(){return Ko(SF)}};var SC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},AC={};var nr,Sg;(function(){var t;function e(E,y){function v(){}v.prototype=y.prototype,E.D=y.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,D,T){for(var _=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)_[ln-2]=arguments[ln];return y.prototype[D].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,v){v||(v=0);var w=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)w[D]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(D=0;16>D;++D)w[D]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=E.g[0],v=E.g[1],D=E.g[2];var T=E.g[3],_=y+(T^v&(D^T))+w[0]+3614090360&4294967295;y=v+(_<<7&4294967295|_>>>25),_=T+(D^y&(v^D))+w[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(v^T&(y^v))+w[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=v+(y^D&(T^y))+w[3]+3250441966&4294967295,v=D+(_<<22&4294967295|_>>>10),_=y+(T^v&(D^T))+w[4]+4118548399&4294967295,y=v+(_<<7&4294967295|_>>>25),_=T+(D^y&(v^D))+w[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(v^T&(y^v))+w[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=v+(y^D&(T^y))+w[7]+4249261313&4294967295,v=D+(_<<22&4294967295|_>>>10),_=y+(T^v&(D^T))+w[8]+1770035416&4294967295,y=v+(_<<7&4294967295|_>>>25),_=T+(D^y&(v^D))+w[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(v^T&(y^v))+w[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=v+(y^D&(T^y))+w[11]+2304563134&4294967295,v=D+(_<<22&4294967295|_>>>10),_=y+(T^v&(D^T))+w[12]+1804603682&4294967295,y=v+(_<<7&4294967295|_>>>25),_=T+(D^y&(v^D))+w[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(v^T&(y^v))+w[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=v+(y^D&(T^y))+w[15]+1236535329&4294967295,v=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(v^D))+w[1]+4129170786&4294967295,y=v+(_<<5&4294967295|_>>>27),_=T+(v^D&(y^v))+w[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^v&(T^y))+w[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=v+(T^y&(D^T))+w[0]+3921069994&4294967295,v=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(v^D))+w[5]+3593408605&4294967295,y=v+(_<<5&4294967295|_>>>27),_=T+(v^D&(y^v))+w[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^v&(T^y))+w[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=v+(T^y&(D^T))+w[4]+3889429448&4294967295,v=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(v^D))+w[9]+568446438&4294967295,y=v+(_<<5&4294967295|_>>>27),_=T+(v^D&(y^v))+w[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^v&(T^y))+w[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=v+(T^y&(D^T))+w[8]+1163531501&4294967295,v=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(v^D))+w[13]+2850285829&4294967295,y=v+(_<<5&4294967295|_>>>27),_=T+(v^D&(y^v))+w[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^v&(T^y))+w[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=v+(T^y&(D^T))+w[12]+2368359562&4294967295,v=D+(_<<20&4294967295|_>>>12),_=y+(v^D^T)+w[5]+4294588738&4294967295,y=v+(_<<4&4294967295|_>>>28),_=T+(y^v^D)+w[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^v)+w[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=v+(D^T^y)+w[14]+4259657740&4294967295,v=D+(_<<23&4294967295|_>>>9),_=y+(v^D^T)+w[1]+2763975236&4294967295,y=v+(_<<4&4294967295|_>>>28),_=T+(y^v^D)+w[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^v)+w[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=v+(D^T^y)+w[10]+3200236656&4294967295,v=D+(_<<23&4294967295|_>>>9),_=y+(v^D^T)+w[13]+681279174&4294967295,y=v+(_<<4&4294967295|_>>>28),_=T+(y^v^D)+w[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^v)+w[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=v+(D^T^y)+w[6]+76029189&4294967295,v=D+(_<<23&4294967295|_>>>9),_=y+(v^D^T)+w[9]+3654602809&4294967295,y=v+(_<<4&4294967295|_>>>28),_=T+(y^v^D)+w[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^v)+w[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=v+(D^T^y)+w[2]+3299628645&4294967295,v=D+(_<<23&4294967295|_>>>9),_=y+(D^(v|~T))+w[0]+4096336452&4294967295,y=v+(_<<6&4294967295|_>>>26),_=T+(v^(y|~D))+w[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~v))+w[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=v+(T^(D|~y))+w[5]+4237533241&4294967295,v=D+(_<<21&4294967295|_>>>11),_=y+(D^(v|~T))+w[12]+1700485571&4294967295,y=v+(_<<6&4294967295|_>>>26),_=T+(v^(y|~D))+w[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~v))+w[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=v+(T^(D|~y))+w[1]+2240044497&4294967295,v=D+(_<<21&4294967295|_>>>11),_=y+(D^(v|~T))+w[8]+1873313359&4294967295,y=v+(_<<6&4294967295|_>>>26),_=T+(v^(y|~D))+w[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~v))+w[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=v+(T^(D|~y))+w[13]+1309151649&4294967295,v=D+(_<<21&4294967295|_>>>11),_=y+(D^(v|~T))+w[4]+4149444226&4294967295,y=v+(_<<6&4294967295|_>>>26),_=T+(v^(y|~D))+w[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~v))+w[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=v+(T^(D|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var v=y-this.blockSize,w=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=v;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<y;)if(w[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,w),D=0;break}}else for(;T<y;)if(w[D++]=E[T++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var v=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=v&255,v/=256;for(this.u(E),E=Array(16),y=v=0;4>y;++y)for(var w=0;32>w;w+=8)E[v++]=this.g[y]>>>w&255;return E};function s(E,y){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=y(E)}function o(E,y){this.h=y;for(var v=[],w=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;w&&T==y||(v[D]=T,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var y=[],v=1,w=0;E>=v;w++)y[w]=E/v|0,v*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return M(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(y,8)),w=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),w=w.j(T).add(l(_))):(w=w.j(v),w=w.add(l(_)))}return w}var p=u(0),m=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-M(this).m();for(var E=0,y=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(N(this))return"-"+M(this).toString(E);for(var y=l(Math.pow(E,6)),v=this,w="";;){var D=ae(v,y).g;v=O(v,D.j(y));var T=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=D,A(v))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=O(this,E),N(E)?-1:A(E)?0:1};function M(E){for(var y=E.g.length,v=[],w=0;w<y;w++)v[w]=~E.g[w];return new o(v,~E.h).add(m)}t.abs=function(){return N(this)?M(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],w=0,D=0;D<=y;D++){var T=w+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);w=_>>>16,T&=65535,_&=65535,v[D]=_<<16|T}return new o(v,v[v.length-1]&-2147483648?-1:0)};function O(E,y){return E.add(M(y))}t.j=function(E){if(A(this)||A(E))return p;if(N(this))return N(E)?M(this).j(M(E)):M(M(this).j(E));if(N(E))return M(this.j(M(E)));if(0>this.l(I)&&0>E.l(I))return l(this.m()*E.m());for(var y=this.g.length+E.g.length,v=[],w=0;w<2*y;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<E.g.length;D++){var T=this.i(w)>>>16,_=this.i(w)&65535,ln=E.i(D)>>>16,As=E.i(D)&65535;v[2*w+2*D]+=_*As,z(v,2*w+2*D),v[2*w+2*D+1]+=T*As,z(v,2*w+2*D+1),v[2*w+2*D+1]+=_*ln,z(v,2*w+2*D+1),v[2*w+2*D+2]+=T*ln,z(v,2*w+2*D+2)}for(w=0;w<y;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=y;w<2*y;w++)v[w]=0;return new o(v,0)};function z(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function B(E,y){this.g=E,this.h=y}function ae(E,y){if(A(y))throw Error("division by zero");if(A(E))return new B(p,p);if(N(E))return y=ae(M(E),y),new B(M(y.g),M(y.h));if(N(y))return y=ae(E,M(y)),new B(M(y.g),y.h);if(30<E.g.length){if(N(E)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,w=y;0>=w.l(E);)v=Te(v),w=Te(w);var D=J(v,1),T=J(w,1);for(w=J(w,2),v=J(v,2);!A(w);){var _=T.add(w);0>=_.l(E)&&(D=D.add(v),T=_),w=J(w,1),v=J(v,1)}return y=O(E,D.j(y)),new B(D,y)}for(D=p;0<=E.l(y);){for(v=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=l(v),_=T.j(y);N(_)||0<_.l(E);)v-=w,T=l(v),_=T.j(y);A(T)&&(T=m),D=D.add(T),E=O(E,_)}return new B(D,E)}t.A=function(E){return ae(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function Te(E){for(var y=E.g.length+1,v=[],w=0;w<y;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function J(E,y){var v=y>>5;y%=32;for(var w=E.g.length-v,D=[],T=0;T<w;T++)D[T]=0<y?E.i(T+v)>>>y|E.i(T+v+1)<<32-y:E.i(T+v);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sg=AC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,nr=AC.Integer=o}).apply(typeof SC<"u"?SC:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={};var Ag,Rg,rs,Mg,na,ll,Ng,xg,Pg;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,g=!1,C={next:function(){if(!g&&f<a.length){var S=f++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(d,C)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function I(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,C,S){for(var P=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)P[ve-2]=arguments[ve];return d.prototype[C].apply(g,P)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function M(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=a.length||0,S=g.length||0;a.length=C+S;for(let P=0;P<S;P++)a[C+P]=g[P]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(a){return/^[\s\xa0]*$/.test(a)}function B(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ae(a){return ae[" "](a),a}ae[" "]=function(){};var Te=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function J(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function E(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function y(a){let d={};for(let f in a)d[f]=a[f];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let S=0;S<v.length;S++)f=v[S],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function D(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Jl;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ln{constructor(){this.h=this.g=null}add(d,f){let g=As.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var As=new O(()=>new Nb,a=>a.reset());class Nb{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Rs,Ms=!1,Jl=new ln,By=()=>{let a=c.Promise.resolve(void 0);Rs=()=>{a.then(xb)}};var xb=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){T(f)}var d=As;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Ms=!1};function Rn(){this.s=this.s,this.C=this.C}Rn.prototype.s=!1,Rn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var Pb=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Ns(a,d){if(qe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Te){e:{try{ae(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ob[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ns.aa.h.call(this)}}A(Ns,qe);var Ob={2:"touch",3:"pen",4:"mouse"};Ns.prototype.h=function(){Ns.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xs="closure_listenable_"+(1e6*Math.random()|0),kb=0;function Fb(a,d,f,g,C){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++kb,this.da=this.fa=!1}function ba(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Sa(a){this.src=a,this.g={},this.h=0}Sa.prototype.add=function(a,d,f,g,C){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var P=Xl(a,d,g,C);return-1<P?(d=a[P],f||(d.fa=!1)):(d=new Fb(d,this.src,S,!!g,C),d.fa=f,a.push(d)),d};function Zl(a,d){var f=d.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=C)&&Array.prototype.splice.call(g,C,1),S&&(ba(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Xl(a,d,f,g){for(var C=0;C<a.length;++C){var S=a[C];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return C}return-1}var ed="closure_lm_"+(1e6*Math.random()|0),td={};function $y(a,d,f,g,C){if(g&&g.once)return qy(a,d,f,g,C);if(Array.isArray(d)){for(var S=0;S<d.length;S++)$y(a,d[S],f,g,C);return null}return f=sd(f),a&&a[xs]?a.K(d,f,l(g)?!!g.capture:!!g,C):Hy(a,d,f,!1,g,C)}function Hy(a,d,f,g,C,S){if(!d)throw Error("Invalid event type");var P=l(C)?!!C.capture:!!C,ve=rd(a);if(ve||(a[ed]=ve=new Sa(a)),f=ve.add(d,f,g,P,S),f.proxy)return f;if(g=Vb(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)Pb||(C=P),C===void 0&&(C=!1),a.addEventListener(d.toString(),g,C);else if(a.attachEvent)a.attachEvent(Gy(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Vb(){function a(f){return d.call(a.src,a.listener,f)}let d=Lb;return a}function qy(a,d,f,g,C){if(Array.isArray(d)){for(var S=0;S<d.length;S++)qy(a,d[S],f,g,C);return null}return f=sd(f),a&&a[xs]?a.L(d,f,l(g)?!!g.capture:!!g,C):Hy(a,d,f,!0,g,C)}function zy(a,d,f,g,C){if(Array.isArray(d))for(var S=0;S<d.length;S++)zy(a,d[S],f,g,C);else g=l(g)?!!g.capture:!!g,f=sd(f),a&&a[xs]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],f=Xl(S,f,g,C),-1<f&&(ba(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=rd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Xl(d,f,g,C)),(f=-1<a?d[a]:null)&&nd(f))}function nd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[xs])Zl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(Gy(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=rd(d))?(Zl(f,a),f.h==0&&(f.src=null,d[ed]=null)):ba(a)}}}function Gy(a){return a in td?td[a]:td[a]="on"+a}function Lb(a,d){if(a.da)a=!0;else{d=new Ns(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&nd(a),a=f.call(g,d)}return a}function rd(a){return a=a[ed],a instanceof Sa?a:null}var id="__closure_events_fn_"+(1e9*Math.random()>>>0);function sd(a){return typeof a=="function"?a:(a[id]||(a[id]=function(d){return a.handleEvent(d)}),a[id])}function ze(){Rn.call(this),this.i=new Sa(this),this.M=this,this.F=null}A(ze,Rn),ze.prototype[xs]=!0,ze.prototype.removeEventListener=function(a,d,f,g){zy(this,a,d,f,g)};function et(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new qe(d,a);else if(d instanceof qe)d.target=d.target||a;else{var C=d;d=new qe(g,a),w(d,C)}if(C=!0,f)for(var S=f.length-1;0<=S;S--){var P=d.g=f[S];C=Aa(P,g,!0,d)&&C}if(P=d.g=a,C=Aa(P,g,!0,d)&&C,C=Aa(P,g,!1,d)&&C,f)for(S=0;S<f.length;S++)P=d.g=f[S],C=Aa(P,g,!1,d)&&C}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)ba(f[g]);delete a.g[d],a.h--}}this.F=null},ze.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},ze.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Aa(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,S=0;S<d.length;++S){var P=d[S];if(P&&!P.da&&P.capture==f){var ve=P.listener,je=P.ha||P.src;P.fa&&Zl(a.i,P),C=ve.call(je,g)!==!1&&C}}return C&&!g.defaultPrevented}function Wy(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Ky(a){a.g=Wy(()=>{a.g=null,a.i&&(a.i=!1,Ky(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class Ub extends Rn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ky(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(a){Rn.call(this),this.h=a,this.g={}}A(Ps,Rn);var Qy=[];function Yy(a){J(a.g,function(d,f){this.g.hasOwnProperty(f)&&nd(d)},a),a.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),Yy(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=c.JSON.stringify,jb=c.JSON.parse,Bb=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function ad(){}ad.prototype.h=null;function Jy(a){return a.h||(a.h=a.i())}function Zy(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cd(){qe.call(this,"d")}A(cd,qe);function ud(){qe.call(this,"c")}A(ud,qe);var cr={},Xy=null;function Ra(){return Xy=Xy||new ze}cr.La="serverreachability";function ev(a){qe.call(this,cr.La,a)}A(ev,qe);function ks(a){let d=Ra();et(d,new ev(d))}cr.STAT_EVENT="statevent";function tv(a,d){qe.call(this,cr.STAT_EVENT,a),this.stat=d}A(tv,qe);function tt(a){let d=Ra();et(d,new tv(d,a))}cr.Ma="timingevent";function nv(a,d){qe.call(this,cr.Ma,a),this.size=d}A(nv,qe);function Fs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Vs(){this.g=!0}Vs.prototype.xa=function(){this.g=!1};function $b(a,d,f,g,C,S){a.info(function(){if(a.g)if(S)for(var P="",ve=S.split("&"),je=0;je<ve.length;je++){var he=ve[je].split("=");if(1<he.length){var Ge=he[0];he=he[1];var We=Ge.split("_");P=2<=We.length&&We[1]=="type"?P+(Ge+"="+he+"&"):P+(Ge+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+P})}function Hb(a,d,f,g,C,S,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+S+" "+P})}function ri(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+zb(a,f)+(g?" "+g:"")})}function qb(a,d){a.info(function(){return"TIMEOUT: "+d})}Vs.prototype.info=function(){};function zb(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var S=C[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<C.length;P++)C[P]=""}}}}return od(f)}catch{return d}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ld;function Na(){}A(Na,ad),Na.prototype.g=function(){return new XMLHttpRequest},Na.prototype.i=function(){return{}},ld=new Na;function Mn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iv}function iv(){this.i=null,this.g="",this.h=!1}var sv={},dd={};function hd(a,d,f){a.L=1,a.v=ka(dn(d)),a.m=f,a.P=!0,ov(a,null)}function ov(a,d){a.F=Date.now(),xa(a),a.A=dn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Iv(f.i,"t",g),a.C=0,f=a.j.J,a.h=new iv,a.g=Lv(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Ub(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Qy[0]=C.toString()),C=Qy);for(var S=0;S<C.length;S++){var P=$y(f,C[S],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ks(),$b(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;let d=this.M;d&&hn(a)==3?d.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{let We=hn(this.g);var d=this.g.Ba();let oi=this.g.Z();if(!(3>We)&&(We!=3||this.g&&(this.h.h||this.g.oa()||Sv(this.g)))){this.J||We!=4||d==7||(d==8||0>=oi?ks(3):ks(2)),fd(this);var f=this.g.Z();this.X=f;t:if(av(this)){var g=Sv(this.g);a="";var C=g.length,S=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),Ls(this);var P="";break t}this.h.i=new c.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==C-1)});g.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,Hb(this.i,this.u,this.A,this.l,this.R,We,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,je=this.g;if((ve=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ve)){var he=ve;break t}}he=null}if(f=he)ri(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pd(this,f);else{this.o=!1,this.s=3,tt(12),ur(this),Ls(this);break e}}if(this.P){f=!0;let xt;for(;!this.J&&this.C<P.length;)if(xt=Gb(this,P),xt==dd){We==4&&(this.s=4,tt(14),f=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==sv){this.s=4,tt(15),ri(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else ri(this.i,this.l,xt,null),pd(this,xt);if(av(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||P.length!=0||this.h.h||(this.s=1,tt(16),f=!1),this.o=this.o&&f,!f)ri(this.i,this.l,P,"[Invalid Chunked Response]"),ur(this),Ls(this);else if(0<P.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Id(Ge),Ge.M=!0,tt(11))}}else ri(this.i,this.l,P,null),pd(this,P);We==4&&ur(this),this.o&&!this.J&&(We==4?Ov(this.j,this):(this.o=!1,xa(this)))}else u0(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),ur(this),Ls(this)}}}catch{}finally{}};function av(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Gb(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?dd:(f=Number(d.substring(f,g)),isNaN(f)?sv:(g+=1,g+f>d.length?dd:(d=d.slice(g,g+f),a.C=g+f,d)))}Mn.prototype.cancel=function(){this.J=!0,ur(this)};function xa(a){a.S=Date.now()+a.I,cv(a,a.I)}function cv(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Fs(m(a.ba,a),d)}function fd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(qb(this.i,this.A),this.L!=2&&(ks(),tt(17)),ur(this),this.s=2,Ls(this)):cv(this,this.S-a)};function Ls(a){a.j.G==0||a.J||Ov(a.j,a)}function ur(a){fd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Yy(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function pd(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||gd(f.h,a))){if(!a.K&&gd(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ja(f),La(f);else break e;_d(f),tt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fs(m(f.Za,f),6e3));if(1>=dv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else dr(f,11)}else if((a.K||f.g==a)&&ja(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let he=C[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let Ge=he[3];Ge!=null&&(f.la=Ge,f.j.info("VER="+f.la));let We=he[4];We!=null&&(f.Aa=We,f.j.info("SVER="+f.Aa));let oi=he[5];oi!=null&&typeof oi=="number"&&0<oi&&(g=1.5*oi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let xt=a.g;if(xt){let $a=xt.g?xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var S=g.h;S.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(md(S,S.h),S.h=null))}if(g.D){let wd=xt.g?xt.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&(g.ya=wd,Ee(g.I,g.D,wd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=a;if(g.qa=Vv(g,g.J?g.ia:null,g.W),P.K){hv(g.h,P);var ve=P,je=g.L;je&&(ve.I=je),ve.B&&(fd(ve),xa(ve)),g.g=P}else xv(g);0<f.i.length&&Ua(f)}else he[0]!="stop"&&he[0]!="close"||dr(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?dr(f,7):vd(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}ks(4)}catch{}}var Wb=class{constructor(a,d){this.g=a,this.map=d}};function uv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dv(a){return a.h?1:a.g?a.g.size:0}function gd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function md(a,d){a.g?a.g.add(d):a.h=d}function hv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}uv.prototype.cancel=function(){if(this.i=fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function fv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function Kb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function Qb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function pv(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Qb(a),g=Kb(a),C=g.length,S=0;S<C;S++)d.call(void 0,g[S],f&&f[S],a)}var gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yb(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),C=null;if(0<=g){var S=a[f].substring(0,g);C=a[f].substring(g+1)}else S=a[f];d(S,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function lr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof lr){this.h=a.h,Pa(this,a.j),this.o=a.o,this.g=a.g,Oa(this,a.s),this.l=a.l;var d=a.i,f=new Bs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),mv(this,f),this.m=a.m}else a&&(d=String(a).match(gv))?(this.h=!1,Pa(this,d[1]||"",!0),this.o=Us(d[2]||""),this.g=Us(d[3]||"",!0),Oa(this,d[4]),this.l=Us(d[5]||"",!0),mv(this,d[6]||"",!0),this.m=Us(d[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}lr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(js(d,yv,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(js(d,yv,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(js(f,f.charAt(0)=="/"?Xb:Zb,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",js(f,t0)),a.join("")};function dn(a){return new lr(a)}function Pa(a,d,f){a.j=f?Us(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Oa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function mv(a,d,f){d instanceof Bs?(a.i=d,n0(a.i,a.h)):(f||(d=js(d,e0)),a.i=new Bs(d,a.h))}function Ee(a,d,f){a.i.set(d,f)}function ka(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Us(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function js(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Jb),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var yv=/[#\/\?@]/g,Zb=/[#\?:]/g,Xb=/[#\?]/g,e0=/[#\?@]/g,t0=/#/g;function Bs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Nn(a){a.g||(a.g=new Map,a.h=0,a.i&&Yb(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Bs.prototype,t.add=function(a,d){Nn(this),this.i=null,a=ii(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function vv(a,d){Nn(a),d=ii(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function _v(a,d){return Nn(a),d=ii(a,d),a.g.has(d)}t.forEach=function(a,d){Nn(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(d,C,g,this)},this)},this)},t.na=function(){Nn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=a[g];for(let S=0;S<C.length;S++)f.push(d[g])}return f},t.V=function(a){Nn(this);let d=[];if(typeof a=="string")_v(this,a)&&(d=d.concat(this.g.get(ii(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Nn(this),this.i=null,a=ii(this,a),_v(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Iv(a,d,f){vv(a,d),0<f.length&&(a.i=null,a.g.set(ii(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var C=S;P[g]!==""&&(C+="="+encodeURIComponent(String(P[g]))),a.push(C)}}return this.i=a.join("&")};function ii(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function n0(a,d){d&&!a.j&&(Nn(a),a.i=null,a.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(vv(this,g),Iv(this,C,f))},a)),a.j=d}function r0(a,d){let f=new Vs;if(c.Image){let g=new Image;g.onload=I(xn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=I(xn,f,"TestLoadImage: error",!1,d,g),g.onabort=I(xn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=I(xn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function i0(a,d){let f=new Vs,g=new AbortController,C=setTimeout(()=>{g.abort(),xn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(C),S.ok?xn(f,"TestPingServer: ok",!0,d):xn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),xn(f,"TestPingServer: error",!1,d)})}function xn(a,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function s0(){this.g=new Bb}function o0(a,d,f){let g=f||"";try{pv(a,function(C,S){let P=C;l(C)&&(P=od(C)),d.push(g+S+"="+encodeURIComponent(P))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function $s(a){this.l=a.Ub||null,this.j=a.eb||!1}A($s,ad),$s.prototype.g=function(){return new Fa(this.l,this.j)},$s.prototype.i=function(a){return function(){return a}}({});function Fa(a,d){ze.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Fa,ze),t=Fa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,qs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function wv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Hs(this):qs(this),this.readyState==3&&wv(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Hs(this))},t.Qa=function(a){this.g&&(this.response=a,Hs(this))},t.ga=function(){this.g&&Hs(this)};function Hs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,qs(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ev(a){let d="";return J(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function yd(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ev(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ee(a,d,f))}function be(a){ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(be,ze);var a0=/^https?$/i,c0=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ld.g(),this.v=this.o?Jy(this.o):Jy(ld),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Dv(this,S);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(c0,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of f)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bv(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Dv(this,S)}};function Dv(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Cv(a),Va(a)}function Cv(a){a.A||(a.A=!0,et(a,"complete"),et(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,et(this,"complete"),et(this,"abort"),Va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Va(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tv(this):this.bb())},t.bb=function(){Tv(this)};function Tv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||hn(a)!=4||a.Z()!=2)){if(a.u&&hn(a)==4)Wy(a.Ea,0,a);else if(et(a,"readystatechange"),hn(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var C=String(a.D).match(gv)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!a0.test(C?C.toLowerCase():"")}f=g}if(f)et(a,"complete"),et(a,"success");else{a.m=6;try{var S=2<hn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Cv(a)}}finally{Va(a)}}}}function Va(a,d){if(a.g){bv(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||et(a,"ready");try{f.onreadystatechange=g}catch{}}}function bv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function hn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),jb(d)}};function Sv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function u0(a){let d={};a=(a.g&&2<=hn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(z(a[g]))continue;var f=D(a[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[C]||[];d[C]=S,S.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Av(a){this.Aa=0,this.i=[],this.j=new Vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,a),this.cb=zs("retryDelaySeedMs",1e4,a),this.Wa=zs("forwardChannelMaxRetries",2,a),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new uv(a&&a.concurrentRequestLimit),this.Da=new s0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Av.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){tt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Vv(this,null,this.W),Ua(this)};function vd(a){if(Rv(a),a.G==3){var d=a.U++,f=dn(a.I);if(Ee(f,"SID",a.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),Gs(a,f),d=new Mn(a,a.j,d),d.L=2,d.v=ka(dn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=Lv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xa(d)}Fv(a)}function La(a){a.g&&(Id(a),a.g.cancel(),a.g=null)}function Rv(a){La(a),a.u&&(c.clearTimeout(a.u),a.u=null),ja(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ua(a){if(!lv(a.h)&&!a.s){a.s=!0;var d=a.Ga;Rs||By(),Ms||(Rs(),Ms=!0),Jl.add(d,a),a.B=0}}function l0(a,d){return dv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Fs(m(a.Ga,a,d),kv(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new Mn(this,this.j,a),S=this.o;if(this.S&&(S?(S=y(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(C.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Nv(this,C,d),f=dn(this.I),Ee(f,"RID",a),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),Gs(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Ev(S)))+"&"+d:this.m&&yd(f,this.m,S)),md(this.h,C),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),C.T=!0,hd(C,f,null)):hd(C,f,d),this.G=2}}else this.G==3&&(a?Mv(this,a):this.i.length==0||lv(this.h)||Mv(this))};function Mv(a,d){var f;d?f=d.l:f=a.U++;let g=dn(a.I);Ee(g,"SID",a.K),Ee(g,"RID",f),Ee(g,"AID",a.T),Gs(a,g),a.m&&a.o&&yd(g,a.m,a.o),f=new Mn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Nv(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),md(a.h,f),hd(f,g,d)}function Gs(a,d){a.H&&J(a.H,function(f,g){Ee(d,g,f)}),a.l&&pv({},function(f,g){Ee(d,g,f)})}function Nv(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var C=a.i;let S=-1;for(;;){let P=["count="+f];S==-1?0<f?(S=C[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let ve=!0;for(let je=0;je<f;je++){let he=C[je].g,Ge=C[je].map;if(he-=S,0>he)S=Math.max(0,C[je].g-100),ve=!1;else try{o0(Ge,P,"req"+he+"_")}catch{g&&g(Ge)}}if(ve){g=P.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function xv(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Rs||By(),Ms||(Rs(),Ms=!0),Jl.add(d,a),a.v=0}}function _d(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Fs(m(a.Fa,a),kv(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Fs(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),La(this),Pv(this))};function Id(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Pv(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=dn(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),Gs(a,d),a.m&&a.o&&yd(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ka(dn(d)),f.m=null,f.P=!0,ov(f,a)}t.Za=function(){this.C!=null&&(this.C=null,La(this),_d(this),tt(19))};function ja(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ov(a,d){var f=null;if(a.g==d){ja(a),Id(a),a.g=null;var g=2}else if(gd(a.h,d))f=d.D,hv(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=a.B;g=Ra(),et(g,new nv(g,f)),Ua(a)}else xv(a);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&l0(a,d)||g==2&&_d(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),C){case 1:dr(a,5);break;case 4:dr(a,10);break;case 3:dr(a,6);break;default:dr(a,2)}}}function kv(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function dr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let C=!g;g=new lr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pa(g,"https"),ka(g),C?r0(g.toString(),f):i0(g.toString(),f)}else tt(2);a.G=0,a.l&&a.l.sa(d),Fv(a),Rv(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Fv(a){if(a.G=0,a.ka=[],a.l){let d=fv(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ka,d),M(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Vv(a,d,f){var g=f instanceof lr?dn(f):new lr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Oa(g,g.s);else{var C=c.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var S=new lr(null);g&&Pa(S,g),d&&(S.g=d),C&&Oa(S,C),f&&(S.l=f),g=S}return f=a.D,d=a.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",a.la),Gs(a,g),g}function Lv(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new be(new $s({eb:f})):new be(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uv(){}t=Uv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ba(){}Ba.prototype.g=function(a,d){return new lt(a,d)};function lt(a,d){ze.call(this),this.g=new Av(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!z(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new si(this)}A(lt,ze),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){vd(this.g)},lt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=od(a),a=f);d.i.push(new Wb(d.Ya++,a)),d.G==3&&Ua(d)},lt.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,lt.aa.N.call(this)};function jv(a){cd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(jv,cd);function Bv(){ud.call(this),this.status=1}A(Bv,ud);function si(a){this.g=a}A(si,Uv),si.prototype.ua=function(){et(this.g,"a")},si.prototype.ta=function(a){et(this.g,new jv(a))},si.prototype.sa=function(a){et(this.g,new Bv)},si.prototype.ra=function(){et(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,Pg=Cn.createWebChannelTransport=function(){return new Ba},xg=Cn.getStatEventTarget=function(){return Ra()},Ng=Cn.Event=cr,ll=Cn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,na=Cn.ErrorCode=Ma,rv.COMPLETE="complete",Mg=Cn.EventType=rv,Zy.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",ze.prototype.listen=ze.prototype.K,rs=Cn.WebChannel=Zy,Rg=Cn.FetchXmlHttpFactory=$s,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Ag=Cn.XhrIo=be}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});var RC="@firebase/firestore";var Ue=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");var Ts="10.12.1";var Kr=new Jn("@firebase/firestore");function ra(){return Kr.logLevel}function V(t,...e){if(Kr.logLevel<=se.DEBUG){let n=e.map(wy);Kr.debug(`Firestore (${Ts}): ${t}`,...n)}}function Tn(t,...e){if(Kr.logLevel<=se.ERROR){let n=e.map(wy);Kr.error(`Firestore (${Ts}): ${t}`,...n)}}function ds(t,...e){if(Kr.logLevel<=se.WARN){let n=e.map(wy);Kr.warn(`Firestore (${Ts}): ${t}`,...n)}}function wy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function $(t="Unexpected state"){let e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function we(t,e){t||$()}function K(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends At{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ue.UNAUTHENTICATED))}shutdown(){}},Ug=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},jg=class{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>b(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new gl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Ue(e)}},Bg=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$g=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Bg(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new Hg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function AF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ml=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=AF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function hs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var He=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new He(0,0))}static max(){return new t(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(),r===void 0?r=e.length-n:r>e.length-n&&$(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ce=class t extends yl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},RF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vt=class t extends yl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return RF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};var zg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};zg.UNKNOWN_ID=-1;function MF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Qr(i,U.empty(),e)}function NF(t){return new Qr(t.readTime,t.key,-1)}var Qr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),U.empty(),-1)}static max(){return new t(Y.max(),U.empty(),-1)}};function xF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var PF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ea(t){return b(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==PF)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++c,c===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function OF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Da(t){return t.name==="IndexedDbTransactionError"}var oT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function $l(t){return t==null}function ua(t){return t===0&&1/t==-1/0}function kF(t){return typeof t=="number"&&Number.isInteger(t)&&!ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var FF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q4=[...FF,"documentOverlays"],VF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LF=VF,Y4=[...LF,"indexConfiguration","indexState","indexEntries"];function MC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ae=class t{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},on=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,r,i,s){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class t{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vl(this.data.getIterator())}getIteratorFrom(e){return new vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},vl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class t{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Xe(vt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _l=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _l("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var UF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(t){if(we(!!t),typeof t=="string"){let e=0,n=UF.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function Ey(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dy(t){let e=t.mapValue.fields.__previous_value__;return Ey(e)?Dy(e):e}function la(t){let e=bn(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}var Wg=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},Il=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ey(t)?4:cT(t)?9007199254740991:10:$()}function un(t,e){if(t===e)return!0;let n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return la(t).isEqual(la(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=bn(i.timestampValue),c=bn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return sr(i.bytesValue).isEqual(sr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Se(i.doubleValue),c=Se(s.doubleValue);return o===c?ua(o)===ua(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return hs(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(MC(o)!==MC(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!un(o[u],c[u])))return!1;return!0}(t,e);default:return $()}}function da(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function fs(t,e){if(t===e)return 0;let n=Yr(t),r=Yr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return NC(t.timestampValue,e.timestampValue);case 4:return NC(la(t),la(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let c=sr(s),u=sr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ge(c[l],u[l]);if(h!==0)return h}return ge(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ge(Se(s.latitude),Se(o.latitude));return c!==0?c:ge(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],u=o.values||[];for(let l=0;l<c.length&&l<u.length;++l){let h=fs(c[l],u[l]);if(h)return h}return ge(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===dl.mapValue&&o===dl.mapValue)return 0;if(s===dl.mapValue)return 1;if(o===dl.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let I=fs(c[u[p]],l[h[p]]);if(I!==0)return I}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw $()}}function NC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=bn(t),r=bn(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function ps(t){return Kg(t)}function Kg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Kg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Kg(n.fields[o])}`;return i+"}"}(t.mapValue):$()}function xC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qg(t){return!!t&&"integerValue"in t}function Cy(t){return!!t&&"arrayValue"in t}function PC(t){return!!t&&"nullValue"in t}function OC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fl(t){return!!t&&"mapValue"in t}function sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=sa(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){bs(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(sa(this.value))}};function uT(t){let e=[];return bs(t.fields,(n,r)=>{let i=new vt([n]);if(fl(r)){let s=uT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new rn(e)}var Ht=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),$t.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function kC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=fs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function FC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}var ms=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function jF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var wl=class{},Oe=class t extends wl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Jg(e,n,r):n==="array-contains"?new em(e,r):n==="in"?new tm(e,r):n==="not-in"?new nm(e,r):n==="array-contains-any"?new rm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Zg(e,r):new Xg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fs(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},qt=class t extends wl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return lT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function lT(t){return t.op==="and"}function dT(t){return BF(t)&&lT(t)}function BF(t){for(let e of t.filters)if(e instanceof qt)return!1;return!0}function Yg(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+ps(t.value);if(dT(t))return t.filters.map(e=>Yg(e)).join(",");{let e=t.filters.map(n=>Yg(n)).join(",");return`${t.op}(${e})`}}function hT(t,e){return t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof qt?function(r,i){return i instanceof qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&hT(o,i.filters[c]),!0):!1}(t,e):void $()}function fT(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${ps(n.value)}`}(t):t instanceof qt?function(n){return n.op.toString()+" {"+n.getFilters().map(fT).join(" ,")+"}"}(t):"Filter"}var Jg=class extends Oe{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Zg=class extends Oe{constructor(e,n){super(e,"in",n),this.keys=pT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Xg=class extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=pT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function pT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var em=class extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Cy(n)&&da(n.arrayValue,this.value)}},tm=class extends Oe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&da(this.value.arrayValue,n)}},nm=class extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!da(this.value.arrayValue,n)}},rm=class extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>da(this.value.arrayValue,r))}};var im=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function VC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new im(t,e,n,r,i,s,o)}function Ty(t){let e=K(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$l(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ps(r)).join(",")),e.ue=n}return e.ue}function by(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FC(t.startAt,e.startAt)&&FC(t.endAt,e.endAt)}function sm(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Jr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function $F(t,e,n,r,i,s,o,c){return new Jr(t,e,n,r,i,s,o,c)}function gT(t){return new Jr(t)}function LC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mT(t){return t.collectionGroup!==null}function oa(t){let e=K(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Xe(vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ms(s,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new ms(vt.keyField(),r))}return e.ce}function an(t){let e=K(t);return e.le||(e.le=HF(e,oa(t))),e.le}function HF(t,e){if(t.limitType==="F")return VC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ms(i.field,s)});let n=t.endAt?new gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gs(t.startAt.position,t.startAt.inclusive):null;return VC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function om(t,e){let n=t.filters.concat([e]);return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function am(t,e,n){return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return by(an(t),an(e))&&t.limitType===e.limitType}function yT(t){return`${Ty(an(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fT(i)).join(", ")}]`),$l(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ps(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function ql(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of oa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let l=kC(o,c,u);return o.inclusive?l<=0:l<0}(r.startAt,oa(r),i)||r.endAt&&!function(o,c,u){let l=kC(o,c,u);return o.inclusive?l>=0:l>0}(r.endAt,oa(r),i))}(t,e)}function qF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vT(t){return(e,n)=>{let r=!1;for(let i of oa(t)){let s=zF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zF(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?fs(u,l):$()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $()}}var or=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return aT(this.inner)}size(){return this.innerSize}};var GF=new Ae(U.comparator);function Sn(){return GF}var _T=new Ae(U.comparator);function ia(...t){let e=_T;for(let n of t)e=e.insert(n.key,n);return e}function IT(t){let e=_T;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gr(){return aa()}function wT(){return aa()}function aa(){return new or(t=>t.toString(),(t,e)=>t.isEqual(e))}var WF=new Ae(U.comparator),KF=new Xe(U.comparator);function oe(...t){let e=KF;for(let n of t)e=e.add(n);return e}var QF=new Xe(ge);function YF(){return QF}function ET(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ua(e)?"-0":e}}function DT(t){return{integerValue:""+t}}function JF(t,e){return kF(e)?DT(e):ET(t,e)}var ys=class{constructor(){this._=void 0}};function ZF(t,e,n){return t instanceof vs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ey(s)&&(s=Dy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Zr?TT(t,e):t instanceof Xr?bT(t,e):function(i,s){let o=CT(i,s),c=UC(o)+UC(i.Pe);return Qg(o)&&Qg(i.Pe)?DT(c):ET(i.serializer,c)}(t,e)}function XF(t,e,n){return t instanceof Zr?TT(t,e):t instanceof Xr?bT(t,e):n}function CT(t,e){return t instanceof _s?function(r){return Qg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var vs=class extends ys{},Zr=class extends ys{constructor(e){super(),this.elements=e}};function TT(t,e){let n=ST(e);for(let r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}var Xr=class extends ys{constructor(e){super(),this.elements=e}};function bT(t,e){let n=ST(e);for(let r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}var _s=class extends ys{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function UC(t){return Se(t.integerValue||t.doubleValue)}function ST(t){return Cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zr&&i instanceof Zr||r instanceof Xr&&i instanceof Xr?hs(r.elements,i.elements,un):r instanceof _s&&i instanceof _s?un(r.Pe,i.Pe):r instanceof vs&&i instanceof vs}(t.transform,e.transform)}var cm=class{constructor(e,n){this.version=e,this.transformResults=n}},rr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Is=class{};function AT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ha(t.key,rr.none()):new ei(t.key,t.data,rr.none());{let n=t.data,r=$t.empty(),i=new Xe(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new An(t.key,r,new rn(i.toArray()),rr.none())}}function tV(t,e,n){t instanceof ei?function(i,s,o){let c=i.value.clone(),u=BC(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof An?function(i,s,o){if(!pl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=BC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(RT(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof ei?function(s,o,c,u){if(!pl(s.precondition,o))return c;let l=s.value.clone(),h=$C(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof An?function(s,o,c,u){if(!pl(s.precondition,o))return c;let l=$C(s.fieldTransforms,u,o),h=o.data;return h.setAll(RT(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return pl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function nV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=CT(r.transform,i||null);s!=null&&(n===null&&(n=$t.empty()),n.set(r.field,s))}return n||null}function jC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hs(r,i,(s,o)=>eV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ei=class extends Is{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends Is{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function RT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function BC(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,XF(o,c,n[i]))}return r}function $C(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,ZF(s,o,e))}return r}var ha=class extends Is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},um=class extends Is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&tV(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=wT();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=AT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(n,r)=>jC(n,r))&&hs(this.baseMutations,e.baseMutations,(n,r)=>jC(n,r))}},dm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return WF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var hm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var xe,le;function rV(t){switch(t){default:return $();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function MT(t){if(t===void 0)return Tn("GRPC error has no .code"),R.UNKNOWN;switch(t){case xe.OK:return R.OK;case xe.CANCELLED:return R.CANCELLED;case xe.UNKNOWN:return R.UNKNOWN;case xe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case xe.INTERNAL:return R.INTERNAL;case xe.UNAVAILABLE:return R.UNAVAILABLE;case xe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case xe.NOT_FOUND:return R.NOT_FOUND;case xe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case xe.ABORTED:return R.ABORTED;case xe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case xe.DATA_LOSS:return R.DATA_LOSS;default:return $()}}(le=xe||(xe={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var HC=null;function iV(){return new TextEncoder}var sV=new nr([4294967295,4294967295],0);function qC(t){let e=iV().encode(t),n=new Sg;return n.update(e),new Uint8Array(n.digest())}function zC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nr([n,r],0),new nr([i,s],0)]}var pm=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wr(`Invalid padding: ${n}`);if(r<0)throw new Wr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=nr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(nr.fromNumber(r)));return i.compare(sV)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=qC(e),[r,i]=zC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=qC(e),[r,i]=zC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Wr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var El=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Ae(ge),Sn(),oe())}},fa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var us=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Dl=class{constructor(e,n){this.targetId=e,this.me=n}},Cl=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Tl=class{constructor(){this.fe=0,this.ge=WC(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$()}}),new fa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=WC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},gm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sn(),this.qe=GC(),this.Qe=new Ae(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(sm(s))if(r===0){let o=new U(s.path);this.Ue(n,o,Ht.newNoDocument(o,Y.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}HC?.et(function(h,p,m,I,A){var N,M,O,z,B,ae;let Te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},J=p.unchangedNames;return J&&(Te.bloomFilter={applied:A===0,hashCount:(N=J?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(z=(O=(M=J?.bits)===null||M===void 0?void 0:M.bitmap)===null||O===void 0?void 0:O.length)!==null&&z!==void 0?z:0,padding:(ae=(B=J?.bits)===null||B===void 0?void 0:B.padding)!==null&&ae!==void 0?ae:0,mightContain:E=>{var y;return(y=I?.mightContain(E))!==null&&y!==void 0&&y}}),Te}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=sr(r).toUint8Array()}catch(u){if(u instanceof _l)return ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new pm(o,i,s)}catch(u){return ds(u instanceof Wr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&sm(c.target)){let u=new U(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ht.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=oe();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new El(e,n,this.Qe,this.ke,r);return this.ke=Sn(),this.qe=GC(),this.Qe=new Ae(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Tl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function GC(){return new Ae(U.comparator)}function WC(){return new Ae(U.comparator)}var oV={asc:"ASCENDING",desc:"DESCENDING"},aV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cV={and:"AND",or:"OR"},mm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ym(t,e){return t.useProto3Json||$l(e)?e:{value:e}}function bl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uV(t,e){return bl(t,e.toTimestamp())}function cn(t){return we(!!t),Y.fromTimestamp(function(n){let r=bn(n);return new He(r.seconds,r.nanos)}(t))}function Sy(t,e){return vm(t,e).canonicalString()}function vm(t,e){let n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xT(t){let e=Ce.fromString(t);return we(VT(e)),e}function _m(t,e){return Sy(t.databaseId,e.path)}function Og(t,e){let n=xT(e);if(n.get(1)!==t.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(OT(n))}function PT(t,e){return Sy(t.databaseId,e)}function lV(t){let e=xT(t);return e.length===4?Ce.emptyPath():OT(e)}function Im(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OT(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function KC(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function dV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(l){let h=l.code===void 0?R.UNKNOWN:MT(l.code);return new k(h,l.message||"")}(o);n=new Cl(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Og(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):Y.min(),c=new $t({mapValue:{fields:r.document.fields}}),u=Ht.newFoundDocument(i,s,o,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new us(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Og(t,r.document),s=r.readTime?cn(r.readTime):Y.min(),o=Ht.newNoDocument(i,s),c=r.removedTargetIds||[];n=new us([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Og(t,r.document),s=r.removedTargetIds||[];n=new us([],s,i,null)}else{if(!("filter"in e))return $();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new fm(i,s),c=r.targetId;n=new Dl(c,o)}}return n}function hV(t,e){let n;if(e instanceof ei)n={update:KC(t,e.key,e.value)};else if(e instanceof ha)n={delete:_m(t,e.key)};else if(e instanceof An)n={update:KC(t,e.key,e.data),updateMask:wV(e.fieldMask)};else{if(!(e instanceof um))return $();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof vs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _s)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:uV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(t,e.precondition)),n}function fV(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(Y.min())&&(o=cn(s)),new cm(o,i.transformResults||[])}(n,e))):[]}function pV(t,e){return{documents:[PT(t,e.path)]}}function gV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PT(t,i);let s=function(l){if(l.length!==0)return FT(qt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ss(m.field),direction:vV(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=ym(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function mV(t){let e=lV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=kT(p);return m instanceof qt&&dT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new ms(os(A.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,$l(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,I=p.values||[];return new gs(I,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,I=p.values||[];return new gs(I,m)}(n.endAt)),$F(e,i,o,s,c,"F",u,l)}function yV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=os(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=os(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=os(n.unaryFilter.field);return Oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=os(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qt.create(n.compositeFilter.filters.map(r=>kT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function vV(t){return oV[t]}function _V(t){return aV[t]}function IV(t){return cV[t]}function ss(t){return{fieldPath:t.canonicalString()}}function os(t){return vt.fromServerFormat(t.fieldPath)}function FT(t){return t instanceof Oe?function(n){if(n.op==="=="){if(OC(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(PC(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OC(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(PC(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:_V(n.op),value:n.value}}}(t):t instanceof qt?function(n){let r=n.getFilters().map(i=>FT(i));return r.length===1?r[0]:{compositeFilter:{op:IV(n.op),filters:r}}}(t):$()}function wV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var pa=class t{constructor(e,n,r,i,s=Y.min(),o=Y.min(),c=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wm=class{constructor(e){this.ct=e}};function EV(t){let e=mV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?am(e,e.limit,"L"):e}var Sl=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ua(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=bn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(sr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?cT(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):$()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),U.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Sl.bt=new Sl;var Em=class{constructor(){this._n=new Dm}addToCollectionParentIndex(e,n){return this._n.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Qr.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Dm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Ce.comparator)).toArray()}};var Z4=new Uint8Array(0);var nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var ga=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Cm=class{constructor(){this.changes=new or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var bm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ca(r.mutation,i,rn.empty(),He.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=Gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ia();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Sn(),o=aa(),c=function(){return aa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof An)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ca(h.mutation,l,h.mutation.getFieldMask(),He.now())):o.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new Tm(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=aa(),i=new Ae((o,c)=>o-c),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||rn.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||oe()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=wT();h.forEach(m=>{if(!s.has(m)){let I=AT(n.get(m),r.get(m));I!==null&&p.set(m,I),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Gr()),c=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,oe())).next(h=>({batchId:c,changes:IT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=ia();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ia();return this.indexManager.getCollectionParents(e,s).next(c=>x.forEach(c,u=>{let l=function(p,m){return new Jr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let c=ia();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&ca(h.mutation,l,rn.empty(),He.now()),ql(n,l)&&(c=c.insert(u,l))}),c})}};var Sm=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:EV(i.bundledQuery),readTime:cn(i.readTime)}}(n)),x.resolve()}};var Am=class{constructor(){this.overlays=new Ae(U.comparator),this.hr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Gr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Gr(),s=n.length+1,o=new U(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Gr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Gr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return x.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hm(n,r));let s=this.hr.get(n);s===void 0&&(s=oe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ma=class{constructor(){this.Pr=new Xe(Pe.Ir),this.Tr=new Xe(Pe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Pe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new U(new Ce([])),r=new Pe(n,e),i=new Pe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new U(new Ce([])),r=new Pe(n,e),i=new Pe(n,e+1),s=oe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Pe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return U.comparator(e.key,n.key)||ge(e.pr,n.pr)}static Er(e,n){return ge(e.pr,n.pr)||U.comparator(e.key,n.key)}};var Rm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Xe(Pe.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lm(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new Pe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ge);return n.forEach(i=>{let s=new Pe(i,0),o=new Pe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new Pe(new U(s),0),c=new Xe(ge);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.pr)),!0)},o),x.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,i=>{let s=new Pe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Pe(n,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Mm=class{constructor(e){this.vr=e,this.docs=function(){return new Ae(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Sn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sn(),o=n.path,c=new U(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||xF(NF(h),r)<=0||(i.has(h.key)||ql(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$()}Fr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Nm(this)}getSize(e){return x.resolve(this.size)}},Nm=class extends Cm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var xm=class{constructor(e){this.persistence=e,this.Mr=new or(n=>Ty(n),by),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ma,this.targetCount=0,this.Lr=ga.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ga(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.qn(n),x.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Nr.containsKey(n))}};var Pm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new oT(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xm(this),this.indexManager=new Em,this.remoteDocumentCache=function(i){return new Mm(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new wm(n),this.$r=new Sm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Am,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Rm(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Om(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Om=class extends Gg{constructor(e){super(),this.currentSequenceNumber=e}},km=class t{constructor(e){this.persistence=e,this.zr=new ma,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw $()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{let i=U.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Fm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=oe(),i=oe();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Vm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Lm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ID()?8:OF(yt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Vm;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ra()<=se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(ra()<=se.DEBUG&&V("QueryEngine","Query:",is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ra()<=se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):x.resolve())}ji(e,n){if(LC(n))return x.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=am(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=oe(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,c);return this.Xi(n,l,o,u.readTime)?this.ji(e,am(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return LC(n)||i.isEqual(Y.min())?x.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?x.resolve(null):(ra()<=se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),is(n)),this.es(e,o,n,MF(i,-1)).next(c=>c))})}Zi(e,n){let r=new Xe(vT(e));return n.forEach((i,s)=>{ql(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ra()<=se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",is(n)),this.zi.getDocumentsMatchingQuery(e,n,Qr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Um=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ae(ge),this.rs=new or(s=>Ty(s),by),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function DV(t,e,n,r){return new Um(t,e,n,r)}function LT(t,e){return b(this,null,function*(){let n=K(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=oe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:c}))})})})}function CV(t,e){let n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),I=x.resolve();return m.forEach(A=>{I=I.next(()=>h.getEntry(u,A)).next(N=>{let M=l.docVersions.get(A);we(M!==null),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UT(t){let e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function TV(t,e){let n=K(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,p)));let I=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(st.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(p,I),function(N,M,O){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,I,h)&&c.push(n.Qr.updateTargetData(s,I))});let u=Sn(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(bV(s,o,e.documentUpdates).next(h=>{u=h.cs,l=h.ls})),!r.isEqual(Y.min())){let h=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return x.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function bV(t,e,n){let r=oe(),i=oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sn();return n.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):V("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function SV(t,e){let n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AV(t,e){let n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new pa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function jm(t,e,n){return b(this,null,function*(){let r=K(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Da(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function QC(t,e,n){let r=K(t),i=Y.min(),s=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=K(u),m=p.rs.get(h);return m!==void 0?x.resolve(p.ns.get(m)):p.Qr.getTargetData(l,h)}(r,o,an(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:oe())).next(c=>(RV(r,qF(e),c),{documents:c,hs:s})))}function RV(t,e,n){let r=t.ss.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Al=class{constructor(){this.activeTargetIds=YF()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bm=class{constructor(){this.no=new Al,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Al,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $m=class{io(e){}shutdown(){}};var Rl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hl=null;function kg(){return hl===null?hl=function(){return 268435456+Math.round(2147483648*Math.random())}():hl++,"0x"+hl.toString(16)}var MV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Hm=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ze="WebChannelConnection",qm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let c=kg(),u=this.vo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw ds("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}xo(n,r,i,s,o,c){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=MV[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=kg();return new Promise((o,c)=>{let u=new Ag;u.setWithCredentials(!0),u.listenOnce(Mg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case na.NO_ERROR:let h=u.getResponseJson();V(Ze,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case na.TIMEOUT:V(Ze,`RPC '${e}' ${s} timed out`),c(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case na.HTTP_ERROR:let p=u.getStatus();if(V(Ze,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let A=function(M){let O=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(O)>=0?O:R.UNKNOWN}(I.status);c(new k(A,I.message))}else c(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new k(R.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{V(Ze,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(Ze,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=kg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pg(),c=xg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Rg({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(Ze,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,I=!1,A=new Hm({lo:M=>{I?V(Ze,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(V(Ze,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(Ze,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},ho:()=>p.close()}),N=(M,O,z)=>{M.listen(O,B=>{try{z(B)}catch(ae){setTimeout(()=>{throw ae},0)}})};return N(p,rs.EventType.OPEN,()=>{I||(V(Ze,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),N(p,rs.EventType.CLOSE,()=>{I||(I=!0,V(Ze,`RPC '${e}' stream ${i} transport closed`),A.po())}),N(p,rs.EventType.ERROR,M=>{I||(I=!0,ds(Ze,`RPC '${e}' stream ${i} transport errored:`,M),A.po(new k(R.UNAVAILABLE,"The operation could not be completed")))}),N(p,rs.EventType.MESSAGE,M=>{var O;if(!I){let z=M.data[0];we(!!z);let B=z,ae=B.error||((O=B[0])===null||O===void 0?void 0:O.error);if(ae){V(Ze,`RPC '${e}' stream ${i} received error:`,ae);let Te=ae.status,J=function(v){let w=xe[v];if(w!==void 0)return MT(w)}(Te),E=ae.message;J===void 0&&(J=R.INTERNAL,E="Unknown error status: "+Te+" with message "+ae.message),I=!0,A.po(new k(J,E)),p.close()}else V(Ze,`RPC '${e}' stream ${i} received:`,z),A.yo(z)}}),N(c,Ng.STAT_EVENT,M=>{M.stat===ll.PROXY?V(Ze,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===ll.NOPROXY&&V(Ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function Fg(){return typeof document<"u"?document:null}function zl(t){return new mm(t,!0)}var Ml=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Nl=class{constructor(e,n,r,i,s,o,c,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ml(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return b(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return b(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return b(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>b(this,null,function*(){this.state=0,this.start()}))}c_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zm=class extends Nl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=dV(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?cn(o.readTime):Y.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Im(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=sm(u)?{documents:pV(s,u)}:{query:gV(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=NT(s,o.resumeToken);let l=ym(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=bl(s,o.snapshotVersion.toTimestamp());let l=ym(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=yV(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Im(this.serializer),n.removeTarget=e,this.i_(n)}},Gm=class extends Nl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=fV(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.A_(r,n)}return we(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Im(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>hV(this.serializer,r))};this.i_(n)}};var Wm=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,vm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,vm(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Km=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tn(n),this.y_=!1):V("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Qm=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>b(this,null,function*(){ti(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return b(this,null,function*(){let l=K(u);l.M_.add(4),yield Ca(l),l.N_.set("Unknown"),l.M_.delete(4),yield Gl(l)})}(this))}))}),this.N_=new Km(r,i)}};function Gl(t){return b(this,null,function*(){if(ti(t))for(let e of t.x_)yield e(!0)})}function Ca(t){return b(this,null,function*(){for(let e of t.x_)yield e(!1)})}function jT(t,e){let n=K(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ny(n)?My(n):Ss(n).Xo()&&Ry(n,e))}function Ay(t,e){let n=K(t),r=Ss(n);n.F_.delete(e),r.Xo()&&BT(n,e),n.F_.size===0&&(r.Xo()?r.n_():ti(n)&&n.N_.set("Unknown"))}function Ry(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ss(t).P_(e)}function BT(t,e){t.L_.xe(e),Ss(t).I_(e)}function My(t){t.L_=new gm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ss(t).start(),t.N_.w_()}function Ny(t){return ti(t)&&!Ss(t).Zo()&&t.F_.size>0}function ti(t){return K(t).M_.size===0}function $T(t){t.L_=void 0}function NV(t){return b(this,null,function*(){t.N_.set("Online")})}function xV(t){return b(this,null,function*(){t.F_.forEach((e,n)=>{Ry(t,e)})})}function PV(t,e){return b(this,null,function*(){$T(t),Ny(t)?(t.N_.D_(e),My(t)):t.N_.set("Unknown")})}function OV(t,e,n){return b(this,null,function*(){if(t.N_.set("Online"),e instanceof Cl&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xl(t,r)}else if(e instanceof us?t.L_.Ke(e):e instanceof Dl?t.L_.He(e):t.L_.We(e),!n.isEqual(Y.min()))try{let r=yield UT(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.F_.get(l);h&&s.F_.set(l,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),BT(s,u);let p=new pa(h.target,u,l,h.sequenceNumber);Ry(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield xl(t,r)}})}function xl(t,e,n){return b(this,null,function*(){if(!Da(e))throw e;t.M_.add(1),yield Ca(t),t.N_.set("Offline"),n||(n=()=>UT(t.localStore)),t.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Gl(t)}))})}function HT(t,e){return e().catch(n=>xl(t,n,e))}function Wl(t){return b(this,null,function*(){let e=K(t),n=ar(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;kV(e);)try{let i=yield SV(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,FV(e,i)}catch(i){yield xl(e,i)}qT(e)&&zT(e)})}function kV(t){return ti(t)&&t.v_.length<10}function FV(t,e){t.v_.push(e);let n=ar(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function qT(t){return ti(t)&&!ar(t).Zo()&&t.v_.length>0}function zT(t){ar(t).start()}function VV(t){return b(this,null,function*(){ar(t).V_()})}function LV(t){return b(this,null,function*(){let e=ar(t);for(let n of t.v_)e.d_(n.mutations)})}function UV(t,e,n){return b(this,null,function*(){let r=t.v_.shift(),i=dm.from(r,e,n);yield HT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Wl(t)})}function jV(t,e){return b(this,null,function*(){e&&ar(t).E_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return rV(o)&&o!==R.ABORTED}(i.code)){let s=r.v_.shift();ar(r).t_(),yield HT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Wl(r)}})}(t,e)),qT(t)&&zT(t)})}function YC(t,e){return b(this,null,function*(){let n=K(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=ti(n);n.M_.add(3),yield Ca(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Gl(n)})}function BV(t,e){return b(this,null,function*(){let n=K(t);e?(n.M_.delete(2),yield Gl(n)):e||(n.M_.add(2),yield Ca(n),n.N_.set("Unknown"))})}function Ss(t){return t.B_||(t.B_=function(n,r,i){let s=K(n);return s.f_(),new zm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:NV.bind(null,t),To:xV.bind(null,t),Ao:PV.bind(null,t),h_:OV.bind(null,t)}),t.x_.push(e=>b(this,null,function*(){e?(t.B_.t_(),Ny(t)?My(t):t.N_.set("Unknown")):(yield t.B_.stop(),$T(t))}))),t.B_}function ar(t){return t.k_||(t.k_=function(n,r,i){let s=K(n);return s.f_(),new Gm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:VV.bind(null,t),Ao:jV.bind(null,t),R_:LV.bind(null,t),A_:UV.bind(null,t)}),t.x_.push(e=>b(this,null,function*(){e?(t.k_.t_(),yield Wl(t)):(yield t.k_.stop(),t.v_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Ym=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xy(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),Da(t))return new k(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Pl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=ia(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ol=class{constructor(){this.q_=new Ae(U.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):$():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ws=class t{constructor(e,n,r,i,s,o,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Pl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Jm=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Zm=class{constructor(){this.queries=new or(e=>yT(e),Hl),this.onlineState="Unknown",this.z_=new Set}};function $V(t,e){return b(this,null,function*(){let n=K(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Jm,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=xy(o,`Initialization of query '${is(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Py(n)})}function HV(t,e){return b(this,null,function*(){let n=K(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function qV(t,e){let n=K(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&Py(n)}function zV(t,e,n){let r=K(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function Py(t){t.z_.forEach(e=>{e.next()})}var Xm,JC;(JC=Xm||(Xm={})).J_="default",JC.Cache="cache";var ey=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Xm.Cache}};var kl=class{constructor(e){this.key=e}},Fl=class{constructor(e){this.key=e}},ty=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=oe(),this.mutatedKeys=oe(),this.Ia=vT(e),this.Ta=new Pl(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Ol,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),I=ql(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),N=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),M=!1;m&&I?m.data.isEqual(I.data)?A!==N&&(r.track({type:3,doc:I}),M=!0):this.Ra(m,I)||(r.track({type:2,doc:I}),M=!0,(u&&this.Ia(I,u)>0||l&&this.Ia(I,l)<0)&&(c=!0)):!m&&I?(r.track({type:0,doc:I}),M=!0):m&&!I&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(c=!0)),M&&(I?(o=o.add(I),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((h,p)=>function(I,A){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return N(I)-N(A)}(h.type,p.type)||this.Ia(h.doc,p.doc)),this.Va(r),i=i!=null&&i;let c=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new ws(this.query,e.Ta,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ol,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=oe(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Fl(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new kl(r))}),n}pa(e){this.la=e.hs,this.Pa=oe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ws.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ny=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ry=class{constructor(e){this.key=e,this.wa=!1}},iy=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new or(c=>yT(c),Hl),this.Da=new Map,this.Ca=new Set,this.va=new Ae(U.comparator),this.Fa=new Map,this.Ma=new ma,this.xa={},this.Oa=new Map,this.Na=ga.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function GV(t,e,n=!0){return b(this,null,function*(){let r=JT(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield GT(r,e,n,!0),i})}function WV(t,e){return b(this,null,function*(){let n=JT(t);yield GT(n,e,!0,!1)})}function GT(t,e,n,r){return b(this,null,function*(){let i=yield AV(t.localStore,an(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield KV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jT(t.remoteStore,i),c})}function KV(t,e,n,r,i){return b(this,null,function*(){t.Ba=(p,m,I)=>function(N,M,O,z){return b(this,null,function*(){let B=M.view.da(O);B.Xi&&(B=yield QC(N.localStore,M.query,!1).then(({documents:E})=>M.view.da(E,B)));let ae=z&&z.targetChanges.get(M.targetId),Te=z&&z.targetMismatches.get(M.targetId)!=null,J=M.view.applyChanges(B,N.isPrimaryClient,ae,Te);return XC(N,M.targetId,J.fa),J.snapshot})}(t,p,m,I);let s=yield QC(t.localStore,e,!0),o=new ty(e,s.hs),c=o.da(s.documents),u=fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(c,t.isPrimaryClient,u);XC(t,n,l.fa);let h=new ny(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function QV(t,e,n){return b(this,null,function*(){let r=K(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Hl(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ay(r.remoteStore,i.targetId),sy(r,i.targetId)}).catch(Ea))):(sy(r,i.targetId),yield jm(r.localStore,i.targetId,!0))})}function YV(t,e){return b(this,null,function*(){let n=K(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ay(n.remoteStore,r.targetId))})}function JV(t,e,n){return b(this,null,function*(){let r=iL(t);try{let i=yield function(o,c){let u=K(o),l=He.now(),h=c.reduce((I,A)=>I.add(A.key),oe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let A=Sn(),N=oe();return u.os.getEntries(I,h).next(M=>{A=M,A.forEach((O,z)=>{z.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,A)).next(M=>{p=M;let O=[];for(let z of c){let B=nV(z,p.get(z.key).overlayedDocument);B!=null&&O.push(new An(z.key,B,uT(B.value.mapValue),rr.exists(!0)))}return u.mutationQueue.addMutationBatch(I,l,O,c)}).next(M=>{m=M;let O=M.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(I,M.batchId,O)})}).then(()=>({batchId:m.batchId,changes:IT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ae(ge)),l=l.insert(c,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ta(r,i.changes),yield Wl(r.remoteStore)}catch(i){let s=xy(i,"Failed to persist write");n.reject(s)}})}function WT(t,e){return b(this,null,function*(){let n=K(t);try{let r=yield TV(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?we(o.wa):i.removedDocuments.size>0&&(we(o.wa),o.wa=!1))}),yield Ta(n,r,e)}catch(r){yield Ea(r)}})}function ZC(t,e,n){let r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=K(o);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(c)&&(l=!0)}),l&&Py(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZV(t,e,n){return b(this,null,function*(){let r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ae(U.comparator);o=o.insert(s,Ht.newNoDocument(s,Y.min()));let c=oe().add(s),u=new El(Y.min(),new Map,new Ae(ge),o,c);yield WT(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Oy(r)}else yield jm(r.localStore,e,!1).then(()=>sy(r,e,n)).catch(Ea)})}function XV(t,e){return b(this,null,function*(){let n=K(t),r=e.batch.batchId;try{let i=yield CV(n.localStore,e);QT(n,r,null),KT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ta(n,i)}catch(i){yield Ea(i)}})}function eL(t,e,n){return b(this,null,function*(){let r=K(t);try{let i=yield function(o,c){let u=K(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);QT(r,e,n),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ta(r,i)}catch(i){yield Ea(i)}})}function KT(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function QT(t,e,n){let r=K(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function sy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||YT(t,r)})}function YT(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Ay(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Oy(t))}function XC(t,e,n){for(let r of n)r instanceof kl?(t.Ma.addReference(r.key,e),tL(t,r)):r instanceof Fl?(V("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||YT(t,r.key)):$()}function tL(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(V("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Oy(t))}function Oy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new U(Ce.fromString(e)),r=t.Na.next();t.Fa.set(r,new ry(n)),t.va=t.va.insert(n,r),jT(t.remoteStore,new pa(an(gT(n.path)),r,"TargetPurposeLimboResolution",oT.oe))}}function Ta(t,e,n){return b(this,null,function*(){let r=K(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,u)=>{o.push(r.Ba(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=Fm.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return b(this,null,function*(){let h=K(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.qi,I=>h.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>x.forEach(m.Qi,I=>h.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!Da(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let I=h.ns.get(m),A=I.snapshotVersion,N=I.withLastLimboFreeSnapshotVersion(A);h.ns=h.ns.insert(m,N)}}})}(r.localStore,s))})}function nL(t,e){return b(this,null,function*(){let n=K(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield LT(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(u=>{u.reject(new k(R.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ta(n,r.us)}})}function rL(t,e){let n=K(t),r=n.Fa.get(e);if(r&&r.wa)return oe().add(r.key);{let i=oe(),s=n.Da.get(e);if(!s)return i;for(let o of s){let c=n.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function JT(t){let e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,e),e.Sa.h_=qV.bind(null,e.eventManager),e.Sa.ka=zV.bind(null,e.eventManager),e}function iL(t){let e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eL.bind(null,e),e}var Vl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=zl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return DV(this.persistence,new Lm,e.initialUser,this.serializer)}createPersistence(e){return new Pm(km.Hr,this.serializer)}createSharedClientState(e){return new Bm}terminate(){return b(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var oy=class{initialize(e,n){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nL.bind(null,this.syncEngine),yield BV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Zm}()}createDatastore(e){let n=zl(e.databaseInfo.databaseId),r=function(s){return new qm(s)}(e.databaseInfo);return function(s,o,c,u){return new Wm(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new Qm(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ZC(this.syncEngine,n,0),function(){return Rl.D()?new Rl:new $m}())}createSyncEngine(e,n){return function(i,s,o,c,u,l,h){let p=new iy(i,s,o,c,u,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return b(this,null,function*(){var e;yield function(r){return b(this,null,function*(){let i=K(r);V("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Ca(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var ay=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var cy=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=ml.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>b(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=xy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vg(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield LT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function eT(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield oL(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YC(e.remoteStore,i)),t._onlineComponents=e})}function sL(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function oL(t){return b(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!sL(n))throw n;ds("Error using user provided cache. Falling back to memory cache: "+n),yield Vg(t,new Vl)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Vg(t,new Vl);return t._offlineComponents})}function ZT(t){return b(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield eT(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield eT(t,new oy))),t._onlineComponents})}function aL(t){return ZT(t).then(e=>e.syncEngine)}function cL(t){return b(this,null,function*(){let e=yield ZT(t),n=e.eventManager;return n.onListen=GV.bind(null,e.syncEngine),n.onUnlisten=QV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YV.bind(null,e.syncEngine),n})}function uL(t,e,n={}){let r=new sn;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,c,u,l){let h=new ay({next:m=>{o.enqueueAndForget(()=>HV(s,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ey(c,h,{includeMetadataChanges:!0,ra:!0});return $V(s,p)}(yield cL(t),t.asyncQueue,e,n,r)})),r.promise}function XT(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var tT=new Map;function eb(t,e,n){if(!n)throw new k(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lL(t,e,n,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nT(t){if(!U.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rT(t){if(U.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function ya(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Kl(t);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ll=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Es=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ll({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ll(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lg;switch(r.type){case"firstParty":return new $g(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=tT.get(n);r&&(V("ComponentProvider","Removing Datastore"),tT.delete(n),r.terminate())}(this),Promise.resolve()}};function tb(t,e,n,r={}){var i;let s=(t=ya(t,Es))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ue.MOCK_USER;else{c=mD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ue(l)}t._authCredentials=new Ug(new gl(c,u))}}var Ds=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ir=class t extends Ds{constructor(e,n,r){super(e,n,gT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function nb(t,e,...n){if(t=Rt(t),eb("collection","path",e),t instanceof Es){let r=Ce.fromString(e,...n);return rT(r),new ir(t,null,r)}{if(!(t instanceof Nt||t instanceof ir))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return rT(r),new ir(t.firestore,null,r)}}function rb(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=ml.newId()),eb("doc","path",e),t instanceof Es){let r=Ce.fromString(e,...n);return nT(r),new Nt(t,null,new U(r))}{if(!(t instanceof Nt||t instanceof ir))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return nT(r),new Nt(t.firestore,t instanceof ir?t.converter:null,new U(r))}}var uy=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ml(this,"async_queue_retry"),this.hu=()=>{let n=Fg();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Fg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new sn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return b(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Da(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=Ym.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&$()}verifyOperationInProgress(){}du(){return b(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Cs=class extends Es{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new uy}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ob(this),this._firestoreClient.terminate()}};function ib(t,e){let n=typeof t=="object"?t:$o(),r=typeof t=="string"?t:e||"(default)",i=ng(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=pD("firestore");s&&tb(i,...s)}return i}function sb(t){return t._firestoreClient||ob(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ob(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,h){return new Wg(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new cy(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var va=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _a=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ul=class{constructor(e){this._methodName=e}};var Ia=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var dL=/^__.*__$/,ly=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,n,this.fieldTransforms):new ei(e,this.data,n,this.fieldTransforms)}};function ab(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var dy=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return jl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ab(this.fu)&&dL.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},hy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zl(e)}Fu(e,n,r,i=!1){return new dy({fu:e,methodName:n,vu:r,path:vt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cb(t){let e=t._freezeSettings(),n=zl(t._databaseId);return new hy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hL(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);db("Data must be an object, but it was:",o,r);let c=ub(r,o),u,l;if(s.merge)u=new rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=pL(e,p,n);if(!o.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mL(h,m)||h.push(m)}u=new rn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new ly(new $t(c),u,l)}function fL(t,e,n,r=!1){return ky(n,t.Fu(r?4:3,e))}function ky(t,e){if(lb(t=Rt(t)))return db("Unsupported field value:",e,t),ub(t,e);if(t instanceof Ul)return function(r,i){if(!ab(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=ky(c,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=He.fromDate(r);return{timestampValue:bl(i.serializer,s)}}if(r instanceof He){let s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bl(i.serializer,s)}}if(r instanceof Ia)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof va)return{bytesValue:NT(i.serializer,r._byteString)};if(r instanceof Nt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Kl(r)}`)}(t,e)}function ub(t,e){let n={};return aT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,(r,i)=>{let s=ky(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Ia||t instanceof va||t instanceof Nt||t instanceof Ul)}function db(t,e,n){if(!lb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Kl(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function pL(t,e,n){if((e=Rt(e))instanceof _a)return e._internalPath;if(typeof e=="string")return hb(t,e);throw jl("Field path arguments must be of type string or ",t,!1,void 0,n)}var gL=new RegExp("[~\\*/\\[\\]]");function hb(t,e,n){if(e.search(gL)>=0)throw jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _a(...e.split("."))._internalPath}catch{throw jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jl(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,c+t+u)}function mL(t,e){return t.some(n=>n.isEqual(e))}var Bl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(fb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},fy=class extends Bl{data(){return super.data()}};function fb(t,e){return typeof e=="string"?hb(t,e):e instanceof _a?e._internalPath:e._delegate._internalPath}function yL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wa=class{},py=class extends wa{};function pb(t,e,...n){let r=[];e instanceof wa&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof my).length,c=s.filter(u=>u instanceof gy).length;if(o>1||o>0&&c>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var gy=class t extends py{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return gb(e._query,n),new Ds(e.firestore,e.converter,om(e._query,n))}_parse(e){let n=cb(e.firestore);return function(s,o,c,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){sT(p,h);let I=[];for(let A of p)I.push(iT(u,s,A));m={arrayValue:{values:I}}}else m=iT(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||sT(p,h),m=fL(c,o,p,h==="in"||h==="not-in");return Oe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var my=class t extends wa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)gb(o,u),o=om(o,u)}(e._query,n),new Ds(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function iT(t,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&n.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!U.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xC(t,new U(r))}if(n instanceof Nt)return xC(t,n._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kl(n)}.`)}function sT(t,e){if(!Array.isArray(t)||t.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gb(t,e){let n=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var yy=class{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return bs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ia(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Dy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){let n=bn(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);we(VT(r));let i=new Il(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function vL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var cs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},vy=class extends Bl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(fb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ls=class extends vy{data(e={}){return super.data(e)}},_y=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ls(this._firestore,this._userDataWriter,r.key,r,new cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new ls(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new ls(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cs(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:_L(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _L(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}var Iy=class extends yy{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}};function mb(t){t=ya(t,Ds);let e=ya(t.firestore,Cs),n=sb(e),r=new Iy(e);return yL(t._query),uL(n,t._query).then(i=>new _y(e,r,t,i))}function Fy(t){return vb(ya(t.firestore,Cs),[new ha(t._key,rr.none())])}function yb(t,e){let n=ya(t.firestore,Cs),r=rb(t),i=vL(t.converter,e);return vb(n,[hL(cb(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}function vb(t,e){return function(r,i){let s=new sn;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return JV(yield aL(r),i,s)})),s.promise}(sb(t),e)}(function(e,n=!0){(function(i){Ts=i})(Zi),Xn(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Cs(new jg(r.getProvider("auth-internal")),new qg(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Le(RC,"4.6.3",e),Le(RC,"4.6.3","esm2017")})();var ni=class{constructor(e){return e}},_b="firestore",Vy=class{constructor(){return Ko(_b)}};var Ly=new G("angularfire2.firestore-instances");function IL(t,e){let n=dg(_b,t,e);return n&&new ni(n)}function wL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ni(r)}}var EL={provide:Vy,deps:[[new Yt,Ly]]},DL={provide:ni,useFactory:IL,deps:[[new Yt,Ly],Hr]};function Ib(t,...e){return Le("angularfire",ns.full,"fst"),$n([DL,EL,{provide:Ly,useFactory:wL(t),multi:!0,deps:[Ie,Jt,Qo,Yo,[new Yt,cl],[new Yt,Wo],...e]}])}var wb=er(yb,!0);var Ql=er(nb,!0);var Uy=er(mb,!0);var Eb=er(ib,!0);var jy=er(pb,!0);var Yl=(()=>{let e=class e{constructor(r){this.firestore=r}deleteToDos(r){return b(this,null,function*(){(yield Uy(jy(Ql(this.firestore,"ToDos")))).docs.map(i=>{i.data().title===r&&Fy(i.ref)})})}getToDos(){return b(this,null,function*(){return(yield Uy(jy(Ql(this.firestore,"ToDos")))).docs.map(r=>r.data())})}addToDo(r){wb(Ql(this.firestore,"ToDos"),Object.assign({},r))}deleteToDo(){}};e.\u0275fac=function(i){return new(i||e)(te(ni))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Cb=(()=>{let e=class e{constructor(r){this.toDoService=r,this.todo=new Bu}saveToDo(){this.toDoService.addToDo(this.todo)}};e.\u0275fac=function(i){return new(i||e)(fe(Yl))},e.\u0275cmp=Et({type:e,selectors:[["app-new-to-do"]],standalone:!0,features:[Tt],decls:6,vars:2,consts:[["id","txtTitle","name","txtTitle","type","text","placeholder","Titulo",3,"ngModelChange","ngModel"],["id","txtContent","name","txtContent","type","text","placeholder","Descripcion",3,"ngModelChange","ngModel"],["routerLink","/todo",3,"click"]],template:function(i,s){i&1&&(ct(0,"section")(1,"form")(2,"input",0),hu("ngModelChange",function(c){return kf(s.todo.title,c)||(s.todo.title=c),c}),ut(),ct(3,"input",1),hu("ngModelChange",function(c){return kf(s.todo.content,c)||(s.todo.content=c),c}),ut(),ct(4,"button",2),Zt("click",function(){return s.saveToDo()}),wn(5,"Guardar"),ut()()()),i&2&&(Rr(2),du("ngModel",s.todo.title),Rr(),du("ngModel",s.todo.content))},dependencies:[aC,oC,Ku,XD,eC,ug,cg,Qi],styles:["section[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:800px}"]});let t=e;return t})();var TL=(t,e)=>e.title;function bL(t,e){if(t&1){let n=eE();ct(0,"li")(1,"strong"),wn(2),ut(),ct(3,"p"),wn(4),ut(),ct(5,"button",1),Zt("click",function(){let i=UI(n).$implicit,s=nE();return jI(s.delete(i.title))}),wn(6,"Eliminar"),ut()()}if(t&2){let n=e.$implicit;Rr(2),lu(n.title),Rr(2),lu(n.content)}}var Tb=(()=>{let e=class e{constructor(r){this.ToDoService=r}ngOnInit(){this.getTodos()}getTodos(){return b(this,null,function*(){this.Todos=yield this.ToDoService.getToDos()})}delete(r){return b(this,null,function*(){yield this.ToDoService.deleteToDos(r),this.getTodos()})}};e.\u0275fac=function(i){return new(i||e)(fe(Yl))},e.\u0275cmp=Et({type:e,selectors:[["app-todo"]],standalone:!0,features:[Tt],decls:6,vars:0,consts:[["routerLink","/newtodo"],[3,"click"]],template:function(i,s){i&1&&(ct(0,"section")(1,"ul"),Zw(2,bL,7,2,"li",null,TL),ut(),ct(4,"button",0),wn(5,"A\xF1adir"),ut()()),i&2&&(Rr(2),Xw(s.Todos))},dependencies:[Qi],styles:["section[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:800px}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{padding:10px;background:#409ae4;margin:5px;border-radius:5px;color:#fff;display:flex;justify-content:space-around}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}strong[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});let t=e;return t})();var bb=[{path:"",redirectTo:"/todo",pathMatch:"full"},{path:"newtodo",component:Cb},{path:"todo",component:Tb}];var SL={apiKey:"AIzaSyA10XJ6N6Cwy1SDx5MxiqR6cbawGcBN08k",authDomain:"eva64campoverdeoscar.firebaseapp.com",projectId:"eva64campoverdeoscar",storageBucket:"eva64campoverdeoscar.appspot.com",messagingSenderId:"23194165894",appId:"1:23194165894:web:adc465443861c41d86a707"},Sb={providers:[uD(bb),cC(()=>Uu(SL)),Ib(()=>Eb())]};var Ab=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Et({type:e,selectors:[["app-header"]],standalone:!0,features:[Tt],decls:5,vars:0,consts:[["routerLink","todo"]],template:function(i,s){i&1&&(ct(0,"nav")(1,"ul")(2,"li")(3,"a",0),wn(4,"Home"),ut()()()())},dependencies:[Qi],styles:["nav[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:10px;display:flex;justify-content:space-between;align-items:center}ul[_ngcontent-%COMP%]{display:flex;list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:10px}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let t=e;return t})();var Rb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Et({type:e,selectors:[["app-body"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,s){i&1&&Nr(0,"router-outlet")},dependencies:[Sp],styles:["section[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:800px}button[_ngcontent-%COMP%]{background-color:#3289d1;color:#fff;padding:10px;width:30px;height:30px;border:none;cursor:pointer;border-radius:50%}"]});let t=e;return t})();var Mb=(()=>{let e=class e{constructor(){this.title="eva64campoverdeoscar"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Et({type:e,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:2,vars:0,template:function(i,s){i&1&&Nr(0,"app-header")(1,"app-body")},dependencies:[Ab,Rb]});let t=e;return t})();AE(Mb,Sb).catch(t=>console.error(t));
